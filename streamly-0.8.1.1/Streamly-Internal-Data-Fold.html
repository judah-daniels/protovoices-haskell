<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Streamly.Internal.Data.Fold</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">streamly-0.8.1.1: Dataflow programming and declarative concurrency</span><ul class="links" id="page-menu"><li><a href="src/Streamly.Internal.Data.Fold.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2019 Composewell Technologies<br />(c) 2013 Gabriel Gonzalez</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Internal.Data.Fold</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Fold Type</a></li><li><a href="#g:2">Constructors</a></li><li><a href="#g:3">Folds</a><ul><li><a href="#g:4">Identity</a></li><li><a href="#g:5">Accumulators</a><ul><li><a href="#g:6">Semigroups and Monoids</a></li><li><a href="#g:7">Reducers</a></li><li><a href="#g:8">Saturating Reducers</a></li><li><a href="#g:9">Collectors</a></li></ul></li><li><a href="#g:10">Terminating Folds</a></li></ul></li><li><a href="#g:11">Combinators</a><ul><li><a href="#g:12">Utilities</a></li><li><a href="#g:13">Transforming the Monad</a></li><li><a href="#g:14">Mapping on output</a></li><li><a href="#g:15">Mapping on Input</a></li><li><a href="#g:16">Filtering</a></li><li><a href="#g:17">Mapping Filters</a></li><li><a href="#g:18">Trimming</a></li><li><a href="#g:19">Serial Append</a></li><li><a href="#g:20">Parallel Distribution</a></li><li><a href="#g:21">Parallel Alternative</a></li><li><a href="#g:22">Partitioning</a></li><li><a href="#g:23">Demultiplexing</a></li><li><a href="#g:24">Classifying</a></li><li><a href="#g:25">Unzipping</a></li><li><a href="#g:26">Zipping</a></li><li><a href="#g:27">Splitting</a></li><li><a href="#g:28">Nesting</a></li></ul></li><li><a href="#g:29">Running A Fold</a></li><li><a href="#g:30">Deprecated</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>See <a href="Streamly-Data-Fold.html">Streamly.Data.Fold</a> for an overview and
 <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a> for design notes.</p><p>IMPORTANT: keep the signatures consistent with the folds in Streamly.Prelude</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Step">Step</a> s b<ul class="subs"><li>= <a href="#v:Partial">Partial</a> !s</li><li>| <a href="#v:Done">Done</a> !b</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Fold">Fold</a> m a b = <span class="keyword">forall</span> s. <a href="#v:Fold">Fold</a> (s -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b)) (m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b)) (s -&gt; m b)</li><li class="src short"><a href="#v:foldl-39-">foldl'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:foldlM-39-">foldlM'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:foldl1-39-">foldl1'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; a) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:foldr">foldr</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:foldrM">foldrM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mkFold">mkFold</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (s -&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b -&gt; (s -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mkFold_">mkFold_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mkFoldM">mkFoldM</a> :: (s -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b)) -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b) -&gt; (s -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mkFoldM_">mkFoldM_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b b)) -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:fromPure">fromPure</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:fromEffect">fromEffect</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; m b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:sconcat">sconcat</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:mconcat">mconcat</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:foldMap">foldMap</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:foldMapM">foldMapM</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:drain">drain</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a ()</li><li class="src short"><a href="#v:drainBy">drainBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a ()</li><li class="src short"><a href="#v:last">last</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:length">length</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:mean">mean</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:variance">variance</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:stdDev">stdDev</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Numeric.html#t:Floating" title="Numeric">Floating</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:rollingHash">rollingHash</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></li><li class="src short"><a href="#v:rollingHashWithSalt">rollingHashWithSalt</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></li><li class="src short"><a href="#v:rollingHashFirstN">rollingHashFirstN</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></li><li class="src short"><a href="#v:sum">sum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:product">product</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Num" title="Prelude">Num</a> a, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:maximumBy">maximumBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:maximum">maximum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:minimumBy">minimumBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:minimum">minimum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:toList">toList</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [a]</li><li class="src short"><a href="#v:toListRev">toListRev</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [a]</li><li class="src short"><a href="#v:toStream">toStream</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> n a)</li><li class="src short"><a href="#v:toStreamRev">toStreamRev</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> n a)</li><li class="src short"><a href="#v:drainN">drainN</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a ()</li><li class="src short"><a href="#v:genericIndex">genericIndex</a> :: (<a href="../base-4.16.4.0/Prelude.html#t:Integral" title="Prelude">Integral</a> i, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; i -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:index">index</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:head">head</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:find">find</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:lookup">lookup</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b)</li><li class="src short"><a href="#v:findIndex">findIndex</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><a href="#v:elemIndex">elemIndex</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><a href="#v:null">null</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:elem">elem</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:notElem">notElem</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:all">all</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:any">any</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:and">and</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:or">or</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:with">with</a> :: (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (s, a) b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; (((s, a) -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (s, a) b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (s, a) b) -&gt; ((s, a) -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:hoist">hoist</a> :: (<span class="keyword">forall</span> x. m x -&gt; n x) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> n a b</li><li class="src short"><a href="#v:generally">generally</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> <a href="../base-4.16.4.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:rmapM">rmapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:transform">transform</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Pipe-Type.html#t:Pipe" title="Streamly.Internal.Data.Pipe.Type">Pipe</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:lmap">lmap</a> :: (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:lmapM">lmapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:scan">scan</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:indexed">indexed</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, a) b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:filter">filter</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:filterM">filterM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:sampleFromthen">sampleFromthen</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:catMaybes">catMaybes</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) b</li><li class="src short"><a href="#v:mapMaybe">mapMaybe</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:take">take</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:takeEndBy">takeEndBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:takeEndBy_">takeEndBy_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:serialWith">serialWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x c</li><li class="src short"><a href="#v:serial_">serial_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b</li><li class="src short"><a href="#v:splitAt">splitAt</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (b, c)</li><li class="src short"><a href="#v:teeWith">teeWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x c</li><li class="src short"><a href="#v:tee">tee</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (b, c)</li><li class="src short"><a href="#v:teeWithFst">teeWithFst</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; c -&gt; d) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a d</li><li class="src short"><a href="#v:teeWithMin">teeWithMin</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; c -&gt; d) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a d</li><li class="src short"><a href="#v:distribute">distribute</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; [<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b] -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [b]</li><li class="src short"><a href="#v:shortest">shortest</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b)</li><li class="src short"><a href="#v:longest">longest</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b)</li><li class="src short"><a href="#v:partitionByM">partitionByM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y)</li><li class="src short"><a href="#v:partitionByFstM">partitionByFstM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y)</li><li class="src short"><a href="#v:partitionByMinM">partitionByMinM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y)</li><li class="src short"><a href="#v:partitionBy">partitionBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y)</li><li class="src short"><a href="#v:partition">partition</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) (x, y)</li><li class="src short"><a href="#v:demux">demux</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b)</li><li class="src short"><a href="#v:demuxWith">demuxWith</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; (a -&gt; (k, a')) -&gt; <a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a' b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b)</li><li class="src short"><a href="#v:demuxDefault">demuxDefault</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b, b)</li><li class="src short"><a href="#v:demuxDefaultWith">demuxDefaultWith</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; (a -&gt; (k, a')) -&gt; <a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a' b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a') c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b, c)</li><li class="src short"><a href="#v:classify">classify</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b)</li><li class="src short"><a href="#v:classifyWith">classifyWith</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; (a -&gt; k) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b)</li><li class="src short"><a href="#v:unzip">unzip</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) (x, y)</li><li class="src short"><a href="#v:unzipWith">unzipWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; (b, c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y)</li><li class="src short"><a href="#v:unzipWithM">unzipWithM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (b, c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y)</li><li class="src short"><a href="#v:unzipWithFstM">unzipWithFstM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (b, c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y)</li><li class="src short"><a href="#v:unzipWithMinM">unzipWithMinM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (b, c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y)</li><li class="src short"><a href="#v:zipWithM">zipWithM</a> :: (a -&gt; b -&gt; m c) -&gt; t m a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x</li><li class="src short"><a href="#v:zip">zip</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; t m a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x</li><li class="src short"><a href="#v:many">many</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:chunksOf">chunksOf</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:chunksBetween">chunksBetween</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:concatSequence">concatSequence</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; t (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:concatMap">concatMap</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:initialize">initialize</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</li><li class="src short"><a href="#v:snoc">snoc</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</li><li class="src short"><a href="#v:duplicate">duplicate</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</li><li class="src short"><a href="#v:finish">finish</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; m b</li><li class="src short"><a href="#v:sequence">sequence</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mapM">mapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Fold Type</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Step" class="def">Step</a> s b <a href="src/Streamly.Internal.Data.Fold.Step.html#Step" class="link">Source</a> <a href="#t:Step" class="selflink">#</a></p><div class="doc"><p>Represents the result of the <code>step</code> of a <code>Fold</code>.  <code><a href="Streamly-Internal-Data-Fold.html#v:Partial" title="Streamly.Internal.Data.Fold">Partial</a></code> returns an
 intermediate state of the fold, the fold step can be called again with the
 state or the driver can use <code>extract</code> on the state to get the result out.
 <code><a href="Streamly-Internal-Data-Fold.html#v:Done" title="Streamly.Internal.Data.Fold">Done</a></code> returns the final result and the fold cannot be driven further.</p><p><em>Pre-release</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Partial" class="def">Partial</a> !s</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Done" class="def">Done</a> !b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Step">Instances</h4><details id="i:Step" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Step:Bifunctor:1"></span> <a href="../base-4.16.4.0/Data-Bifunctor.html#t:Bifunctor" title="Data.Bifunctor">Bifunctor</a> <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a></span> <a href="src/Streamly.Internal.Data.Fold.Step.html#line-45" class="link">Source</a> <a href="#t:Step" class="selflink">#</a></td><td class="doc"><p><code><a href="../base-4.16.4.0/Data-Bifunctor.html#v:first" title="Data.Bifunctor">first</a></code> maps over <code><a href="Streamly-Internal-Data-Fold.html#v:Partial" title="Streamly.Internal.Data.Fold">Partial</a></code> and <code><a href="../base-4.16.4.0/Data-Bifunctor.html#v:second" title="Data.Bifunctor">second</a></code> maps over <code><a href="Streamly-Internal-Data-Fold.html#v:Done" title="Streamly.Internal.Data.Fold">Done</a></code>.</p></td></tr><tr><td colspan="2"><details id="i:id:Step:Bifunctor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Step.html">Streamly.Internal.Data.Fold.Step</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:bimap">bimap</a> :: (a -&gt; b) -&gt; (c -&gt; d) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b d <a href="#v:bimap" class="selflink">#</a></p><p class="src"><a href="#v:first">first</a> :: (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b c <a href="#v:first" class="selflink">#</a></p><p class="src"><a href="#v:second">second</a> :: (b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> a c <a href="#v:second" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Step:Functor:2"></span> <a href="../base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s)</span> <a href="src/Streamly.Internal.Data.Fold.Step.html#line-64" class="link">Source</a> <a href="#t:Step" class="selflink">#</a></td><td class="doc"><p><code><a href="../base-4.16.4.0/Data-Functor.html#v:fmap" title="Data.Functor">fmap</a></code> maps over <code><a href="Streamly-Internal-Data-Fold.html#v:Done" title="Streamly.Internal.Data.Fold">Done</a></code>.</p><pre>fmap = <code><a href="../base-4.16.4.0/Data-Bifunctor.html#v:second" title="Data.Bifunctor">second</a></code>
</pre></td></tr><tr><td colspan="2"><details id="i:id:Step:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Step.html">Streamly.Internal.Data.Fold.Step</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Fold" class="def">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#Fold" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></p><div class="doc"><p>The type <code>Fold m a b</code> having constructor <code>Fold step initial extract</code>
 represents a fold over an input stream of values of type <code>a</code> to a final
 value of type <code>b</code> in <code><a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> <code>m</code>.</p><p>The fold uses an intermediate state <code>s</code> as accumulator, the type <code>s</code> is
 internal to the specific fold definition. The initial value of the fold
 state <code>s</code> is returned by <code>initial</code>. The <code>step</code> function consumes an input
 and either returns the final result <code>b</code> if the fold is done or the next
 intermediate state (see <code><a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a></code>). At any point the fold driver can extract
 the result from the intermediate state using the <code>extract</code> function.</p><p>NOTE: The constructor is not yet exposed via exposed modules, smart
 constructors are provided to create folds.  If you think you need the
 constructor of this type please consider using the smart constructors in
 <a href="Streamly-Internal-Data-Fold.html">Streamly.Internal.Data.Fold</a> instead.</p><p><em>since 0.8.0 (type changed)</em></p><p><em>Since: 0.7.0</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> s. <a id="v:Fold" class="def">Fold</a> (s -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b)) (m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b)) (s -&gt; m b)</td><td class="doc"><p><code>Fold </code> <code> step </code> <code> initial </code> <code> extract</code></p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Fold">Instances</h4><details id="i:Fold" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Functor:1"></span> <a href="../base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m =&gt; <a href="../base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a)</span> <a href="src/Streamly.Internal.Data.Fold.Type.html#line-578" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Maps a function on the output of the fold (the type <code>b</code>).</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Type.html">Streamly.Internal.Data.Fold.Type</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a0 -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Constructors</h1></a><div class="top"><p class="src"><a id="v:foldl-39-" class="def">foldl'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#foldl%27" class="link">Source</a> <a href="#v:foldl-39-" class="selflink">#</a></p><div class="doc"><p>Make a fold from a left fold style pure step function and initial value of
 the accumulator.</p><p>If your <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code> returns only <code><a href="Streamly-Internal-Data-Fold.html#v:Partial" title="Streamly.Internal.Data.Fold">Partial</a></code> (i.e. never returns a <code><a href="Streamly-Internal-Data-Fold.html#v:Done" title="Streamly.Internal.Data.Fold">Done</a></code>) then you
 can use <code>foldl'*</code> constructors.</p><p>A fold with an extract function can be expressed using fmap:</p><pre>mkfoldlx :: Monad m =&gt; (s -&gt; a -&gt; s) -&gt; s -&gt; (s -&gt; b) -&gt; Fold m a b
mkfoldlx step initial extract = fmap extract (foldl' step initial)
</pre><p>See also: <code>Streamly.Prelude.foldl'</code></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldlM-39-" class="def">foldlM'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#foldlM%27" class="link">Source</a> <a href="#v:foldlM-39-" class="selflink">#</a></p><div class="doc"><p>Make a fold from a left fold style monadic step function and initial value
 of the accumulator.</p><p>A fold with an extract function can be expressed using rmapM:</p><pre>mkFoldlxM :: Functor m =&gt; (s -&gt; a -&gt; m s) -&gt; m s -&gt; (s -&gt; m b) -&gt; Fold m a b
mkFoldlxM step initial extract = rmapM extract (foldlM' step initial)
</pre><p>See also: <code>Streamly.Prelude.foldlM'</code></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldl1-39-" class="def">foldl1'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; a) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.Type.html#foldl1%27" class="link">Source</a> <a href="#v:foldl1-39-" class="selflink">#</a></p><div class="doc"><p>Make a strict left fold, for non-empty streams, using first element as the
 starting value. Returns Nothing if the stream is empty.</p><p>See also: <code>Streamly.Prelude.foldl1'</code></p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:foldr" class="def">foldr</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#foldr" class="link">Source</a> <a href="#v:foldr" class="selflink">#</a></p><div class="doc"><p>Make a fold using a right fold style step function and a terminal value.
 It performs a strict right fold via a left fold using function composition.
 Note that this is strict fold, it can only be useful for constructing strict
 structures in memory. For reductions this will be very inefficient.</p><p>For example,</p><pre>toList = foldr (:) []</pre><p>See also: <code><a href="Streamly-Prelude.html#v:foldr" title="Streamly.Prelude">foldr</a></code></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldrM" class="def">foldrM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#foldrM" class="link">Source</a> <a href="#v:foldrM" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:foldr" title="Streamly.Internal.Data.Fold">foldr</a></code> but with a monadic step function.</p><p>For example,</p><pre>toList = foldrM (\a xs -&gt; return $ a : xs) (return [])</pre><p>See also: <code><a href="Streamly-Prelude.html#v:foldrM" title="Streamly.Prelude">foldrM</a></code></p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:mkFold" class="def">mkFold</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (s -&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b -&gt; (s -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#mkFold" class="link">Source</a> <a href="#v:mkFold" class="selflink">#</a></p><div class="doc"><p>Make a terminating fold using a pure step function, a pure initial state
 and a pure state extraction function.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:mkFold_" class="def">mkFold_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#mkFold_" class="link">Source</a> <a href="#v:mkFold_" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Streamly-Internal-Data-Fold.html#v:mkFold" title="Streamly.Internal.Data.Fold">mkFold</a></code> but the final state extracted is identical to the
 intermediate state.</p><pre>mkFold_ step initial = mkFold step initial id
</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:mkFoldM" class="def">mkFoldM</a> :: (s -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b)) -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> s b) -&gt; (s -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#mkFoldM" class="link">Source</a> <a href="#v:mkFoldM" class="selflink">#</a></p><div class="doc"><p>Make a terminating fold with an effectful step function and initial state,
 and a state extraction function.</p><pre>mkFoldM = Fold</pre><p>We can just use <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code> but it is provided for completeness.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:mkFoldM_" class="def">mkFoldM_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b b)) -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Step" title="Streamly.Internal.Data.Fold">Step</a> b b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#mkFoldM_" class="link">Source</a> <a href="#v:mkFoldM_" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Streamly-Internal-Data-Fold.html#v:mkFoldM" title="Streamly.Internal.Data.Fold">mkFoldM</a></code> but the final state extracted is identical to the
 intermediate state.</p><pre>mkFoldM_ step initial = mkFoldM step initial return
</pre><p><em>Pre-release</em></p></div></div><a href="#g:3" id="g:3"><h1>Folds</h1></a><a href="#g:4" id="g:4"><h2>Identity</h2></a><div class="top"><p class="src"><a id="v:fromPure" class="def">fromPure</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#fromPure" class="link">Source</a> <a href="#v:fromPure" class="selflink">#</a></p><div class="doc"><p>A fold that always yields a pure value without consuming any input.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:fromEffect" class="def">fromEffect</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; m b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#fromEffect" class="link">Source</a> <a href="#v:fromEffect" class="selflink">#</a></p><div class="doc"><p>A fold that always yields the result of an effectful action without
 consuming any input.</p><p><em>Pre-release</em></p></div></div><a href="#g:5" id="g:5"><h2>Accumulators</h2></a><a href="#g:6" id="g:6"><h3>Semigroups and Monoids</h3></a><div class="top"><p class="src"><a id="v:sconcat" class="def">sconcat</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#sconcat" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><div class="doc"><p>Append the elements of an input stream to a provided starting value.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.sconcat 10) (Stream.map Data.Monoid.Sum $ Stream.enumerateFromTo 1 10)
</code></strong>Sum {getSum = 65}
</pre><pre>sconcat = Fold.foldl' (&lt;&gt;)
</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:mconcat" class="def">mconcat</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p><div class="doc"><p>Fold an input stream consisting of monoidal elements using <code><a href="../base-4.16.4.0/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code>
 and <code><a href="../base-4.16.4.0/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold Fold.mconcat (Stream.map Data.Monoid.Sum $ Stream.enumerateFromTo 1 10)
</code></strong>Sum {getSum = 55}
</pre><pre>mconcat = Fold.sconcat mempty</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldMap" class="def">foldMap</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#foldMap" class="link">Source</a> <a href="#v:foldMap" class="selflink">#</a></p><div class="doc"><pre>foldMap f = Fold.lmap f Fold.mconcat</pre><p>Make a fold from a pure function that folds the output of the function
 using <code><a href="../base-4.16.4.0/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code> and <code><a href="../base-4.16.4.0/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.foldMap Data.Monoid.Sum) $ Stream.enumerateFromTo 1 10
</code></strong>Sum {getSum = 55}
</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldMapM" class="def">foldMapM</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#foldMapM" class="link">Source</a> <a href="#v:foldMapM" class="selflink">#</a></p><div class="doc"><pre>foldMapM f = Fold.lmapM f Fold.mconcat</pre><p>Make a fold from a monadic function that folds the output of the function
 using <code><a href="../base-4.16.4.0/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code> and <code><a href="../base-4.16.4.0/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.foldMapM (return . Data.Monoid.Sum)) $ Stream.enumerateFromTo 1 10
</code></strong>Sum {getSum = 55}
</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:7" id="g:7"><h3>Reducers</h3></a><div class="top"><p class="src"><a id="v:drain" class="def">drain</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a () <a href="src/Streamly.Internal.Data.Fold.Type.html#drain" class="link">Source</a> <a href="#v:drain" class="selflink">#</a></p><div class="doc"><p>A fold that drains all its input, running the effects and discarding the
 results.</p><pre>drain = drainBy (const (return ()))</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:drainBy" class="def">drainBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a () <a href="src/Streamly.Internal.Data.Fold.html#drainBy" class="link">Source</a> <a href="#v:drainBy" class="selflink">#</a></p><div class="doc"><pre>drainBy f = lmapM f drain
drainBy = Fold.foldMapM (void . f)</pre><p>Drain all input after passing it through a monadic function. This is the
 dual of mapM_ on stream producers.</p><p>See also: <code><a href="Streamly-Prelude.html#v:mapM_" title="Streamly.Prelude">mapM_</a></code></p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:last" class="def">last</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#last" class="link">Source</a> <a href="#v:last" class="selflink">#</a></p><div class="doc"><p>Extract the last element of the input stream, if any.</p><pre>last = fmap getLast $ Fold.foldMap (Last . Just)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:length" class="def">length</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Fold.html#length" class="link">Source</a> <a href="#v:length" class="selflink">#</a></p><div class="doc"><p>Determine the length of the input stream.</p><pre>length = fmap getSum $ Fold.foldMap (Sum . const  1)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:mean" class="def">mean</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#mean" class="link">Source</a> <a href="#v:mean" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable arithmetic mean of all elements in the input
 stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:variance" class="def">variance</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#variance" class="link">Source</a> <a href="#v:variance" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable (population) variance over all elements in
 the input stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:stdDev" class="def">stdDev</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Numeric.html#t:Floating" title="Numeric">Floating</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#stdDev" class="link">Source</a> <a href="#v:stdDev" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable (population) standard deviation over all
 elements in the input stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:rollingHash" class="def">rollingHash</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> <a href="src/Streamly.Internal.Data.Fold.html#rollingHash" class="link">Source</a> <a href="#v:rollingHash" class="selflink">#</a></p><div class="doc"><p>Compute an <code><a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code> sized polynomial rolling hash of a stream.</p><pre>rollingHash = Fold.rollingHashWithSalt defaultSalt</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:rollingHashWithSalt" class="def">rollingHashWithSalt</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> <a href="src/Streamly.Internal.Data.Fold.html#rollingHashWithSalt" class="link">Source</a> <a href="#v:rollingHashWithSalt" class="selflink">#</a></p><div class="doc"><p>Compute an <code><a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code> sized polynomial rolling hash</p><pre>H = salt * k ^ n + c1 * k ^ (n - 1) + c2 * k ^ (n - 2) + ... + cn * k ^ 0</pre><p>Where <code>c1</code>, <code>c2</code>, <code>cn</code> are the elements in the input stream and <code>k</code> is a
 constant.</p><p>This hash is often used in Rabin-Karp string search algorithm.</p><p>See <a href="https://en.wikipedia.org/wiki/Rolling_hash">https://en.wikipedia.org/wiki/Rolling_hash</a></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:rollingHashFirstN" class="def">rollingHashFirstN</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> <a href="src/Streamly.Internal.Data.Fold.html#rollingHashFirstN" class="link">Source</a> <a href="#v:rollingHashFirstN" class="selflink">#</a></p><div class="doc"><p>Compute an <code><a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code> sized polynomial rolling hash of the first n elements of
 a stream.</p><pre>rollingHashFirstN = Fold.take n Fold.rollingHash</pre><p><em>Pre-release</em></p></div></div><a href="#g:8" id="g:8"><h3>Saturating Reducers</h3></a><div class="doc"><p><code><a href="Streamly-Internal-Data-Fold.html#v:product" title="Streamly.Internal.Data.Fold">product</a></code> terminates if it becomes 0. Other folds can theoretically
 saturate on bounded types, and therefore terminate, however, they will
 run forever on unbounded types like Integer/Double.</p></div><div class="top"><p class="src"><a id="v:sum" class="def">sum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#sum" class="link">Source</a> <a href="#v:sum" class="selflink">#</a></p><div class="doc"><p>Determine the sum of all elements of a stream of numbers. Returns additive
 identity (<code>0</code>) when the stream is empty. Note that this is not numerically
 stable for floating point numbers.</p><pre>sum = fmap getSum $ Fold.foldMap Sum</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:product" class="def">product</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Num" title="Prelude">Num</a> a, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#product" class="link">Source</a> <a href="#v:product" class="selflink">#</a></p><div class="doc"><p>Determine the product of all elements of a stream of numbers. Returns
 multiplicative identity (<code>1</code>) when the stream is empty. The fold terminates
 when it encounters (<code>0</code>) in its input.</p><p>Compare with <code>Fold.foldMap Product</code>.</p><p><em>Since 0.8.0 (Added <code><a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a></code> constraint)</em></p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:maximumBy" class="def">maximumBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#maximumBy" class="link">Source</a> <a href="#v:maximumBy" class="selflink">#</a></p><div class="doc"><p>Determine the maximum element in a stream using the supplied comparison
 function.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:maximum" class="def">maximum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#maximum" class="link">Source</a> <a href="#v:maximum" class="selflink">#</a></p><div class="doc"><pre>maximum = Fold.maximumBy compare
</pre><p>Determine the maximum element in a stream.</p><p>Compare with <code>Fold.foldMap Max</code>.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:minimumBy" class="def">minimumBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#minimumBy" class="link">Source</a> <a href="#v:minimumBy" class="selflink">#</a></p><div class="doc"><p>Computes the minimum element with respect to the given comparison function</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:minimum" class="def">minimum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#minimum" class="link">Source</a> <a href="#v:minimum" class="selflink">#</a></p><div class="doc"><p>Determine the minimum element in a stream using the supplied comparison
 function.</p><pre>minimum = <code><a href="Streamly-Internal-Data-Fold.html#v:minimumBy" title="Streamly.Internal.Data.Fold">minimumBy</a></code> compare
</pre><p>Compare with <code>Fold.foldMap Min</code>.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:9" id="g:9"><h3>Collectors</h3></a><div class="doc"><p>Avoid using these folds in scalable or performance critical
 applications, they buffer all the input in GC memory which can be
 detrimental to performance if the input is large.</p></div><div class="top"><p class="src"><a id="v:toList" class="def">toList</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [a] <a href="src/Streamly.Internal.Data.Fold.Type.html#toList" class="link">Source</a> <a href="#v:toList" class="selflink">#</a></p><div class="doc"><p>Folds the input stream to a list.</p><p><em>Warning!</em> working on large lists accumulated as buffers in memory could be
 very inefficient, consider using <a href="Streamly-Data-Array-Foreign.html">Streamly.Data.Array.Foreign</a>
 instead.</p><pre>toList = foldr (:) []</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:toListRev" class="def">toListRev</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [a] <a href="src/Streamly.Internal.Data.Fold.html#toListRev" class="link">Source</a> <a href="#v:toListRev" class="selflink">#</a></p><div class="doc"><p>Buffers the input stream to a list in the reverse order of the input.</p><pre>toListRev = Fold.foldl' (flip (:)) []</pre><p><em>Warning!</em> working on large lists accumulated as buffers in memory could be
 very inefficient, consider using <a href="Streamly-Array.html">Streamly.Array</a> instead.</p><p><em>Since: 0.8.0</em></p></div></div><div class="doc"><p>This is more efficient than <code><a href="Streamly-Internal-Data-Fold.html#v:toList" title="Streamly.Internal.Data.Fold">toList</a></code>. toList is
 exactly the same as reversing the list after <code><a href="Streamly-Internal-Data-Fold.html#v:toListRev" title="Streamly.Internal.Data.Fold">toListRev</a></code>.</p></div><div class="top"><p class="src"><a id="v:toStream" class="def">toStream</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> n a) <a href="src/Streamly.Internal.Data.Fold.html#toStream" class="link">Source</a> <a href="#v:toStream" class="selflink">#</a></p><div class="doc"><p>A fold that buffers its input to a pure stream.</p><p><em>Warning!</em> working on large streams accumulated as buffers in memory could
 be very inefficient, consider using <a href="Streamly-Data-Array.html">Streamly.Data.Array</a> instead.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>toStream = fmap SerialT Fold.toStreamK
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:toStreamRev" class="def">toStreamRev</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> n a) <a href="src/Streamly.Internal.Data.Fold.html#toStreamRev" class="link">Source</a> <a href="#v:toStreamRev" class="selflink">#</a></p><div class="doc"><p>Buffers the input stream to a pure stream in the reverse order of the
 input.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>toStreamRev = fmap SerialT Fold.toStreamKRev
</code></strong></pre><p><em>Warning!</em> working on large streams accumulated as buffers in memory could
 be very inefficient, consider using <a href="Streamly-Data-Array.html">Streamly.Data.Array</a> instead.</p><p><em>Pre-release</em></p></div></div><a href="#g:10" id="g:10"><h2>Terminating Folds</h2></a><div class="top"><p class="src"><a id="v:drainN" class="def">drainN</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a () <a href="src/Streamly.Internal.Data.Fold.html#drainN" class="link">Source</a> <a href="#v:drainN" class="selflink">#</a></p><div class="doc"><p>A fold that drains the first n elements of its input, running the effects
 and discarding the results.</p><pre>drainN n = Fold.take n Fold.drain</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:genericIndex" class="def">genericIndex</a> :: (<a href="../base-4.16.4.0/Prelude.html#t:Integral" title="Prelude">Integral</a> i, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; i -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#genericIndex" class="link">Source</a> <a href="#v:genericIndex" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:index" title="Streamly.Internal.Data.Fold">index</a></code>, except with a more general <code><a href="../base-4.16.4.0/Prelude.html#t:Integral" title="Prelude">Integral</a></code> argument</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:index" class="def">index</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#index" class="link">Source</a> <a href="#v:index" class="selflink">#</a></p><div class="doc"><p>Lookup the element at the given index.</p><p>See also: <code><a href="Streamly-Prelude.html#v:-33--33-" title="Streamly.Prelude">!!</a></code></p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:head" class="def">head</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#head" class="link">Source</a> <a href="#v:head" class="selflink">#</a></p><div class="doc"><p>Extract the first element of the stream, if any.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:find" class="def">find</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#find" class="link">Source</a> <a href="#v:find" class="selflink">#</a></p><div class="doc"><p>Returns the first element that satisfies the given predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:lookup" class="def">lookup</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) <a href="src/Streamly.Internal.Data.Fold.html#lookup" class="link">Source</a> <a href="#v:lookup" class="selflink">#</a></p><div class="doc"><p>In a stream of (key-value) pairs <code>(a, b)</code>, return the value <code>b</code> of the
 first pair where the key equals the given value <code>a</code>.</p><pre>lookup = snd &lt;$&gt; Fold.find ((==) . fst)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:findIndex" class="def">findIndex</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Streamly.Internal.Data.Fold.html#findIndex" class="link">Source</a> <a href="#v:findIndex" class="selflink">#</a></p><div class="doc"><p>Returns the first index that satisfies the given predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:elemIndex" class="def">elemIndex</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Streamly.Internal.Data.Fold.html#elemIndex" class="link">Source</a> <a href="#v:elemIndex" class="selflink">#</a></p><div class="doc"><p>Returns the first index where a given value is found in the stream.</p><pre>elemIndex a = Fold.findIndex (== a)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:null" class="def">null</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#null" class="link">Source</a> <a href="#v:null" class="selflink">#</a></p><div class="doc"><p>Return <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the input stream is empty.</p><pre>null = fmap isJust Fold.head</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:elem" class="def">elem</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#elem" class="link">Source</a> <a href="#v:elem" class="selflink">#</a></p><div class="doc"><p>Return <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the given element is present in the stream.</p><pre>elem a = Fold.any (== a)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:notElem" class="def">notElem</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#notElem" class="link">Source</a> <a href="#v:notElem" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the given element is not present in the stream.</p><pre>notElem a = Fold.all (/= a)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:all" class="def">all</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#all" class="link">Source</a> <a href="#v:all" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if all elements of a stream satisfy a predicate.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.all (== 0)) $ Stream.fromList [1,0,1]
</code></strong>False
</pre><pre>all p = Fold.lmap p Fold.and</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:any" class="def">any</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#any" class="link">Source</a> <a href="#v:any" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if any of the elements of a stream satisfies a predicate.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.any (== 0)) $ Stream.fromList [1,0,1]
</code></strong>True
</pre><pre>any p = Fold.lmap p Fold.or</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:and" class="def">and</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#and" class="link">Source</a> <a href="#v:and" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if all elements are <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, <code><a href="../base-4.16.4.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise</p><pre>and = Fold.all (== True)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:or" class="def">or</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#or" class="link">Source</a> <a href="#v:or" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if any element is <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, <code><a href="../base-4.16.4.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise</p><pre>or = Fold.any (== True)</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:11" id="g:11"><h1>Combinators</h1></a><a href="#g:12" id="g:12"><h2>Utilities</h2></a><div class="top"><p class="src"><a id="v:with" class="def">with</a> :: (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (s, a) b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; (((s, a) -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (s, a) b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (s, a) b) -&gt; ((s, a) -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#with" class="link">Source</a> <a href="#v:with" class="selflink">#</a></p><div class="doc"><p>Change the predicate function of a Fold from <code>a -&gt; b</code> to accept an
 additional state input <code>(s, a) -&gt; b</code>. Convenient to filter with an
 addiitonal index or time input.</p><pre>filterWithIndex = with indexed filter
filterWithAbsTime = with timestamped filter
filterWithRelTime = with timeIndexed filter
</pre><p><em>Pre-release</em></p></div></div><a href="#g:13" id="g:13"><h2>Transforming the Monad</h2></a><div class="top"><p class="src"><a id="v:hoist" class="def">hoist</a> :: (<span class="keyword">forall</span> x. m x -&gt; n x) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> n a b <a href="src/Streamly.Internal.Data.Fold.html#hoist" class="link">Source</a> <a href="#v:hoist" class="selflink">#</a></p><div class="doc"><p>Change the underlying monad of a fold</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:generally" class="def">generally</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> <a href="../base-4.16.4.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#generally" class="link">Source</a> <a href="#v:generally" class="selflink">#</a></p><div class="doc"><p>Adapt a pure fold to any monad</p><pre>generally = Fold.hoist (return . runIdentity)</pre><p><em>Pre-release</em></p></div></div><a href="#g:14" id="g:14"><h2>Mapping on output</h2></a><div class="top"><p class="src"><a id="v:rmapM" class="def">rmapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.Type.html#rmapM" class="link">Source</a> <a href="#v:rmapM" class="selflink">#</a></p><div class="doc"><p>Map a monadic function on the output of a fold.</p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:15" id="g:15"><h2>Mapping on Input</h2></a><div class="top"><p class="src"><a id="v:transform" class="def">transform</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Pipe-Type.html#t:Pipe" title="Streamly.Internal.Data.Pipe.Type">Pipe</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.html#transform" class="link">Source</a> <a href="#v:transform" class="selflink">#</a></p><div class="doc"><p>Apply a transformation on a <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code> using a <code><a href="Streamly-Internal-Data-Pipe-Type.html#t:Pipe" title="Streamly.Internal.Data.Pipe.Type">Pipe</a></code>.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:lmap" class="def">lmap</a> :: (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.Type.html#lmap" class="link">Source</a> <a href="#v:lmap" class="selflink">#</a></p><div class="doc"><p><code>lmap f fold</code> maps the function <code>f</code> on the input of the fold.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.lmap (\x -&gt; x * x) Fold.sum) (Stream.enumerateFromTo 1 100)
</code></strong>338350
</pre><pre>lmap = Fold.lmapM return</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:lmapM" class="def">lmapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.Type.html#lmapM" class="link">Source</a> <a href="#v:lmapM" class="selflink">#</a></p><div class="doc"><p><code>lmapM f fold</code> maps the monadic function <code>f</code> on the input of the fold.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:scan" class="def">scan</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.html#scan" class="link">Source</a> <a href="#v:scan" class="selflink">#</a></p><div class="doc"><p>Scan the input of a <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code> to change it in a stateful manner using another
 <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code>.
 <em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:indexed" class="def">indexed</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, a) b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#indexed" class="link">Source</a> <a href="#v:indexed" class="selflink">#</a></p><div class="doc"><p>Pair each element of a fold input with its index, starting from index 0.</p><p><em>Unimplemented</em></p></div></div><a href="#g:16" id="g:16"><h2>Filtering</h2></a><div class="top"><p class="src"><a id="v:filter" class="def">filter</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.Type.html#filter" class="link">Source</a> <a href="#v:filter" class="selflink">#</a></p><div class="doc"><p>Include only those elements that pass a predicate.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.filter (&gt; 5) Fold.sum) $ Stream.fromList [1..10]
</code></strong>40
</pre><pre>filter f = Fold.filterM (return . f)</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:filterM" class="def">filterM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.Type.html#filterM" class="link">Source</a> <a href="#v:filterM" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:filter" title="Streamly.Internal.Data.Fold">filter</a></code> but with a monadic predicate.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:sampleFromthen" class="def">sampleFromthen</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#sampleFromthen" class="link">Source</a> <a href="#v:sampleFromthen" class="selflink">#</a></p><div class="doc"><p><code>sampleFromthen offset stride</code> samples the element at <code>offset</code> index and
 then every element at strides of <code>stride</code>.</p><p><em>Unimplemented</em></p></div></div><a href="#g:17" id="g:17"><h2>Mapping Filters</h2></a><div class="top"><p class="src"><a id="v:catMaybes" class="def">catMaybes</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) b <a href="src/Streamly.Internal.Data.Fold.Type.html#catMaybes" class="link">Source</a> <a href="#v:catMaybes" class="selflink">#</a></p><div class="doc"><p>Modify a fold to receive a <code><a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> input, the <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> values are unwrapped
 and sent to the original fold, <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> values are discarded.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:mapMaybe" class="def">mapMaybe</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.html#mapMaybe" class="link">Source</a> <a href="#v:mapMaybe" class="selflink">#</a></p><div class="doc"><p><code>mapMaybe f fold</code> maps a <code><a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> returning function <code>f</code> on the input of
 the fold, filters out <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> elements, and return the values extracted
 from <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>f x = if even x then Just x else Nothing
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fld = Fold.mapMaybe f Fold.toList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold fld (Stream.enumerateFromTo 1 10)
</code></strong>[2,4,6,8,10]
</pre><p><em>Since: 0.8.0</em></p></div></div><a href="#g:18" id="g:18"><h2>Trimming</h2></a><div class="top"><p class="src"><a id="v:take" class="def">take</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Type.html#take" class="link">Source</a> <a href="#v:take" class="selflink">#</a></p><div class="doc"><p>Take at most <code>n</code> input elements and fold them using the supplied fold. A
 negative count is treated as 0.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.take 2 Fold.toList) $ Stream.fromList [1..10]
</code></strong>[1,2]
</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:takeEndBy" class="def">takeEndBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#takeEndBy" class="link">Source</a> <a href="#v:takeEndBy" class="selflink">#</a></p><div class="doc"><p>Take the input, stop when the predicate succeeds taking the succeeding
 element as well.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.takeEndBy (== '\n') Fold.toList) $ Stream.fromList &quot;hello\nthere\n&quot;
</code></strong>&quot;hello\n&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.toList $ Stream.foldMany (Fold.takeEndBy (== '\n') Fold.toList) $ Stream.fromList &quot;hello\nthere\n&quot;
</code></strong>[&quot;hello\n&quot;,&quot;there\n&quot;]
</pre><pre>Stream.splitWithSuffix p f = Stream.foldMany (Fold.takeEndBy p f)</pre><p>See <code><a href="Streamly-Prelude.html#v:splitWithSuffix" title="Streamly.Prelude">splitWithSuffix</a></code> for more details on splitting a
 stream using <code><a href="Streamly-Internal-Data-Fold.html#v:takeEndBy" title="Streamly.Internal.Data.Fold">takeEndBy</a></code>.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:takeEndBy_" class="def">takeEndBy_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#takeEndBy_" class="link">Source</a> <a href="#v:takeEndBy_" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:takeEndBy" title="Streamly.Internal.Data.Fold">takeEndBy</a></code> but drops the element on which the predicate succeeds.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.takeEndBy_ (== '\n') Fold.toList) $ Stream.fromList &quot;hello\nthere\n&quot;
</code></strong>&quot;hello&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.toList $ Stream.foldMany (Fold.takeEndBy_ (== '\n') Fold.toList) $ Stream.fromList &quot;hello\nthere\n&quot;
</code></strong>[&quot;hello&quot;,&quot;there&quot;]
</pre><pre>Stream.splitOnSuffix p f = Stream.foldMany (Fold.takeEndBy_ p f)</pre><p>See <code><a href="Streamly-Prelude.html#v:splitOnSuffix" title="Streamly.Prelude">splitOnSuffix</a></code> for more details on splitting a
 stream using <code><a href="Streamly-Internal-Data-Fold.html#v:takeEndBy_" title="Streamly.Internal.Data.Fold">takeEndBy_</a></code>.</p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:19" id="g:19"><h2>Serial Append</h2></a><div class="top"><p class="src"><a id="v:serialWith" class="def">serialWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x c <a href="src/Streamly.Internal.Data.Fold.Type.html#serialWith" class="link">Source</a> <a href="#v:serialWith" class="selflink">#</a></p><div class="doc"><p>Sequential fold application. Apply two folds sequentially to an input
 stream.  The input is provided to the first fold, when it is done - the
 remaining input is provided to the second fold. When the second fold is done
 or if the input stream is over, the outputs of the two folds are combined
 using the supplied function.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>f = Fold.serialWith (,) (Fold.take 8 Fold.toList) (Fold.takeEndBy (== '\n') Fold.toList)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold f $ Stream.fromList &quot;header: hello\n&quot;
</code></strong>(&quot;header: &quot;,&quot;hello\n&quot;)
</pre><p>Note: This is dual to appending streams using <code><a href="Streamly-Prelude.html#v:serial" title="Streamly.Prelude">serial</a></code>.</p><p>Note: this implementation allows for stream fusion but has quadratic time
 complexity, because each composition adds a new branch that each subsequent
 fold's input element has to traverse, therefore, it cannot scale to a large
 number of compositions. After around 100 compositions the performance starts
 dipping rapidly compared to a CPS style implementation.</p><p><em>Time: O(n^2) where n is the number of compositions.</em></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:serial_" class="def">serial_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b <a href="src/Streamly.Internal.Data.Fold.Type.html#serial_" class="link">Source</a> <a href="#v:serial_" class="selflink">#</a></p><div class="doc"><p>Same as applicative <code><a href="../base-4.16.4.0/Control-Applicative.html#v:-42--62-" title="Control.Applicative">*&gt;</a></code>. Run two folds serially one after the other
 discarding the result of the first.</p><p>This was written in the hope that it might be faster than implementing it
 using serialWith, but the current benchmarks show that it has the same
 performance. So do not expose it unless some benchmark shows benefit.</p></div></div><div class="top"><p class="src"><a id="v:splitAt" class="def">splitAt</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (b, c) <a href="src/Streamly.Internal.Data.Fold.html#splitAt" class="link">Source</a> <a href="#v:splitAt" class="selflink">#</a></p><div class="doc"><p><code>splitAt n f1 f2</code> composes folds <code>f1</code> and <code>f2</code> such that first <code>n</code>
 elements of its input are consumed by fold <code>f1</code> and the rest of the stream
 is consumed by fold <code>f2</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let splitAt_ n xs = Stream.fold (Fold.splitAt n Fold.toList Fold.toList) $ Stream.fromList xs
</code></strong></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitAt_ 6 &quot;Hello World!&quot;
</code></strong>(&quot;Hello &quot;,&quot;World!&quot;)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitAt_ (-1) [1,2,3]
</code></strong>([],[1,2,3])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitAt_ 0 [1,2,3]
</code></strong>([],[1,2,3])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitAt_ 1 [1,2,3]
</code></strong>([1],[2,3])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitAt_ 3 [1,2,3]
</code></strong>([1,2,3],[])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitAt_ 4 [1,2,3]
</code></strong>([1,2,3],[])
</pre><pre>splitAt n f1 f2 = Fold.serialWith (,) (Fold.take n f1) f2</pre><p><em>Internal</em></p></div></div><a href="#g:20" id="g:20"><h2>Parallel Distribution</h2></a><div class="top"><p class="src"><a id="v:teeWith" class="def">teeWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x c <a href="src/Streamly.Internal.Data.Fold.Type.html#teeWith" class="link">Source</a> <a href="#v:teeWith" class="selflink">#</a></p><div class="doc"><p><code>teeWith k f1 f2</code> distributes its input to both <code>f1</code> and <code>f2</code> until both
 of them terminate and combines their output using <code>k</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>avg = Fold.teeWith (/) Fold.sum (fmap fromIntegral Fold.length)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold avg $ Stream.fromList [1.0..100.0]
</code></strong>50.5
</pre><pre>teeWith k f1 f2 = fmap (uncurry k) ((Fold.tee f1 f2)</pre><p>For applicative composition using this combinator see
 <a href="Streamly-Internal-Data-Fold-Tee.html">Streamly.Internal.Data.Fold.Tee</a>.</p><p>See also: <a href="Streamly-Internal-Data-Fold-Tee.html">Streamly.Internal.Data.Fold.Tee</a></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:tee" class="def">tee</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (b, c) <a href="src/Streamly.Internal.Data.Fold.html#tee" class="link">Source</a> <a href="#v:tee" class="selflink">#</a></p><div class="doc"><p>Distribute one copy of the stream to each fold and zip the results.</p><pre>                |-------Fold m a b--------|
---stream m a---|                         |---m (b,c)
                |-------Fold m a c--------|
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.tee Fold.sum Fold.length) (Stream.enumerateFromTo 1.0 100.0)
</code></strong>(5050.0,100)
</pre><pre>tee = teeWith (,)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:teeWithFst" class="def">teeWithFst</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; c -&gt; d) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a d <a href="src/Streamly.Internal.Data.Fold.Type.html#teeWithFst" class="link">Source</a> <a href="#v:teeWithFst" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:teeWith" title="Streamly.Internal.Data.Fold">teeWith</a></code> but terminates as soon as the first fold terminates.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:teeWithMin" class="def">teeWithMin</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; c -&gt; d) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a d <a href="src/Streamly.Internal.Data.Fold.Type.html#teeWithMin" class="link">Source</a> <a href="#v:teeWithMin" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:teeWith" title="Streamly.Internal.Data.Fold">teeWith</a></code> but terminates as soon as any one of the two folds
 terminates.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:distribute" class="def">distribute</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; [<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b] -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [b] <a href="src/Streamly.Internal.Data.Fold.html#distribute" class="link">Source</a> <a href="#v:distribute" class="selflink">#</a></p><div class="doc"><p>Distribute one copy of the stream to each fold and collect the results in
 a container.</p><pre>
                |-------Fold m a b--------|
---stream m a---|                         |---m [b]
                |-------Fold m a b--------|
                |                         |
                           ...
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.distribute [Fold.sum, Fold.length]) (Stream.enumerateFromTo 1 5)
</code></strong>[15,5]
</pre><pre>distribute = Prelude.foldr (Fold.teeWith (:)) (Fold.fromPure [])</pre><p>This is the consumer side dual of the producer side <code><a href="Streamly-Internal-Data-Fold.html#v:sequence" title="Streamly.Internal.Data.Fold">sequence</a></code> operation.</p><p>Stops when all the folds stop.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:21" id="g:21"><h2>Parallel Alternative</h2></a><div class="top"><p class="src"><a id="v:shortest" class="def">shortest</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b) <a href="src/Streamly.Internal.Data.Fold.Type.html#shortest" class="link">Source</a> <a href="#v:shortest" class="selflink">#</a></p><div class="doc"><p>Shortest alternative. Apply both folds in parallel but choose the result
 from the one which consumed least input i.e. take the shortest succeeding
 fold.</p><p>If both the folds finish at the same time or if the result is extracted
 before any of the folds could finish then the left one is taken.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:longest" class="def">longest</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m x (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b) <a href="src/Streamly.Internal.Data.Fold.Type.html#longest" class="link">Source</a> <a href="#v:longest" class="selflink">#</a></p><div class="doc"><p>Longest alternative. Apply both folds in parallel but choose the result
 from the one which consumed more input i.e. take the longest succeeding
 fold.</p><p>If both the folds finish at the same time or if the result is extracted
 before any of the folds could finish then the left one is taken.</p><p><em>Pre-release</em></p></div></div><a href="#g:22" id="g:22"><h2>Partitioning</h2></a><div class="top"><p class="src"><a id="v:partitionByM" class="def">partitionByM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y) <a href="src/Streamly.Internal.Data.Fold.html#partitionByM" class="link">Source</a> <a href="#v:partitionByM" class="selflink">#</a></p><div class="doc"><p>Partition the input over two folds using an <code><a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code> partitioning
 predicate.</p><pre>
                                    |-------Fold b x--------|
-----stream m a --&gt; (Either b c)----|                       |----(x,y)
                                    |-------Fold c y--------|
</pre><p>Send input to either fold randomly:</p><pre>&gt; import System.Random (randomIO)
&gt; randomly a = randomIO &gt;&gt;= \x -&gt; return $ if x then Left a else Right a
&gt; Stream.fold (Fold.partitionByM randomly Fold.length Fold.length) (Stream.enumerateFromTo 1 100)
(59,41)
</pre><p>Send input to the two folds in a proportion of 2:1:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>proportionately m n = do
 ref &lt;- newIORef $ cycle $ concat [replicate m Left, replicate n Right]
 return $ \a -&gt; do
     r &lt;- readIORef ref
     writeIORef ref $ tail r
     return $ Prelude.head r a
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>main = do
 f &lt;- proportionately 2 1
 r &lt;- Stream.fold (Fold.partitionByM f Fold.length Fold.length) (Stream.enumerateFromTo (1 :: Int) 100)
 print r
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>main
</code></strong>(67,33)
</pre><p>This is the consumer side dual of the producer side <code>mergeBy</code> operation.</p><p>When one fold is done, any input meant for it is ignored until the other
 fold is also done.</p><p>Stops when both the folds stop.</p><p><em>See also: <code><a href="Streamly-Internal-Data-Fold.html#v:partitionByFstM" title="Streamly.Internal.Data.Fold">partitionByFstM</a></code> and <code><a href="Streamly-Internal-Data-Fold.html#v:partitionByMinM" title="Streamly.Internal.Data.Fold">partitionByMinM</a></code>.</em></p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:partitionByFstM" class="def">partitionByFstM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y) <a href="src/Streamly.Internal.Data.Fold.html#partitionByFstM" class="link">Source</a> <a href="#v:partitionByFstM" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Streamly-Internal-Data-Fold.html#v:partitionByM" title="Streamly.Internal.Data.Fold">partitionByM</a></code> but terminates when the first fold terminates.</p></div></div><div class="top"><p class="src"><a id="v:partitionByMinM" class="def">partitionByMinM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y) <a href="src/Streamly.Internal.Data.Fold.html#partitionByMinM" class="link">Source</a> <a href="#v:partitionByMinM" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Streamly-Internal-Data-Fold.html#v:partitionByM" title="Streamly.Internal.Data.Fold">partitionByM</a></code> but terminates when any fold terminates.</p></div></div><div class="top"><p class="src"><a id="v:partitionBy" class="def">partitionBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y) <a href="src/Streamly.Internal.Data.Fold.html#partitionBy" class="link">Source</a> <a href="#v:partitionBy" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Streamly-Internal-Data-Fold.html#v:partitionByM" title="Streamly.Internal.Data.Fold">partitionByM</a></code> but with a pure partition function.</p><p>Count even and odd numbers in a stream:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong> let f = Fold.partitionBy (\n -&gt; if even n then Left n else Right n)
                     (fmap ((&quot;Even &quot; ++) . show) Fold.length)
                     (fmap ((&quot;Odd &quot;  ++) . show) Fold.length)
  in Stream.fold f (Stream.enumerateFromTo 1 100)
:}
(&quot;Even 50&quot;,&quot;Odd 50&quot;)
</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:partition" class="def">partition</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) (x, y) <a href="src/Streamly.Internal.Data.Fold.html#partition" class="link">Source</a> <a href="#v:partition" class="selflink">#</a></p><div class="doc"><p>Compose two folds such that the combined fold accepts a stream of <code><a href="../base-4.16.4.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code>
 and routes the <code><a href="../base-4.16.4.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code> values to the first fold and <code><a href="../base-4.16.4.0/Data-Either.html#v:Right" title="Data.Either">Right</a></code> values to the
 second fold.</p><pre>partition = partitionBy id</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:23" id="g:23"><h2>Demultiplexing</h2></a><div class="doc"><p>Direct values in the input stream to different folds using an n-ary
 fold selector.</p></div><div class="top"><p class="src"><a id="v:demux" class="def">demux</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b) <a href="src/Streamly.Internal.Data.Fold.html#demux" class="link">Source</a> <a href="#v:demux" class="selflink">#</a></p><div class="doc"><p>Fold a stream of key value pairs using a map of specific folds for each
 key into a map from keys to the results of fold outputs of the corresponding
 values.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Data.Map
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong> let table = Data.Map.fromList [(&quot;SUM&quot;, Fold.sum), (&quot;PRODUCT&quot;, Fold.product)]
     input = Stream.fromList [(&quot;SUM&quot;,1),(&quot;PRODUCT&quot;,2),(&quot;SUM&quot;,3),(&quot;PRODUCT&quot;,4)]
  in Stream.fold (Fold.demux table) input
:}
fromList [(&quot;PRODUCT&quot;,8),(&quot;SUM&quot;,4)]
</pre><pre>demux = demuxWith id</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:demuxWith" class="def">demuxWith</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; (a -&gt; (k, a')) -&gt; <a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a' b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b) <a href="src/Streamly.Internal.Data.Fold.html#demuxWith" class="link">Source</a> <a href="#v:demuxWith" class="selflink">#</a></p><div class="doc"><p>Split the input stream based on a key field and fold each split using a
 specific fold collecting the results in a map from the keys to the results.
 Useful for cases like protocol handlers to handle different type of packets
 using different handlers.</p><pre>
                            |-------Fold m a b
-----stream m a-----Map-----|
                            |-------Fold m a b
                            |
                                      ...
</pre><p>Any input that does not map to a fold in the input Map is silently ignored.</p><pre>demuxWith f kv = fmap fst $ demuxDefaultWith f kv drain</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:demuxDefault" class="def">demuxDefault</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b, b) <a href="src/Streamly.Internal.Data.Fold.html#demuxDefault" class="link">Source</a> <a href="#v:demuxDefault" class="selflink">#</a></p><div class="doc"><pre>demuxDefault = demuxDefaultWith id</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:demuxDefaultWith" class="def">demuxDefaultWith</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; (a -&gt; (k, a')) -&gt; <a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a' b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a') c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b, c) <a href="src/Streamly.Internal.Data.Fold.html#demuxDefaultWith" class="link">Source</a> <a href="#v:demuxDefaultWith" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:demuxWith" title="Streamly.Internal.Data.Fold">demuxWith</a></code> but uses a default catchall fold to handle inputs which
 do not have a specific fold in the map to handle them.</p><p>If any fold in the map stops, inputs meant for that fold are sent to the
 catchall fold. If the catchall fold stops then inputs that do not match any
 fold are ignored.</p><p>Stops when all the folds, including the catchall fold, stop.</p><p><em>Pre-release</em></p></div></div><a href="#g:24" id="g:24"><h2>Classifying</h2></a><div class="doc"><p>In an input stream of key value pairs fold values for different keys
 in individual output buckets using the given fold.</p></div><div class="top"><p class="src"><a id="v:classify" class="def">classify</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b) <a href="src/Streamly.Internal.Data.Fold.html#classify" class="link">Source</a> <a href="#v:classify" class="selflink">#</a></p><div class="doc"><p>Given an input stream of key value pairs and a fold for values, fold all
 the values belonging to each key.  Useful for map/reduce, bucketizing the
 input in different bins or for generating histograms.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong> let input = Stream.fromList [(&quot;ONE&quot;,1),(&quot;ONE&quot;,1.1),(&quot;TWO&quot;,2), (&quot;TWO&quot;,2.2)]
  in Stream.fold (Fold.classify Fold.toList) input
:}
fromList [(&quot;ONE&quot;,[1.0,1.1]),(&quot;TWO&quot;,[2.0,2.2])]
</pre><p>Same as:</p><pre>classify fld = Fold.classifyWith fst (lmap snd fld)</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:classifyWith" class="def">classifyWith</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; (a -&gt; k) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="../containers-0.6.5.1/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b) <a href="src/Streamly.Internal.Data.Fold.html#classifyWith" class="link">Source</a> <a href="#v:classifyWith" class="selflink">#</a></p><div class="doc"><p>Split the input stream based on a key field and fold each split using the
 given fold. Useful for map/reduce, bucketizing the input in different bins
 or for generating histograms.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong> let input = Stream.fromList [(&quot;ONE&quot;,1),(&quot;ONE&quot;,1.1),(&quot;TWO&quot;,2), (&quot;TWO&quot;,2.2)]
  in Stream.fold (Fold.classifyWith fst (Fold.map snd Fold.toList)) input
:}
fromList [(&quot;ONE&quot;,[1.0,1.1]),(&quot;TWO&quot;,[2.0,2.2])]
</pre><p>If the classifier fold stops for a particular key any further inputs in that
 bucket are ignored.</p><p><em>Stops: never</em></p><p><em>Pre-release</em></p></div></div><a href="#g:25" id="g:25"><h2>Unzipping</h2></a><div class="top"><p class="src"><a id="v:unzip" class="def">unzip</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) (x, y) <a href="src/Streamly.Internal.Data.Fold.html#unzip" class="link">Source</a> <a href="#v:unzip" class="selflink">#</a></p><div class="doc"><p>Send the elements of tuples in a stream of tuples through two different
 folds.</p><pre>
                          |-------Fold m a x--------|
---------stream of (a,b)--|                         |----m (x,y)
                          |-------Fold m b y--------|

</pre><pre>unzip = Fold.unzipWith id</pre><p>This is the consumer side dual of the producer side <code><a href="Streamly-Internal-Data-Fold.html#v:zip" title="Streamly.Internal.Data.Fold">zip</a></code> operation.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:unzipWith" class="def">unzipWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; (b, c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y) <a href="src/Streamly.Internal.Data.Fold.html#unzipWith" class="link">Source</a> <a href="#v:unzipWith" class="selflink">#</a></p><div class="doc"><p>Split elements in the input stream into two parts using a pure splitter
 function, direct each part to a different fold and zip the results.</p><pre>unzipWith f fld1 fld2 = Fold.lmap f (Fold.unzip fld1 fld2)</pre><p>This fold terminates when both the input folds terminate.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:unzipWithM" class="def">unzipWithM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (b, c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y) <a href="src/Streamly.Internal.Data.Fold.html#unzipWithM" class="link">Source</a> <a href="#v:unzipWithM" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:unzipWith" title="Streamly.Internal.Data.Fold">unzipWith</a></code> but with a monadic splitter function.</p><pre>unzipWithM k f1 f2 = lmapM k (unzip f1 f2)</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:unzipWithFstM" class="def">unzipWithFstM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (b, c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y) <a href="src/Streamly.Internal.Data.Fold.html#unzipWithFstM" class="link">Source</a> <a href="#v:unzipWithFstM" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Streamly-Internal-Data-Fold.html#v:unzipWithM" title="Streamly.Internal.Data.Fold">unzipWithM</a></code> but terminates when the first fold terminates.</p></div></div><div class="top"><p class="src"><a id="v:unzipWithMinM" class="def">unzipWithMinM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m (b, c)) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (x, y) <a href="src/Streamly.Internal.Data.Fold.html#unzipWithMinM" class="link">Source</a> <a href="#v:unzipWithMinM" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Streamly-Internal-Data-Fold.html#v:unzipWithM" title="Streamly.Internal.Data.Fold">unzipWithM</a></code> but terminates when any fold terminates.</p></div></div><a href="#g:26" id="g:26"><h2>Zipping</h2></a><div class="top"><p class="src"><a id="v:zipWithM" class="def">zipWithM</a> :: (a -&gt; b -&gt; m c) -&gt; t m a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x <a href="src/Streamly.Internal.Data.Fold.html#zipWithM" class="link">Source</a> <a href="#v:zipWithM" class="selflink">#</a></p><div class="doc"><p>Zip a stream with the input of a fold using the supplied function.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:zip" class="def">zip</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; t m a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x <a href="src/Streamly.Internal.Data.Fold.html#zip" class="link">Source</a> <a href="#v:zip" class="selflink">#</a></p><div class="doc"><p>Zip a stream with the input of a fold.</p><p><em>Unimplemented</em></p></div></div><a href="#g:27" id="g:27"><h2>Splitting</h2></a><div class="top"><p class="src"><a id="v:many" class="def">many</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.Type.html#many" class="link">Source</a> <a href="#v:many" class="selflink">#</a></p><div class="doc"><p>Collect zero or more applications of a fold.  <code>many split collect</code> applies
 the <code>split</code> fold repeatedly on the input stream and accumulates zero or more
 fold results using <code>collect</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>two = Fold.take 2 Fold.toList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>twos = Fold.many two Fold.toList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold twos $ Stream.fromList [1..10]
</code></strong>[[1,2],[3,4],[5,6],[7,8],[9,10]]
</pre><p>Stops when <code>collect</code> stops.</p><p>See also: <code><a href="Streamly-Prelude.html#v:concatMap" title="Streamly.Prelude">concatMap</a></code>, <code><a href="Streamly-Prelude.html#v:foldMany" title="Streamly.Prelude">foldMany</a></code></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:chunksOf" class="def">chunksOf</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.Type.html#chunksOf" class="link">Source</a> <a href="#v:chunksOf" class="selflink">#</a></p><div class="doc"><p><code>chunksOf n split collect</code> repeatedly applies the <code>split</code> fold to chunks
 of <code>n</code> items in the input stream and supplies the result to the <code>collect</code>
 fold.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>twos = Fold.chunksOf 2 Fold.toList Fold.toList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold twos $ Stream.fromList [1..10]
</code></strong>[[1,2],[3,4],[5,6],[7,8],[9,10]]
</pre><pre>chunksOf n split = many (take n split)</pre><p>Stops when <code>collect</code> stops.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:chunksBetween" class="def">chunksBetween</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.html#chunksBetween" class="link">Source</a> <a href="#v:chunksBetween" class="selflink">#</a></p><div class="doc"><p>Group the input stream into groups of elements between <code>low</code> and <code>high</code>.
 Collection starts in chunks of <code>low</code> and then keeps doubling until we reach
 <code>high</code>. Each chunk is folded using the provided fold function.</p><p>This could be useful, for example, when we are folding a stream of unknown
 size to a stream of arrays and we want to minimize the number of
 allocations.</p><p>NOTE: this would be an application of &quot;many&quot; using a terminating fold.</p><p><em>Unimplemented</em></p></div></div><a href="#g:28" id="g:28"><h2>Nesting</h2></a><div class="top"><p class="src"><a id="v:concatSequence" class="def">concatSequence</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; t (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.html#concatSequence" class="link">Source</a> <a href="#v:concatSequence" class="selflink">#</a></p><div class="doc"><p><code>concatSequence f t</code> applies folds from stream <code>t</code> sequentially and
 collects the results using the fold <code>f</code>.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:concatMap" class="def">concatMap</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.Type.html#concatMap" class="link">Source</a> <a href="#v:concatMap" class="selflink">#</a></p><div class="doc"><p>Map a <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code> returning function on the result of a <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code> and run the
 returned fold. This operation can be used to express data dependencies
 between fold operations.</p><p>Let's say the first element in the stream is a count of the following
 elements that we have to add, then:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Maybe (fromJust)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>count = fmap fromJust Fold.head
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>total n = Fold.take n Fold.sum
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold (Fold.concatMap total count) $ Stream.fromList [10,9..1]
</code></strong>45
</pre><p><em>Time: O(n^2) where <code>n</code> is the number of compositions.</em></p><p>See also: <code><a href="Streamly-Internal-Data-Stream-IsStream.html#v:foldIterateM" title="Streamly.Internal.Data.Stream.IsStream">foldIterateM</a></code></p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:29" id="g:29"><h1>Running A Fold</h1></a><div class="doc"><p>Normally you would run a fold to completion by supplying it a stream,
 e.g. using <code><a href="Stream.html#v:fold" title="Stream">fold</a></code>. However, you could also run a fold partially
 by using <code><a href="Streamly-Internal-Data-Fold.html#v:duplicate" title="Streamly.Internal.Data.Fold">duplicate</a></code> on it and then running it with a stream.
 Alternatively, <code><a href="Streamly-Internal-Data-Fold.html#v:initialize" title="Streamly.Internal.Data.Fold">initialize</a></code>, <code><a href="Streamly-Internal-Data-Fold.html#v:snoc" title="Streamly.Internal.Data.Fold">snoc</a></code> and <code><a href="Streamly-Internal-Data-Fold.html#v:finish" title="Streamly.Internal.Data.Fold">finish</a></code> can be used to run a
 fold incrementally, however, that may not be the most efficient way to
 run a fold.</p></div><div class="top"><p class="src"><a id="v:initialize" class="def">initialize</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) <a href="src/Streamly.Internal.Data.Fold.Type.html#initialize" class="link">Source</a> <a href="#v:initialize" class="selflink">#</a></p><div class="doc"><p>Run the initialization effect of a fold. The returned fold would use the
 value returned by this effect as its initial value.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:snoc" class="def">snoc</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) <a href="src/Streamly.Internal.Data.Fold.Type.html#snoc" class="link">Source</a> <a href="#v:snoc" class="selflink">#</a></p><div class="doc"><p>Append a singleton value to the fold.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Data.Foldable as Foldable
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Foldable.foldlM Fold.snoc Fold.toList [1..3] &gt;&gt;= Fold.finish
</code></strong>[1,2,3]
</pre><p>Compare with <code><a href="Streamly-Internal-Data-Fold.html#v:duplicate" title="Streamly.Internal.Data.Fold">duplicate</a></code> which allows appending a stream to the fold.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:duplicate" class="def">duplicate</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) <a href="src/Streamly.Internal.Data.Fold.Type.html#duplicate" class="link">Source</a> <a href="#v:duplicate" class="selflink">#</a></p><div class="doc"><p><code><a href="Streamly-Internal-Data-Fold.html#v:duplicate" title="Streamly.Internal.Data.Fold">duplicate</a></code> provides the ability to run a fold in parts.  The duplicated
 fold consumes the input and returns the same fold as output instead of
 returning the final result, the returned fold can be run later to consume
 more input.</p><p>We can append a stream to a fold as follows:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>foldAppend :: Monad m =&gt; Fold m a b -&gt; SerialT m a -&gt; m (Fold m a b)
foldAppend f = Stream.fold (Fold.duplicate f)
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>do
 sum1 &lt;- foldAppend Fold.sum (Stream.enumerateFromTo 1 10)
 sum2 &lt;- foldAppend sum1 (Stream.enumerateFromTo 11 20)
 Stream.fold sum2 (Stream.enumerateFromTo 21 30)
:}
465
</pre><p><code><a href="Streamly-Internal-Data-Fold.html#v:duplicate" title="Streamly.Internal.Data.Fold">duplicate</a></code> essentially appends a stream to the fold without finishing the
 fold.  Compare with <code><a href="Streamly-Internal-Data-Fold.html#v:snoc" title="Streamly.Internal.Data.Fold">snoc</a></code> which appends a singleton value to the fold.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:finish" class="def">finish</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; m b <a href="src/Streamly.Internal.Data.Fold.Type.html#finish" class="link">Source</a> <a href="#v:finish" class="selflink">#</a></p><div class="doc"><p>Finish the fold to extract the current value of the fold.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Fold.finish Fold.toList
</code></strong>[]
</pre><p><em>Pre-release</em></p></div></div><a href="#g:30" id="g:30"><h1>Deprecated</h1></a><div class="top"><p class="src"><a id="v:sequence" class="def">sequence</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#sequence" class="link">Source</a> <a href="#v:sequence" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use &quot;rmapM id&quot; instead</p></div><p>Flatten the monadic output of a fold to pure output.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:mapM" class="def">mapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.html#mapM" class="link">Source</a> <a href="#v:mapM" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use rmapM instead</p></div><p>Map a monadic function on the output of a fold.</p><p><em>Since: 0.7.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>