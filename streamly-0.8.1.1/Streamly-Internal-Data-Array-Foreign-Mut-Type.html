<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Streamly.Internal.Data.Array.Foreign.Mut.Type</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">streamly-0.8.1.1: Dataflow programming and declarative concurrency</span><ul class="links" id="page-menu"><li><a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2020 Composewell Technologies</td></tr><tr><th>License</th><td>BSD3-3-Clause</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Internal.Data.Array.Foreign.Mut.Type</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Type</a></li><li><a href="#g:2">Constructing and Writing</a><ul><li><a href="#g:3">Construction</a><ul><li><a href="#g:4">Uninitialized Arrays</a></li><li><a href="#g:5">Initialized Arrays</a></li><li><a href="#g:6">From streams</a></li></ul></li><li><a href="#g:7">From containers</a></li></ul></li><li><a href="#g:8">Random writes</a></li><li><a href="#g:9">Growing and Shrinking</a><ul><li><a href="#g:10">Appending elements</a></li><li><a href="#g:11">Appending streams</a></li><li><a href="#g:12">Truncation</a></li></ul></li><li><a href="#g:13">Eliminating and Reading</a><ul><li><a href="#g:14">To streams</a></li><li><a href="#g:15">To containers</a></li><li><a href="#g:16">Random reads</a></li></ul></li><li><a href="#g:17">Memory Management</a></li><li><a href="#g:18">Size</a></li><li><a href="#g:19">In-place Mutation Algorithms</a></li><li><a href="#g:20">Casting</a></li><li><a href="#g:21">Folding</a></li><li><a href="#g:22">Arrays of arrays</a><ul><li><a href="#g:23">Construct from streams</a></li><li><a href="#g:24">Eliminate to streams</a></li><li><a href="#g:25">Construct from arrays</a></li><li><a href="#g:26">Appending arrays</a></li></ul></li><li><a href="#g:27">Utilities</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Mutable arrays and file system files are quite similar, they can grow and
 their content is mutable. Therefore, both have similar APIs as well. We
 strive to keep the API consistent for both. Ideally, you should be able to
 replace one with another with little changes to the code.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Array">Array</a> a = <a href="#v:Array">Array</a> {<ul class="subs"><li><a href="#v:arrContents">arrContents</a> :: !<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a></li><li><a href="#v:arrStart">arrStart</a> :: !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</li><li><a href="#v:aEnd">aEnd</a> :: !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</li><li><a href="#v:aBound">aBound</a> :: !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ArrayContents">ArrayContents</a></li><li class="src short"><a href="#v:arrayToFptrContents">arrayToFptrContents</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> -&gt; <a href="../base-4.16.4.0/GHC-ForeignPtr.html#t:ForeignPtrContents" title="GHC.ForeignPtr">ForeignPtrContents</a></li><li class="src short"><a href="#v:fptrToArrayContents">fptrToArrayContents</a> :: <a href="../base-4.16.4.0/GHC-ForeignPtr.html#t:ForeignPtrContents" title="GHC.ForeignPtr">ForeignPtrContents</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a></li><li class="src short"><a href="#v:unsafeWithArrayContents">unsafeWithArrayContents</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; (<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:nilArrayContents">nilArrayContents</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a></li><li class="src short"><a href="#v:touch">touch</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:newArray">newArray</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:newArrayAligned">newArrayAligned</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:newArrayAlignedUnmanaged">newArrayAlignedUnmanaged</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:newArrayWith">newArrayWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a>, <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:withNewArrayUnsafe">withNewArrayUnsafe</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; m ()) -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:ArrayUnsafe">ArrayUnsafe</a> a = <a href="#v:ArrayUnsafe">ArrayUnsafe</a> !<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a) !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</li><li class="src short"><a href="#v:writeNWithUnsafe">writeNWithUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:writeNWith">writeNWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:writeNUnsafe">writeNUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:writeN">writeN</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:writeNAligned">writeNAligned</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:writeNAlignedUnmanaged">writeNAlignedUnmanaged</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:writeWith">writeWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:write">write</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:fromForeignPtrUnsafe">fromForeignPtrUnsafe</a> :: <a href="../base-4.16.4.0/Foreign-ForeignPtr.html#t:ForeignPtr" title="Foreign.ForeignPtr">ForeignPtr</a> a -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a</li><li class="src short"><a href="#v:fromListN">fromListN</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [a] -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:fromList">fromList</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; [a] -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:fromStreamDN">fromStreamDN</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:fromStreamD">fromStreamD</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:putIndex">putIndex</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m ()</li><li class="src short"><a href="#v:putIndexUnsafe">putIndexUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m ()</li><li class="src short"><a href="#v:putIndices">putIndices</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, a) ()</li><li class="src short"><a href="#v:modifyIndexUnsafe">modifyIndexUnsafe</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b</li><li class="src short"><a href="#v:modifyIndex">modifyIndex</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b</li><li class="src short"><a href="#v:modifyIndices">modifyIndices</a> :: <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; (a -&gt; a) -&gt; m ()</li><li class="src short"><a href="#v:modify">modify</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; (a -&gt; a) -&gt; m ()</li><li class="src short"><a href="#v:swapIndices">swapIndices</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m ()</li><li class="src short"><a href="#v:snocWith">snocWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:snoc">snoc</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:snocLinear">snocLinear</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:snocMay">snocMay</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a))</li><li class="src short"><a href="#v:snocUnsafe">snocUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:appendNUnsafe">appendNUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:appendN">appendN</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:appendWith">appendWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:append">append</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:truncateWith">truncateWith</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:truncate">truncate</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:truncateExp">truncateExp</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:ReadUState">ReadUState</a> a = <a href="#v:ReadUState">ReadUState</a> !<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a) !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</li><li class="src short"><a href="#v:read">read</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) a</li><li class="src short"><a href="#v:readRev">readRev</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) a</li><li class="src short"><a href="#v:toStreamD">toStreamD</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a</li><li class="src short"><a href="#v:toStreamDRev">toStreamDRev</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a</li><li class="src short"><a href="#v:toStreamK">toStreamK</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> m a</li><li class="src short"><a href="#v:toStreamKRev">toStreamKRev</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> m a</li><li class="src short"><a href="#v:toList">toList</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m [a]</li><li class="src short"><a href="#v:producer">producer</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Producer-Type.html#t:Producer" title="Streamly.Internal.Data.Producer.Type">Producer</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) a</li><li class="src short"><a href="#v:getIndex">getIndex</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a</li><li class="src short"><a href="#v:getIndexUnsafe">getIndexUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a</li><li class="src short"><a href="#v:getIndices">getIndices</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) a</li><li class="src short"><a href="#v:getIndexRev">getIndexRev</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a</li><li class="src short"><a href="#v:blockSize">blockSize</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:arrayChunkBytes">arrayChunkBytes</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:allocBytesToElemCount">allocBytesToElemCount</a> :: <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:realloc">realloc</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:resize">resize</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:resizeExp">resizeExp</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:rightSize">rightSize</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:length">length</a> :: <span class="keyword">forall</span> a. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:byteLength">byteLength</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:byteCapacity">byteCapacity</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:bytesFree">bytesFree</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:reverse">reverse</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:permute">permute</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:partitionBy">partitionBy</a> :: (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a, <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:shuffleBy">shuffleBy</a> :: (a -&gt; a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:divideBy">divideBy</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:mergeBy">mergeBy</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:cast">cast</a> :: <span class="keyword">forall</span> a b. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> b =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> b)</li><li class="src short"><a href="#v:castUnsafe">castUnsafe</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> b</li><li class="src short"><a href="#v:asBytes">asBytes</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></li><li class="src short"><a href="#v:asPtrUnsafe">asPtrUnsafe</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; (<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> c) -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> c</li><li class="src short"><a href="#v:foldl-39-">foldl'</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m b</li><li class="src short"><a href="#v:foldr">foldr</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m b</li><li class="src short"><a href="#v:cmp">cmp</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:arraysOf">arraysOf</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:arrayStreamKFromStreamD">arrayStreamKFromStreamD</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a -&gt; m (<a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a))</li><li class="src short"><a href="#v:writeChunks">writeChunks</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> n (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a))</li><li class="src short"><a href="#v:flattenArrays">flattenArrays</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a</li><li class="src short"><a href="#v:flattenArraysRev">flattenArraysRev</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a</li><li class="src short"><a href="#v:fromArrayStreamK">fromArrayStreamK</a> :: (<a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:getSliceUnsafe">getSliceUnsafe</a> :: <span class="keyword">forall</span> a. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a</li><li class="src short"><a href="#v:getSlice">getSlice</a> :: <span class="keyword">forall</span> a. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a</li><li class="src short"><a href="#v:splitAt">splitAt</a> :: <span class="keyword">forall</span> a. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a, <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:breakOn">breakOn</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>, <a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>))</li><li class="src short"><a href="#v:spliceCopy">spliceCopy</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:spliceWith">spliceWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:splice">splice</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:spliceExp">spliceExp</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</li><li class="src short"><a href="#v:memcpy">memcpy</a> :: <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:memcmp">memcmp</a> :: <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:c_memchr">c_memchr</a> :: <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Foreign-C-Types.html#t:CSize" title="Foreign.C.Types">CSize</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Type</h1></a><div class="doc"><p>We can use a <code><a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a></code> constraint in the Array type and the constraint can
 be automatically provided to a function that pattern matches on the Array
 type. However, it has huge performance cost, so we do not use it.
 Investigate a GHC improvement possiblity.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Array" class="def">Array</a> a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#Array" class="link">Source</a> <a href="#t:Array" class="selflink">#</a></p><div class="doc"><p>An unboxed, pinned mutable array. An array is created with a given length
 and capacity. Length is the number of valid elements in the array.  Capacity
 is the maximum number of elements that the array can be expanded to without
 having to reallocate the memory.</p><p>The elements in the array can be mutated in-place without changing the
 reference (constructor). However, the length of the array cannot be mutated
 in-place.  A new array reference is generated when the length changes.  When
 the length is increased (upto the maximum reserved capacity of the array),
 the array is not reallocated and the new reference uses the same underlying
 memory as the old one.</p><p>Several routines in this module allow the programmer to control the capacity
 of the array. The programmer can control the trade-off between memory usage
 and performance impact due to reallocations when growing or shrinking the
 array.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Array" class="def">Array</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:arrContents" class="def">arrContents</a> :: !<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:arrStart" class="def">arrStart</a> :: !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</dfn><div class="doc"><p>first address</p></div></li><li><dfn class="src"><a id="v:aEnd" class="def">aEnd</a> :: !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</dfn><div class="doc"><p>first unused address</p></div></li><li><dfn class="src"><a id="v:aBound" class="def">aBound</a> :: !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</dfn><div class="doc"><p>first address beyond allocated memory</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Array">Instances</h4><details id="i:Array" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Array:NFData:1"></span> <a href="../deepseq-1.4.6.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)</span> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#line-2149" class="link">Source</a> <a href="#t:Array" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Array:NFData:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html">Streamly.Internal.Data.Array.Foreign.Mut.Type</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rnf">rnf</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; () <a href="#v:rnf" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ArrayContents" class="def">ArrayContents</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#ArrayContents" class="link">Source</a> <a href="#t:ArrayContents" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:arrayToFptrContents" class="def">arrayToFptrContents</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> -&gt; <a href="../base-4.16.4.0/GHC-ForeignPtr.html#t:ForeignPtrContents" title="GHC.ForeignPtr">ForeignPtrContents</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#arrayToFptrContents" class="link">Source</a> <a href="#v:arrayToFptrContents" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fptrToArrayContents" class="def">fptrToArrayContents</a> :: <a href="../base-4.16.4.0/GHC-ForeignPtr.html#t:ForeignPtrContents" title="GHC.ForeignPtr">ForeignPtrContents</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#fptrToArrayContents" class="link">Source</a> <a href="#v:fptrToArrayContents" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unsafeWithArrayContents" class="def">unsafeWithArrayContents</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; (<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; m b) -&gt; m b <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#unsafeWithArrayContents" class="link">Source</a> <a href="#v:unsafeWithArrayContents" class="selflink">#</a></p><div class="doc"><p>Similar to unsafeWithForeignPtr.</p></div></div><div class="top"><p class="src"><a id="v:nilArrayContents" class="def">nilArrayContents</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#nilArrayContents" class="link">Source</a> <a href="#v:nilArrayContents" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:touch" class="def">touch</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#touch" class="link">Source</a> <a href="#v:touch" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Constructing and Writing</h1></a><a href="#g:3" id="g:3"><h2>Construction</h2></a><a href="#g:4" id="g:4"><h3>Uninitialized Arrays</h3></a><div class="top"><p class="src"><a id="v:newArray" class="def">newArray</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#newArray" class="link">Source</a> <a href="#v:newArray" class="selflink">#</a></p><div class="doc"><p>Allocates an empty array that can hold <code>count</code> items.  The memory of the
 array is uninitialized and the allocation is aligned as per the <code><a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a></code>
 instance of the type.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:newArrayAligned" class="def">newArrayAligned</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#newArrayAligned" class="link">Source</a> <a href="#v:newArrayAligned" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:newArrayWith" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">newArrayWith</a></code> but using an allocator that aligns the memory to the
 alignment dictated by the <code><a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a></code> instance of the type.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:newArrayAlignedUnmanaged" class="def">newArrayAlignedUnmanaged</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#newArrayAlignedUnmanaged" class="link">Source</a> <a href="#v:newArrayAlignedUnmanaged" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:newArrayWith" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">newArrayWith</a></code> but using an allocator that allocates unmanaged pinned
 memory. The memory will never be freed by GHC.  This could be useful in
 allocate-once global data structures. Use carefully as incorrect use can
 lead to memory leak.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:newArrayWith" class="def">newArrayWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a>, <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#newArrayWith" class="link">Source</a> <a href="#v:newArrayWith" class="selflink">#</a></p><div class="doc"><p><code>newArrayWith allocator alignment count</code> allocates a new array of zero
 length and with a capacity to hold <code>count</code> elements, using <code>allocator
 size alignment</code> as the memory allocator function.</p><p>Alignment must be greater than or equal to machine word size and a power of
 2.</p><p><em>Pre-release</em></p></div></div><a href="#g:5" id="g:5"><h3>Initialized Arrays</h3></a><div class="top"><p class="src"><a id="v:withNewArrayUnsafe" class="def">withNewArrayUnsafe</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; m ()) -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#withNewArrayUnsafe" class="link">Source</a> <a href="#v:withNewArrayUnsafe" class="selflink">#</a></p><div class="doc"><p>Allocate an Array of the given size and run an IO action passing the array
 start pointer.</p><p><em>Internal</em></p></div></div><a href="#g:6" id="g:6"><h3>From streams</h3></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ArrayUnsafe" class="def">ArrayUnsafe</a> a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#ArrayUnsafe" class="link">Source</a> <a href="#t:ArrayUnsafe" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ArrayUnsafe" class="def">ArrayUnsafe</a> !<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a) !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:writeNWithUnsafe" class="def">writeNWithUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#writeNWithUnsafe" class="link">Source</a> <a href="#v:writeNWithUnsafe" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:writeNUnsafe" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">writeNUnsafe</a></code> but takes a new array allocator <code>alloc size</code> function
 as argument.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeNWithUnsafe alloc n = Array.appendNUnsafe (alloc n) n
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:writeNWith" class="def">writeNWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#writeNWith" class="link">Source</a> <a href="#v:writeNWith" class="selflink">#</a></p><div class="doc"><p><code>writeNWith alloc n</code> folds a maximum of <code>n</code> elements into an array
 allocated using the <code>alloc</code> function.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeNWith alloc n = Fold.take n (Array.writeNWithUnsafe alloc n)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeNWith alloc n = Array.appendN (alloc n) n
</code></strong></pre></div></div><div class="top"><p class="src"><a id="v:writeNUnsafe" class="def">writeNUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#writeNUnsafe" class="link">Source</a> <a href="#v:writeNUnsafe" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:writeN" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">writeN</a></code> but does not check the array bounds when writing. The fold
 driver must not call the step function more than <code>n</code> times otherwise it will
 corrupt the memory and crash. This function exists mainly because any
 conditional in the step function blocks fusion causing 10x performance
 slowdown.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeNUnsafe = Array.writeNWithUnsafe Array.newArray
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:writeN" class="def">writeN</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#writeN" class="link">Source</a> <a href="#v:writeN" class="selflink">#</a></p><div class="doc"><p><code>writeN n</code> folds a maximum of <code>n</code> elements from the input stream to an
 <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeN = Array.writeNWith Array.newArray
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeN n = Fold.take n (Array.writeNUnsafe n)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeN n = Array.appendN (Array.newArray n) n
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:writeNAligned" class="def">writeNAligned</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#writeNAligned" class="link">Source</a> <a href="#v:writeNAligned" class="selflink">#</a></p><div class="doc"><p><code>writeNAligned align n</code> folds a maximum of <code>n</code> elements from the input
 stream to an <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a></code> aligned to the given size.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeNAligned align = Array.writeNWith (Array.newArrayAligned align)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeNAligned align n = Array.appendN (Array.newArrayAligned align n) n
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:writeNAlignedUnmanaged" class="def">writeNAlignedUnmanaged</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#writeNAlignedUnmanaged" class="link">Source</a> <a href="#v:writeNAlignedUnmanaged" class="selflink">#</a></p><div class="doc"><p><code>writeNAlignedUnmanaged align n</code> folds a maximum of <code>n</code> elements from the
 input stream to an <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a></code> whose starting address is aligned to <code>align</code>
 bytes and is allocated using unmanaged memory (never freed).  This could be
 useful to allocate memory that we need to allocate only once in the lifetime
 of the program.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>f = Array.newArrayAlignedUnmanaged
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeNAlignedUnmanaged a = Array.writeNWith (f a)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeNAlignedUnmanaged a n = Array.appendN (f a n) n
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:writeWith" class="def">writeWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#writeWith" class="link">Source</a> <a href="#v:writeWith" class="selflink">#</a></p><div class="doc"><p><code>writeWith minCount</code> folds the whole input to a single array. The array
 starts at a size big enough to hold minCount elements, the size is doubled
 every time the array needs to be grown.</p><p><em>Caution! Do not use this on infinite streams.</em></p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>f n = Array.appendWith (* 2) (Array.newArray n)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeWith n = Fold.rmapM Array.rightSize (f n)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeWith n = Fold.rmapM Array.fromArrayStreamK (Array.writeChunks n)
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:write" class="def">write</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#write" class="link">Source</a> <a href="#v:write" class="selflink">#</a></p><div class="doc"><p>Fold the whole input to a single array.</p><p>Same as <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:writeWith" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">writeWith</a></code> using an initial array size of <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:arrayChunkBytes" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">arrayChunkBytes</a></code> bytes
 rounded up to the element size.</p><p><em>Caution! Do not use this on infinite streams.</em></p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:7" id="g:7"><h2>From containers</h2></a><div class="top"><p class="src"><a id="v:fromForeignPtrUnsafe" class="def">fromForeignPtrUnsafe</a> :: <a href="../base-4.16.4.0/Foreign-ForeignPtr.html#t:ForeignPtr" title="Foreign.ForeignPtr">ForeignPtr</a> a -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#fromForeignPtrUnsafe" class="link">Source</a> <a href="#v:fromForeignPtrUnsafe" class="selflink">#</a></p><div class="doc"><p><code>fromForeignPtrUnsafe foreignPtr end bound</code> creates an <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a></code> that starts
 at the memory pointed by the <code>foreignPtr</code>, <code>end</code> is the first unused
 address, and <code>bound</code> is the first address beyond the allocated memory.</p><p>Unsafe: Make sure that foreignPtr &lt;= end &lt;= bound and (end - start) is an
 integral multiple of the element size. Only PlainPtr type ForeignPtr is
 supported.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:fromListN" class="def">fromListN</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [a] -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#fromListN" class="link">Source</a> <a href="#v:fromListN" class="selflink">#</a></p><div class="doc"><p>Create an <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a></code> from the first N elements of a list. The array is
 allocated to size N, if the list terminates before N elements then the
 array may hold less than N elements.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:fromList" class="def">fromList</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; [a] -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#fromList" class="link">Source</a> <a href="#v:fromList" class="selflink">#</a></p><div class="doc"><p>Create an <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a></code> from a list. The list must be of finite size.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:fromStreamDN" class="def">fromStreamDN</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#fromStreamDN" class="link">Source</a> <a href="#v:fromStreamDN" class="selflink">#</a></p><div class="doc"><p>Use the <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:writeN" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">writeN</a></code> fold instead.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fromStreamDN n = StreamD.fold (Array.writeN n)
</code></strong></pre></div></div><div class="top"><p class="src"><a id="v:fromStreamD" class="def">fromStreamD</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#fromStreamD" class="link">Source</a> <a href="#v:fromStreamD" class="selflink">#</a></p><div class="doc"><p>We could take the approach of doubling the memory allocation on each
 overflow. This would result in more or less the same amount of copying as in
 the chunking approach. However, if we have to shrink in the end then it may
 result in an extra copy of the entire data.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fromStreamD = StreamD.fold Array.write
</code></strong></pre></div></div><a href="#g:8" id="g:8"><h1>Random writes</h1></a><div class="top"><p class="src"><a id="v:putIndex" class="def">putIndex</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m () <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#putIndex" class="link">Source</a> <a href="#v:putIndex" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Write the given element at the given index in the array.
 Performs in-place mutation of the array.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>putIndex arr ix val = Array.modifyIndex arr ix (const (val, ()))
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>f = Array.putIndices
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>putIndex arr ix val = Stream.fold (f arr) (Stream.fromPure (ix, val))
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:putIndexUnsafe" class="def">putIndexUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; m () <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#putIndexUnsafe" class="link">Source</a> <a href="#v:putIndexUnsafe" class="selflink">#</a></p><div class="doc"><p>Write the given element to the given index of the array. Does not check if
 the index is out of bounds of the array.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:putIndices" class="def">putIndices</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, a) () <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#putIndices" class="link">Source</a> <a href="#v:putIndices" class="selflink">#</a></p><div class="doc"><p>Write an input stream of (index, value) pairs to an array. Throws an
 error if any index is out of bounds.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:modifyIndexUnsafe" class="def">modifyIndexUnsafe</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#modifyIndexUnsafe" class="link">Source</a> <a href="#v:modifyIndexUnsafe" class="selflink">#</a></p><div class="doc"><p>Modify a given index of an array using a modifier function.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:modifyIndex" class="def">modifyIndex</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (a -&gt; (a, b)) -&gt; m b <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#modifyIndex" class="link">Source</a> <a href="#v:modifyIndex" class="selflink">#</a></p><div class="doc"><p>Modify a given index of an array using a modifier function.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:modifyIndices" class="def">modifyIndices</a> :: <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; (a -&gt; a) -&gt; m () <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#modifyIndices" class="link">Source</a> <a href="#v:modifyIndices" class="selflink">#</a></p><div class="doc"><p>Modify the array indices generated by the supplied unfold.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:modify" class="def">modify</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; (a -&gt; a) -&gt; m () <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#modify" class="link">Source</a> <a href="#v:modify" class="selflink">#</a></p><div class="doc"><p>Modify each element of an array using the supplied modifier function.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:swapIndices" class="def">swapIndices</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m () <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#swapIndices" class="link">Source</a> <a href="#v:swapIndices" class="selflink">#</a></p><div class="doc"><p>Swap the elements at two indices.</p><p><em>Pre-release</em></p></div></div><a href="#g:9" id="g:9"><h1>Growing and Shrinking</h1></a><a href="#g:10" id="g:10"><h2>Appending elements</h2></a><div class="top"><p class="src"><a id="v:snocWith" class="def">snocWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#snocWith" class="link">Source</a> <a href="#v:snocWith" class="selflink">#</a></p><div class="doc"><p><code>snocWith sizer arr elem</code> mutates <code>arr</code> to append <code>elem</code>. The length of
 the array increases by 1.</p><p>If there is no reserved space available in <code>arr</code> it is reallocated to a size
 in bytes determined by the <code>sizer oldSizeBytes</code> function, where
 <code>oldSizeBytes</code> is the original size of the array in bytes.</p><p>If the new array size is more than <code>largeObjectThreshold</code> we automatically
 round it up to <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:blockSize" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">blockSize</a></code>.</p><p>Note that the returned array may be a mutated version of the original array.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:snoc" class="def">snoc</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#snoc" class="link">Source</a> <a href="#v:snoc" class="selflink">#</a></p><div class="doc"><p>The array is mutated to append an additional element to it. If there is no
 reserved space available in the array then it is reallocated to double the
 original size.</p><p>This is useful to reduce allocations when appending unknown number of
 elements.</p><p>Note that the returned array may be a mutated version of the original array.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>snoc = Array.snocWith (* 2)
</code></strong></pre><p>Performs O(n * log n) copies to grow, but is liberal with memory allocation.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:snocLinear" class="def">snocLinear</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#snocLinear" class="link">Source</a> <a href="#v:snocLinear" class="selflink">#</a></p><div class="doc"><p>The array is mutated to append an additional element to it. If there
 is no reserved space available in the array then it is reallocated to grow
 it by <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:arrayChunkBytes" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">arrayChunkBytes</a></code> rounded up to <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:blockSize" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">blockSize</a></code> when the size becomes more
 than <code>largeObjectThreshold</code>.</p><p>Note that the returned array may be a mutated version of the original array.</p><p>Performs O(n^2) copies to grow but is thrifty on memory.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:snocMay" class="def">snocMay</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#snocMay" class="link">Source</a> <a href="#v:snocMay" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:snoc" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">snoc</a></code> but does not reallocate when pre-allocated array capacity
 becomes full.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:snocUnsafe" class="def">snocUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#snocUnsafe" class="link">Source</a> <a href="#v:snocUnsafe" class="selflink">#</a></p><div class="doc"><p>Really really unsafe, appends the element into the first array, may
 cause silent data corruption or if you are lucky a segfault if the first
 array does not have enough space to append the element.</p><p><em>Internal</em></p></div></div><a href="#g:11" id="g:11"><h2>Appending streams</h2></a><div class="top"><p class="src"><a id="v:appendNUnsafe" class="def">appendNUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#appendNUnsafe" class="link">Source</a> <a href="#v:appendNUnsafe" class="selflink">#</a></p><div class="doc"><p>Append up to <code>n</code> input items to the supplied array.</p><p>Unsafe: Do not drive the fold beyond <code>n</code> elements, it will lead to memory
 corruption or segfault.</p><p>Any free space left in the array after appending <code>n</code> elements is lost.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:appendN" class="def">appendN</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#appendN" class="link">Source</a> <a href="#v:appendN" class="selflink">#</a></p><div class="doc"><p>Append <code>n</code> elements to an existing array. Any free space left in the array
 after appending <code>n</code> elements is lost.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>appendN initial n = Fold.take n (Array.appendNUnsafe initial n)
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:appendWith" class="def">appendWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#appendWith" class="link">Source</a> <a href="#v:appendWith" class="selflink">#</a></p><div class="doc"><p><code>appendWith realloc action</code> mutates the array generated by <code>action</code> to
 append the input stream. If there is no reserved space available in the
 array it is reallocated to a size in bytes  determined by <code>realloc oldSize</code>,
 where <code>oldSize</code> is the current size of the array in bytes.</p><p>Note that the returned array may be a mutated version of original array.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>appendWith sizer = Fold.foldlM' (Array.snocWith sizer)
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:append" class="def">append</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#append" class="link">Source</a> <a href="#v:append" class="selflink">#</a></p><div class="doc"><p><code>append action</code> mutates the array generated by <code>action</code> to append the
 input stream. If there is no reserved space available in the array it is
 reallocated to double the size.</p><p>Note that the returned array may be a mutated version of original array.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>append = Array.appendWith (* 2)
</code></strong></pre><p><em>Pre-release</em></p></div></div><a href="#g:12" id="g:12"><h2>Truncation</h2></a><div class="top"><p class="src"><a id="v:truncateWith" class="def">truncateWith</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#truncateWith" class="link">Source</a> <a href="#v:truncateWith" class="selflink">#</a></p><div class="doc"><p>Drop the last n elements of the array to reduce the length by n. The
 capacity is reallocated using the user supplied function.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:truncate" class="def">truncate</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#truncate" class="link">Source</a> <a href="#v:truncate" class="selflink">#</a></p><div class="doc"><p>Drop the last n elements of the array to reduce the length by n.</p><p>The capacity is rounded to 1K or 4K if the length is more than the GHC large
 block threshold.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:truncateExp" class="def">truncateExp</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#truncateExp" class="link">Source</a> <a href="#v:truncateExp" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:truncate" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">truncate</a></code> but the capacity is rounded to the closest power of 2.</p><p><em>Unimplemented</em></p></div></div><a href="#g:13" id="g:13"><h1>Eliminating and Reading</h1></a><a href="#g:14" id="g:14"><h2>To streams</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ReadUState" class="def">ReadUState</a> a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#ReadUState" class="link">Source</a> <a href="#t:ReadUState" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ReadUState" class="def">ReadUState</a> !<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:ArrayContents" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">ArrayContents</a> !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a) !(<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:read" class="def">read</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#read" class="link">Source</a> <a href="#v:read" class="selflink">#</a></p><div class="doc"><p>Unfold an array into a stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:readRev" class="def">readRev</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#readRev" class="link">Source</a> <a href="#v:readRev" class="selflink">#</a></p><div class="doc"><p>Unfold an array into a stream in reverse order.</p><p><em>Pre-release</em></p></div></div><a href="#g:15" id="g:15"><h2>To containers</h2></a><div class="top"><p class="src"><a id="v:toStreamD" class="def">toStreamD</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#toStreamD" class="link">Source</a> <a href="#v:toStreamD" class="selflink">#</a></p><div class="doc"><p>Use the <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:read" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">read</a></code> unfold instead.</p><pre>toStreamD = D.unfold read</pre><p>We can try this if the unfold has any performance issues.</p></div></div><div class="top"><p class="src"><a id="v:toStreamDRev" class="def">toStreamDRev</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#toStreamDRev" class="link">Source</a> <a href="#v:toStreamDRev" class="selflink">#</a></p><div class="doc"><p>Use the <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:readRev" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">readRev</a></code> unfold instead.</p><pre>toStreamDRev = D.unfold readRev</pre><p>We can try this if the unfold has any perf issues.</p></div></div><div class="top"><p class="src"><a id="v:toStreamK" class="def">toStreamK</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#toStreamK" class="link">Source</a> <a href="#v:toStreamK" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:toStreamKRev" class="def">toStreamKRev</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#toStreamKRev" class="link">Source</a> <a href="#v:toStreamKRev" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:toList" class="def">toList</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m [a] <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#toList" class="link">Source</a> <a href="#v:toList" class="selflink">#</a></p><div class="doc"><p>Convert an <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a></code> into a list.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:producer" class="def">producer</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Producer-Type.html#t:Producer" title="Streamly.Internal.Data.Producer.Type">Producer</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#producer" class="link">Source</a> <a href="#v:producer" class="selflink">#</a></p><div class="doc"><p>Resumable unfold of an array.</p></div></div><a href="#g:16" id="g:16"><h2>Random reads</h2></a><div class="top"><p class="src"><a id="v:getIndex" class="def">getIndex</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#getIndex" class="link">Source</a> <a href="#v:getIndex" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Lookup the element at the given index. Index starts from 0.</p></div></div><div class="top"><p class="src"><a id="v:getIndexUnsafe" class="def">getIndexUnsafe</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#getIndexUnsafe" class="link">Source</a> <a href="#v:getIndexUnsafe" class="selflink">#</a></p><div class="doc"><p>Return the element at the specified index without checking the bounds.</p><p>Unsafe because it does not check the bounds of the array.</p></div></div><div class="top"><p class="src"><a id="v:getIndices" class="def">getIndices</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#getIndices" class="link">Source</a> <a href="#v:getIndices" class="selflink">#</a></p><div class="doc"><p>Given an unfold that generates array indices, read the elements on those
 indices from the supplied Array. An error is thrown if an index is out of
 bounds.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:getIndexRev" class="def">getIndexRev</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#getIndexRev" class="link">Source</a> <a href="#v:getIndexRev" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Lookup the element at the given index from the end of the array.
 Index starts from 0.</p><p>Slightly faster than computing the forward index and using getIndex.</p></div></div><a href="#g:17" id="g:17"><h1>Memory Management</h1></a><div class="top"><p class="src"><a id="v:blockSize" class="def">blockSize</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#blockSize" class="link">Source</a> <a href="#v:blockSize" class="selflink">#</a></p><div class="doc"><p>The page or block size used by the GHC allocator. Allocator allocates at
 least a block and then allocates smaller allocations from within a block.</p></div></div><div class="top"><p class="src"><a id="v:arrayChunkBytes" class="def">arrayChunkBytes</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#arrayChunkBytes" class="link">Source</a> <a href="#v:arrayChunkBytes" class="selflink">#</a></p><div class="doc"><p>The default chunk size by which the array creation routines increase the
 size of the array when the array is grown linearly.</p></div></div><div class="top"><p class="src"><a id="v:allocBytesToElemCount" class="def">allocBytesToElemCount</a> :: <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#allocBytesToElemCount" class="link">Source</a> <a href="#v:allocBytesToElemCount" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a></code> type (unused first arg) and real allocation size
 (including overhead), return how many elements of that type will completely
 fit in it, returns at least 1.</p></div></div><div class="top"><p class="src"><a id="v:realloc" class="def">realloc</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#realloc" class="link">Source</a> <a href="#v:realloc" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:resize" class="def">resize</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#resize" class="link">Source</a> <a href="#v:resize" class="selflink">#</a></p><div class="doc"><p>Change the reserved memory of the array so that it is enough to hold the
 specified number of elements.  Nothing is done if the specified capacity is
 less than the length of the array.</p><p>If the capacity is more than <code>largeObjectThreshold</code> then it is rounded up to
 the block size (4K).</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:resizeExp" class="def">resizeExp</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#resizeExp" class="link">Source</a> <a href="#v:resizeExp" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:resize" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">resize</a></code> but if the capacity is more than <code>largeObjectThreshold</code> then
 it is rounded up to the closest power of 2.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:rightSize" class="def">rightSize</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#rightSize" class="link">Source</a> <a href="#v:rightSize" class="selflink">#</a></p><div class="doc"><p>Resize the allocated memory to drop any reserved free space at the end of
 the array and reallocate it to reduce wastage.</p><p>Up to 25% wastage is allowed to avoid reallocations.  If the capacity is
 more than <code>largeObjectThreshold</code> then free space up to the <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:blockSize" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">blockSize</a></code> is
 retained.</p><p><em>Pre-release</em></p></div></div><a href="#g:18" id="g:18"><h1>Size</h1></a><div class="top"><p class="src"><a id="v:length" class="def">length</a> :: <span class="keyword">forall</span> a. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#length" class="link">Source</a> <a href="#v:length" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Get the length of the array i.e. the number of elements in the
 array.</p><p>Note that <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:byteLength" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">byteLength</a></code> is less expensive than this operation, as <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:length" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">length</a></code>
 involves a costly division operation.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:byteLength" class="def">byteLength</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#byteLength" class="link">Source</a> <a href="#v:byteLength" class="selflink">#</a></p><div class="doc"><p><em>O(1)</em> Get the byte length of the array.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:byteCapacity" class="def">byteCapacity</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#byteCapacity" class="link">Source</a> <a href="#v:byteCapacity" class="selflink">#</a></p><div class="doc"><p>Get the total capacity of an array. An array may have space reserved
 beyond the current used length of the array.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:bytesFree" class="def">bytesFree</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#bytesFree" class="link">Source</a> <a href="#v:bytesFree" class="selflink">#</a></p><div class="doc"><p>The remaining capacity in the array for appending more elements without
 reallocation.</p><p><em>Pre-release</em></p></div></div><a href="#g:19" id="g:19"><h1>In-place Mutation Algorithms</h1></a><div class="top"><p class="src"><a id="v:reverse" class="def">reverse</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#reverse" class="link">Source</a> <a href="#v:reverse" class="selflink">#</a></p><div class="doc"><p>You may not need to reverse an array because you can consume it in reverse
 using <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:readRev" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">readRev</a></code>. To reverse large arrays you can read in reverse and write
 to another array. However, in-place reverse can be useful to take adavantage
 of cache locality and when you do not want to allocate additional memory.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:permute" class="def">permute</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#permute" class="link">Source</a> <a href="#v:permute" class="selflink">#</a></p><div class="doc"><p>Generate the next permutation of the sequence, returns False if this is
 the last permutation.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:partitionBy" class="def">partitionBy</a> :: (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a, <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#partitionBy" class="link">Source</a> <a href="#v:partitionBy" class="selflink">#</a></p><div class="doc"><p>Partition an array into two halves using a partitioning predicate. The
 first half retains values where the predicate is <code><a href="../base-4.16.4.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code> and the second half
 retains values where the predicate is <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code>.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:shuffleBy" class="def">shuffleBy</a> :: (a -&gt; a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#shuffleBy" class="link">Source</a> <a href="#v:shuffleBy" class="selflink">#</a></p><div class="doc"><p>Shuffle corresponding elements from two arrays using a shuffle function.
 If the shuffle function returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code> then do nothing otherwise swap the
 elements. This can be used in a bottom up fold to shuffle or reorder the
 elements.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:divideBy" class="def">divideBy</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#divideBy" class="link">Source</a> <a href="#v:divideBy" class="selflink">#</a></p><div class="doc"><p><code>divideBy level partition array</code>  performs a top down hierarchical
 recursive partitioning fold of items in the container using the given
 function as the partition function.  Level indicates the level in the tree
 where the fold would stop.</p><p>This performs a quick sort if the partition function is
 'partitionBy (&lt; pivot)'.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:mergeBy" class="def">mergeBy</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#mergeBy" class="link">Source</a> <a href="#v:mergeBy" class="selflink">#</a></p><div class="doc"><p><code>mergeBy level merge array</code> performs a pairwise bottom up fold recursively
 merging the pairs using the supplied merge function. Level indicates the
 level in the tree where the fold would stop.</p><p>This performs a random shuffle if the shuffle function is random.  If we
 stop at level 0 and repeatedly apply the function then we can do a bubble
 sort.</p><p><em>Unimplemented</em></p></div></div><a href="#g:20" id="g:20"><h1>Casting</h1></a><div class="top"><p class="src"><a id="v:cast" class="def">cast</a> :: <span class="keyword">forall</span> a b. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> b =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> b) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#cast" class="link">Source</a> <a href="#v:cast" class="selflink">#</a></p><div class="doc"><p>Cast an array having elements of type <code>a</code> into an array having elements of
 type <code>b</code>. The length of the array should be a multiple of the size of the
 target element otherwise <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> is returned.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:castUnsafe" class="def">castUnsafe</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> b <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#castUnsafe" class="link">Source</a> <a href="#v:castUnsafe" class="selflink">#</a></p><div class="doc"><p>Cast an array having elements of type <code>a</code> into an array having elements of
 type <code>b</code>. The array size must be a multiple of the size of type <code>b</code>
 otherwise accessing the last element of the array may result into a crash or
 a random value.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:asBytes" class="def">asBytes</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#asBytes" class="link">Source</a> <a href="#v:asBytes" class="selflink">#</a></p><div class="doc"><p>Cast an <code>Array a</code> into an <code>Array Word8</code>.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:asPtrUnsafe" class="def">asPtrUnsafe</a> :: <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; (<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> c) -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> c <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#asPtrUnsafe" class="link">Source</a> <a href="#v:asPtrUnsafe" class="selflink">#</a></p><div class="doc"><p>Use an <code>Array a</code> as <code>Ptr b</code>.</p><p><em>Unsafe</em></p><p><em>Pre-release</em></p></div></div><a href="#g:21" id="g:21"><h1>Folding</h1></a><div class="top"><p class="src"><a id="v:foldl-39-" class="def">foldl'</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m b <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#foldl%27" class="link">Source</a> <a href="#v:foldl-39-" class="selflink">#</a></p><div class="doc"><p>Strict left fold of an array.</p></div></div><div class="top"><p class="src"><a id="v:foldr" class="def">foldr</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m b <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#foldr" class="link">Source</a> <a href="#v:foldr" class="selflink">#</a></p><div class="doc"><p>Right fold of an array.</p></div></div><div class="top"><p class="src"><a id="v:cmp" class="def">cmp</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#cmp" class="link">Source</a> <a href="#v:cmp" class="selflink">#</a></p><div class="doc"><p>Compare if two arrays are equal.</p><p><em>Pre-release</em></p></div></div><a href="#g:22" id="g:22"><h1>Arrays of arrays</h1></a><div class="doc"><p>Operations dealing with multiple arrays, streams of arrays or
 multidimensional array representations.</p></div><a href="#g:23" id="g:23"><h2>Construct from streams</h2></a><div class="top"><p class="src"><a id="v:arraysOf" class="def">arraysOf</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#arraysOf" class="link">Source</a> <a href="#v:arraysOf" class="selflink">#</a></p><div class="doc"><p><code>arraysOf n stream</code> groups the input stream into a stream of
 arrays of size n.</p><pre>arraysOf n = StreamD.foldMany (Array.writeN n)</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:arrayStreamKFromStreamD" class="def">arrayStreamKFromStreamD</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a -&gt; m (<a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#arrayStreamKFromStreamD" class="link">Source</a> <a href="#v:arrayStreamKFromStreamD" class="selflink">#</a></p><div class="doc"><p>Buffer the stream into arrays in memory.</p></div></div><div class="top"><p class="src"><a id="v:writeChunks" class="def">writeChunks</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a (<a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> n (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a)) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#writeChunks" class="link">Source</a> <a href="#v:writeChunks" class="selflink">#</a></p><div class="doc"><p>Buffer a stream into a stream of arrays.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeChunks n = Fold.many (Array.writeN n) Fold.toStreamK
</code></strong></pre><p>Breaking an array into an array stream  can be useful to consume a large
 array sequentially such that memory of the array is released incrementatlly.</p><p>See also: <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:arrayStreamKFromStreamD" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">arrayStreamKFromStreamD</a></code>.</p><p><em>Unimplemented</em></p></div></div><a href="#g:24" id="g:24"><h2>Eliminate to streams</h2></a><div class="top"><p class="src"><a id="v:flattenArrays" class="def">flattenArrays</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#flattenArrays" class="link">Source</a> <a href="#v:flattenArrays" class="selflink">#</a></p><div class="doc"><p>Use the &quot;read&quot; unfold instead.</p><pre>flattenArrays = unfoldMany read</pre><p>We can try this if there are any fusion issues in the unfold.</p></div></div><div class="top"><p class="src"><a id="v:flattenArraysRev" class="def">flattenArraysRev</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; <a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a> m a <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#flattenArraysRev" class="link">Source</a> <a href="#v:flattenArraysRev" class="selflink">#</a></p><div class="doc"><p>Use the &quot;readRev&quot; unfold instead.</p><pre>flattenArrays = unfoldMany readRev</pre><p>We can try this if there are any fusion issues in the unfold.</p></div></div><div class="top"><p class="src"><a id="v:fromArrayStreamK" class="def">fromArrayStreamK</a> :: (<a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-StreamK-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamK.Type">Stream</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#fromArrayStreamK" class="link">Source</a> <a href="#v:fromArrayStreamK" class="selflink">#</a></p><div class="doc"><p>Convert an array stream to an array. Note that this requires peak memory
 that is double the size of the array stream.</p></div></div><a href="#g:25" id="g:25"><h2>Construct from arrays</h2></a><div class="top"><p class="src"><a id="v:getSliceUnsafe" class="def">getSliceUnsafe</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#getSliceUnsafe" class="link">Source</a> <a href="#v:getSliceUnsafe" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> a. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc"><p>from index</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc"><p>length of the slice</p></td></tr><tr><td class="src">-&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p><em>O(1)</em> Slice an array in constant time.</p><p>Unsafe: The bounds of the slice are not checked.</p><p><em>Unsafe</em></p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:getSlice" class="def">getSlice</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#getSlice" class="link">Source</a> <a href="#v:getSlice" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> a. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc"><p>from index</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc"><p>length of the slice</p></td></tr><tr><td class="src">-&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p><em>O(1)</em> Slice an array in constant time. Throws an error if the slice
 extends out of the array bounds.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:splitAt" class="def">splitAt</a> :: <span class="keyword">forall</span> a. <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a, <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#splitAt" class="link">Source</a> <a href="#v:splitAt" class="selflink">#</a></p><div class="doc"><p>Create two slices of an array without copying the original array. The
 specified index <code>i</code> is the first index of the second slice.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:breakOn" class="def">breakOn</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>, <a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#breakOn" class="link">Source</a> <a href="#v:breakOn" class="selflink">#</a></p><div class="doc"><p>Drops the separator byte</p></div></div><a href="#g:26" id="g:26"><h2>Appending arrays</h2></a><div class="top"><p class="src"><a id="v:spliceCopy" class="def">spliceCopy</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#spliceCopy" class="link">Source</a> <a href="#v:spliceCopy" class="selflink">#</a></p><div class="doc"><p>Copy two arrays into a newly allocated array.</p></div></div><div class="top"><p class="src"><a id="v:spliceWith" class="def">spliceWith</a> :: <span class="keyword">forall</span> m a. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#spliceWith" class="link">Source</a> <a href="#v:spliceWith" class="selflink">#</a></p><div class="doc"><p><code>spliceWith sizer dst src</code> mutates <code>dst</code> to append <code>src</code>. If there is no
 reserved space available in <code>dst</code> it is reallocated to a size determined by
 the <code>sizer dstBytesn srcBytes</code> function, where <code>dstBytes</code> is the size of the
 first array and <code>srcBytes</code> is the size of the second array, in bytes.</p><p>Note that the returned array may be a mutated version of first array.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:splice" class="def">splice</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#splice" class="link">Source</a> <a href="#v:splice" class="selflink">#</a></p><div class="doc"><p>The first array is mutated to append the second array. If there is no
 reserved space available in the first array a new allocation of exact
 required size is done.</p><p>Note that the returned array may be a mutated version of first array.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splice = Array.spliceWith (+)
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:spliceExp" class="def">spliceExp</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">Array</a> a) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#spliceExp" class="link">Source</a> <a href="#v:spliceExp" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Array-Foreign-Mut-Type.html#v:append" title="Streamly.Internal.Data.Array.Foreign.Mut.Type">append</a></code> but the growth of the array is exponential. Whenever a new
 allocation is required the previous array size is at least doubled.</p><p>This is useful to reduce allocations when folding many arrays together.</p><p>Note that the returned array may be a mutated version of first array.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>spliceExp = Array.spliceWith (\l1 l2 -&gt; max (l1 * 2) (l1 + l2))
</code></strong></pre><p><em>Pre-release</em></p></div></div><a href="#g:27" id="g:27"><h1>Utilities</h1></a><div class="top"><p class="src"><a id="v:memcpy" class="def">memcpy</a> :: <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#memcpy" class="link">Source</a> <a href="#v:memcpy" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:memcmp" class="def">memcmp</a> :: <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#memcmp" class="link">Source</a> <a href="#v:memcmp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:c_memchr" class="def">c_memchr</a> :: <a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="../base-4.16.4.0/Foreign-C-Types.html#t:CSize" title="Foreign.C.Types">CSize</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.16.4.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Streamly.Internal.Data.Array.Foreign.Mut.Type.html#c_memchr" class="link">Source</a> <a href="#v:c_memchr" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>