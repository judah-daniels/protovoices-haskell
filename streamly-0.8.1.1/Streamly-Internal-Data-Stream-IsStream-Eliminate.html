<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Streamly.Internal.Data.Stream.IsStream.Eliminate</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">streamly-0.8.1.1: Dataflow programming and declarative concurrency</span><ul class="links" id="page-menu"><li><a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2017 Composewell Technologies</td></tr><tr><th>License</th><td>BSD-3-Clause</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Internal.Data.Stream.IsStream.Eliminate</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Running Examples</a></li><li><a href="#g:2">Running a <code>Fold</code></a></li><li><a href="#g:3">Running a <code>Parser</code></a></li><li><a href="#g:4">Stream Deconstruction</a></li><li><a href="#g:5">Right Folds</a></li><li><a href="#g:6">Left Folds</a></li><li><a href="#g:7">Specific Fold Functions</a><ul><li><a href="#g:8">Full Folds</a></li><li><a href="#g:9">Partial Folds</a></li><li><a href="#g:10">To Containers</a></li></ul></li><li><a href="#g:11">Concurrent Folds</a></li><li><a href="#g:12">Multi-Stream folds</a></li><li><a href="#g:13">Deprecated</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains functions ending in the shape:</p><pre>t m a -&gt; m b
</pre><p>We call them stream folding functions, they reduce a stream <code>t m a</code> to a
 monadic value <code>m b</code>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:fold">fold</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:fold_">fold_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (b, <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a)</li><li class="src short"><a href="#v:foldOn">foldOn</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b</li><li class="src short"><a href="#v:parse">parse</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:parseK">parseK</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:parseD">parseD</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:parse_">parse_</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (b, <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a)</li><li class="src short"><a href="#v:parseD_">parseD_</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (b, <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a)</li><li class="src short"><a href="#v:uncons">uncons</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (a, t m a))</li><li class="src short"><a href="#v:foldrM">foldrM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:foldr">foldr</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:foldlS">foldlS</a> :: <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t =&gt; (t m b -&gt; a -&gt; t m b) -&gt; t m b -&gt; t m a -&gt; t m b</li><li class="src short"><a href="#v:foldlT">foldlT</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (s m), <a href="../transformers-0.5.6.2/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> s) =&gt; (s m b -&gt; a -&gt; s m b) -&gt; s m b -&gt; t m a -&gt; s m b</li><li class="src short"><a href="#v:foldl-39-">foldl'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:foldl1-39-">foldl1'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; a) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:foldlM-39-">foldlM'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:mapM_">mapM_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m ()</li><li class="src short"><a href="#v:drain">drain</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m ()</li><li class="src short"><a href="#v:last">last</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:length">length</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:sum">sum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m a</li><li class="src short"><a href="#v:product">product</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m a</li><li class="src short"><a href="#v:mconcat">mconcat</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m a</li><li class="src short"><a href="#v:maximumBy">maximumBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:maximum">maximum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:minimumBy">minimumBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:minimum">minimum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:the">the</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:drainN">drainN</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m ()</li><li class="src short"><a href="#v:drainWhile">drainWhile</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m ()</li><li class="src short"><a href="#v:-33--33-">(!!)</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:head">head</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:headElse">headElse</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m a</li><li class="src short"><a href="#v:tail">tail</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (t m a))</li><li class="src short"><a href="#v:init">init</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (t m a))</li><li class="src short"><a href="#v:findM">findM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:find">find</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:findIndex">findIndex</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><a href="#v:elemIndex">elemIndex</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><a href="#v:lookup">lookup</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m (a, b) -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b)</li><li class="src short"><a href="#v:null">null</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:elem">elem</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:notElem">notElem</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:all">all</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:any">any</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:and">and</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:or">or</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:toList">toList</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m [a]</li><li class="src short"><a href="#v:toListRev">toListRev</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m [a]</li><li class="src short"><a href="#v:toStream">toStream</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> n a)</li><li class="src short"><a href="#v:toStreamRev">toStreamRev</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> n a)</li><li class="src short"><a href="#v:foldAsync">foldAsync</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="Streamly-Internal-Control-Concurrent.html#t:MonadAsync" title="Streamly.Internal.Control.Concurrent">MonadAsync</a> m) =&gt; (t m a -&gt; m b) -&gt; t m a -&gt; m b</li><li class="src short"><a href="#v:-124--36-.">(|$.)</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="Streamly-Internal-Control-Concurrent.html#t:MonadAsync" title="Streamly.Internal.Control.Concurrent">MonadAsync</a> m) =&gt; (t m a -&gt; m b) -&gt; t m a -&gt; m b</li><li class="src short"><a href="#v:-124--38-.">(|&amp;.)</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="Streamly-Internal-Control-Concurrent.html#t:MonadAsync" title="Streamly.Internal.Control.Concurrent">MonadAsync</a> m) =&gt; t m a -&gt; (t m a -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:eqBy">eqBy</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; (a -&gt; b -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; t m a -&gt; t m b -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:cmpBy">cmpBy</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; (a -&gt; b -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; t m a -&gt; t m b -&gt; m <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a></li><li class="src short"><a href="#v:isPrefixOf">isPrefixOf</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; t m a -&gt; t m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isInfixOf">isInfixOf</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Prelude.html#t:Enum" title="Prelude">Enum</a> a, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isSuffixOf">isSuffixOf</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isSubsequenceOf">isSubsequenceOf</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; t m a -&gt; t m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:stripPrefix">stripPrefix</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; t m a -&gt; t m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (t m a))</li><li class="src short"><a href="#v:stripSuffix">stripSuffix</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a))</li><li class="src short"><a href="#v:foldx">foldx</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:foldxM">foldxM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b</li><li class="src short"><a href="#v:foldr1">foldr1</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; a) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:runStream">runStream</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m ()</li><li class="src short"><a href="#v:runN">runN</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m ()</li><li class="src short"><a href="#v:runWhile">runWhile</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m ()</li><li class="src short"><a href="#v:toHandle">toHandle</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; m ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Running Examples</h1></a><div class="doc"><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:m
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Streamly.Prelude (SerialT)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Prelude as Stream
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Internal.Data.Stream.IsStream as Stream
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Internal.Data.Parser as Parser
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Data.Fold as Fold
</code></strong></pre></div><a href="#g:2" id="g:2"><h1>Running a <code>Fold</code></h1></a><div class="top"><p class="src"><a id="v:fold" class="def">fold</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Common.html#fold" class="link">Source</a> <a href="#v:fold" class="selflink">#</a></p><div class="doc"><p>Fold a stream using the supplied left <code><a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a></code> and reducing the resulting
 expression strictly at each step. The behavior is similar to <code>foldl'</code>. A
 <code><a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a></code> can terminate early without consuming the full stream. See the
 documentation of individual <code><a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a></code>s for termination behavior.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold Fold.sum (Stream.enumerateFromTo 1 100)
</code></strong>5050
</pre><p>Folds never fail, therefore, they produce a default value even when no input
 is provided. It means we can always fold an empty stream and get a valid
 result.  For example:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.fold Fold.sum Stream.nil
</code></strong>0
</pre><p>However, <code>foldMany</code> on an empty stream results in an empty stream.
 Therefore, <code>Stream.fold f</code> is not the same as <code>Stream.head . Stream.foldMany
 f</code>.</p><pre>fold f = Stream.parse (Parser.fromFold f)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:fold_" class="def">fold_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (b, <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Common.html#fold_" class="link">Source</a> <a href="#v:fold_" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:foldOn" class="def">foldOn</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b <a href="src/Streamly.Internal.Data.Stream.IsStream.Common.html#foldOn" class="link">Source</a> <a href="#v:foldOn" class="selflink">#</a></p><div class="doc"><p>We can create higher order folds using <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:foldOn" title="Streamly.Internal.Data.Stream.IsStream.Eliminate">foldOn</a></code>. We can fold a number of
 streams to a given fold efficiently with full stream fusion. For example, to
 fold a list of streams on the same sum fold:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>concatFold = Prelude.foldl Stream.foldOn Fold.sum
</code></strong></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fold f = Fold.finish . Stream.foldOn f
</code></strong></pre><p><em>Internal</em></p></div></div><a href="#g:3" id="g:3"><h1>Running a <code>Parser</code></h1></a><div class="top"><p class="src"><a id="v:parse" class="def">parse</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#parse" class="link">Source</a> <a href="#v:parse" class="selflink">#</a></p><div class="doc"><p>Parse a stream using the supplied <code><a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a></code>.</p><p>Unlike folds, parsers may not always result in a valid output, they may
 result in an error.  For example:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.parse (Parser.takeEQ 1 Fold.drain) Stream.nil
</code></strong>*** Exception: ParseError &quot;takeEQ: Expecting exactly 1 elements, input terminated on 0&quot;
</pre><p>Note:</p><pre>fold f = Stream.parse (Parser.fromFold f)
</pre><p><code>parse p</code> is not the same as  <code>head . parseMany p</code> on an empty stream.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:parseK" class="def">parseK</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#parseK" class="link">Source</a> <a href="#v:parseK" class="selflink">#</a></p><div class="doc"><p>Parse a stream using the supplied ParserK <code><a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a></code>.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:parseD" class="def">parseD</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#parseD" class="link">Source</a> <a href="#v:parseD" class="selflink">#</a></p><div class="doc"><p>Parse a stream using the supplied ParserD <code><a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a></code>.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:parse_" class="def">parse_</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (b, <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#parse_" class="link">Source</a> <a href="#v:parse_" class="selflink">#</a></p><div class="doc"><p>Parse a stream using the supplied <code><a href="Streamly-Internal-Data-Parser-ParserK-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserK.Type">Parser</a></code>.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:parseD_" class="def">parseD_</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (b, <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#parseD_" class="link">Source</a> <a href="#v:parseD_" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h1>Stream Deconstruction</h1></a><div class="doc"><p>foldr and foldl do not provide the remaining stream.  <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:uncons" title="Streamly.Internal.Data.Stream.IsStream.Eliminate">uncons</a></code> is more
 general, as it can be used to implement those as well.  It allows to use
 the stream one element at a time, and we have the remaining stream all
 the time.</p></div><div class="top"><p class="src"><a id="v:uncons" class="def">uncons</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (a, t m a)) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#uncons" class="link">Source</a> <a href="#v:uncons" class="selflink">#</a></p><div class="doc"><p>Decompose a stream into its head and tail. If the stream is empty, returns
 <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>. If the stream is non-empty, returns <code>Just (a, ma)</code>, where <code>a</code> is
 the head of the stream and <code>ma</code> its tail.</p><p>This is a brute force primitive. Avoid using it as long as possible, use it
 when no other combinator can do the job. This can be used to do pretty much
 anything in an imperative manner, as it just breaks down the stream into
 individual elements and we can loop over them as we deem fit. For example,
 this can be used to convert a streamly stream into other stream types.</p><p>All the folds in this module can be expressed in terms of <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:uncons" title="Streamly.Internal.Data.Stream.IsStream.Eliminate">uncons</a></code>, however
 the specific implementations are generally more efficient.</p><p><em>Since: 0.1.0</em></p></div></div><a href="#g:5" id="g:5"><h1>Right Folds</h1></a><div class="top"><p class="src"><a id="v:foldrM" class="def">foldrM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldrM" class="link">Source</a> <a href="#v:foldrM" class="selflink">#</a></p><div class="doc"><p>Right associative/lazy pull fold. <code>foldrM build final stream</code> constructs
 an output structure using the step function <code>build</code>. <code>build</code> is invoked with
 the next input element and the remaining (lazy) tail of the output
 structure. It builds a lazy output expression using the two. When the &quot;tail
 structure&quot; in the output expression is evaluated it calls <code>build</code> again thus
 lazily consuming the input <code>stream</code> until either the output expression built
 by <code>build</code> is free of the &quot;tail&quot; or the input is exhausted in which case
 <code>final</code> is used as the terminating case for the output structure. For more
 details see the description in the previous section.</p><p>Example, determine if any element is <code><a href="../base-4.16.4.0/Prelude.html#v:odd" title="Prelude">odd</a></code> in a stream:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.foldrM (\x xs -&gt; if odd x then return True else xs) (return False) $ Stream.fromList (2:4:5:undefined)
</code></strong>True
</pre><p><em>Since: 0.7.0 (signature changed)</em></p><p><em>Since: 0.2.0 (signature changed)</em></p><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldr" class="def">foldr</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldr" class="link">Source</a> <a href="#v:foldr" class="selflink">#</a></p><div class="doc"><p>Right fold, lazy for lazy monads and pure streams, and strict for strict
 monads.</p><p>Please avoid using this routine in strict monads like IO unless you need a
 strict right fold. This is provided only for use in lazy monads (e.g.
 Identity) or pure streams. Note that with this signature it is not possible
 to implement a lazy foldr when the monad <code>m</code> is strict. In that case it
 would be strict in its accumulator and therefore would necessarily consume
 all its input.</p><p><em>Since: 0.1.0</em></p></div></div><a href="#g:6" id="g:6"><h1>Left Folds</h1></a><div class="top"><p class="src"><a id="v:foldlS" class="def">foldlS</a> :: <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t =&gt; (t m b -&gt; a -&gt; t m b) -&gt; t m b -&gt; t m a -&gt; t m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldlS" class="link">Source</a> <a href="#v:foldlS" class="selflink">#</a></p><div class="doc"><p>Lazy left fold to a stream.</p></div></div><div class="top"><p class="src"><a id="v:foldlT" class="def">foldlT</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (s m), <a href="../transformers-0.5.6.2/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> s) =&gt; (s m b -&gt; a -&gt; s m b) -&gt; s m b -&gt; t m a -&gt; s m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldlT" class="link">Source</a> <a href="#v:foldlT" class="selflink">#</a></p><div class="doc"><p>Lazy left fold to a transformer monad.</p><p>For example, to reverse a stream:</p><pre>S.toList $ S.foldlT (flip S.cons) S.nil $ (S.fromList [1..5] :: SerialT IO Int)</pre></div></div><div class="top"><p class="src"><a id="v:foldl-39-" class="def">foldl'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldl%27" class="link">Source</a> <a href="#v:foldl-39-" class="selflink">#</a></p><div class="doc"><p>Left associative/strict push fold. <code>foldl' reduce initial stream</code> invokes
 <code>reduce</code> with the accumulator and the next input in the input stream, using
 <code>initial</code> as the initial value of the current value of the accumulator. When
 the input is exhausted the current value of the accumulator is returned.
 Make sure to use a strict data structure for accumulator to not build
 unnecessary lazy expressions unless that's what you want. See the previous
 section for more details.</p><p><em>Since: 0.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldl1-39-" class="def">foldl1'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; a) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldl1%27" class="link">Source</a> <a href="#v:foldl1-39-" class="selflink">#</a></p><div class="doc"><p>Strict left fold, for non-empty streams, using first element as the
 starting value. Returns <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the stream is empty.</p><p><em>Since: 0.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldlM-39-" class="def">foldlM'</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldlM%27" class="link">Source</a> <a href="#v:foldlM-39-" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:foldl-39-" title="Streamly.Internal.Data.Stream.IsStream.Eliminate">foldl'</a></code> but with a monadic step function.</p><p><em>Since: 0.2.0</em></p><p><em>Since: 0.8.0 (signature change)</em></p></div></div><a href="#g:7" id="g:7"><h1>Specific Fold Functions</h1></a><div class="doc"><p>Folds as functions of the shape <code>t m a -&gt; m b</code>.</p><p>These functions are good to run individually but they do not compose
 well. Prefer writing folds as the <code>Fold</code> data type. Use folds from
 <a href="Streamly-Internal-Data-Fold.html">Streamly.Internal.Data.Fold</a> instead of using the functions in this
 section.</p><p>This section can possibly be removed in future.  Are these better in
 some case compared to <code>Fold</code>? When the input stream is in CPS style
 (StreamK) we may want to rewrite the function call to CPS implementation
 of the fold through these definitions. Will that be more efficient for
 StreamK?</p></div><a href="#g:8" id="g:8"><h2>Full Folds</h2></a><div class="top"><p class="src"><a id="v:mapM_" class="def">mapM_</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m () <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#mapM_" class="link">Source</a> <a href="#v:mapM_" class="selflink">#</a></p><div class="doc"><pre>mapM_ = Stream.drain . Stream.mapM</pre><p>Apply a monadic action to each element of the stream and discard the output
 of the action. This is not really a pure transformation operation but a
 transformation followed by fold.</p><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:drain" class="def">drain</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m () <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#drain" class="link">Source</a> <a href="#v:drain" class="selflink">#</a></p><div class="doc"><pre>drain = mapM_ (\_ -&gt; return ())
drain = Stream.fold Fold.drain</pre><p>Run a stream, discarding the results. By default it interprets the stream
 as <code><a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a></code>, to run other types of streams use the type adapting
 combinators for example <code>Stream.drain . <code>fromAsync</code></code>.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:last" class="def">last</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#last" class="link">Source</a> <a href="#v:last" class="selflink">#</a></p><div class="doc"><p>Extract the last element of the stream, if any.</p><pre>last xs = xs !! (Stream.length xs - 1)
last = Stream.fold Fold.last</pre><p><em>Since: 0.1.1</em></p></div></div><div class="top"><p class="src"><a id="v:length" class="def">length</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#length" class="link">Source</a> <a href="#v:length" class="selflink">#</a></p><div class="doc"><p>Determine the length of the stream.</p><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:sum" class="def">sum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m a <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#sum" class="link">Source</a> <a href="#v:sum" class="selflink">#</a></p><div class="doc"><p>Determine the sum of all elements of a stream of numbers. Returns <code>0</code> when
 the stream is empty. Note that this is not numerically stable for floating
 point numbers.</p><pre>sum = Stream.fold Fold.sum</pre><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:product" class="def">product</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m a <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#product" class="link">Source</a> <a href="#v:product" class="selflink">#</a></p><div class="doc"><p>Determine the product of all elements of a stream of numbers. Returns <code>1</code>
 when the stream is empty.</p><pre>product = Stream.fold Fold.product</pre><p><em>Since: 0.1.1</em></p></div></div><div class="top"><p class="src"><a id="v:mconcat" class="def">mconcat</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m a <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p><div class="doc"><p>Fold a stream of monoid elements by appending them.</p><pre>mconcat = Stream.fold Fold.mconcat</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:maximumBy" class="def">maximumBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#maximumBy" class="link">Source</a> <a href="#v:maximumBy" class="selflink">#</a></p><div class="doc"><p>Determine the maximum element in a stream using the supplied comparison
 function.</p><pre>maximumBy = Stream.fold Fold.maximumBy</pre><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:maximum" class="def">maximum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#maximum" class="link">Source</a> <a href="#v:maximum" class="selflink">#</a></p><div class="doc"><pre>maximum = <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:maximumBy" title="Streamly.Internal.Data.Stream.IsStream.Eliminate">maximumBy</a></code> compare
maximum = Stream.fold Fold.maximum
</pre><p>Determine the maximum element in a stream.</p><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:minimumBy" class="def">minimumBy</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#minimumBy" class="link">Source</a> <a href="#v:minimumBy" class="selflink">#</a></p><div class="doc"><p>Determine the minimum element in a stream using the supplied comparison
 function.</p><pre>minimumBy = Stream.fold Fold.minimumBy</pre><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:minimum" class="def">minimum</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#minimum" class="link">Source</a> <a href="#v:minimum" class="selflink">#</a></p><div class="doc"><pre>minimum = <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:minimumBy" title="Streamly.Internal.Data.Stream.IsStream.Eliminate">minimumBy</a></code> compare
minimum = Stream.fold Fold.minimum
</pre><p>Determine the minimum element in a stream.</p><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:the" class="def">the</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#the" class="link">Source</a> <a href="#v:the" class="selflink">#</a></p><div class="doc"><p>Ensures that all the elements of the stream are identical and then returns
 that unique element.</p><p><em>Since: 0.6.0</em></p></div></div><a href="#g:9" id="g:9"><h2>Partial Folds</h2></a><div class="top"><p class="src"><a id="v:drainN" class="def">drainN</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m () <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#drainN" class="link">Source</a> <a href="#v:drainN" class="selflink">#</a></p><div class="doc"><pre>drainN n = Stream.drain . Stream.take n
drainN n = Stream.fold (Fold.take n Fold.drain)</pre><p>Run maximum up to <code>n</code> iterations of a stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:drainWhile" class="def">drainWhile</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m () <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#drainWhile" class="link">Source</a> <a href="#v:drainWhile" class="selflink">#</a></p><div class="doc"><pre>drainWhile p = Stream.drain . Stream.takeWhile p</pre><p>Run a stream as long as the predicate holds true.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:-33--33-" class="def">(!!)</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#%21%21" class="link">Source</a> <a href="#v:-33--33-" class="selflink">#</a></p><div class="doc"><p>Lookup the element at the given index.</p><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:head" class="def">head</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#head" class="link">Source</a> <a href="#v:head" class="selflink">#</a></p><div class="doc"><p>Extract the first element of the stream, if any.</p><pre>head = (!! 0)
head = Stream.fold Fold.head</pre><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:headElse" class="def">headElse</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m a <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#headElse" class="link">Source</a> <a href="#v:headElse" class="selflink">#</a></p><div class="doc"><p>Extract the first element of the stream, if any, otherwise use the
 supplied default value. It can help avoid one branch in high performance
 code.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:tail" class="def">tail</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (t m a)) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#tail" class="link">Source</a> <a href="#v:tail" class="selflink">#</a></p><div class="doc"><pre>tail = fmap (fmap snd) . Stream.uncons</pre><p>Extract all but the first element of the stream, if any.</p><p><em>Since: 0.1.1</em></p></div></div><div class="top"><p class="src"><a id="v:init" class="def">init</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (t m a)) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#init" class="link">Source</a> <a href="#v:init" class="selflink">#</a></p><div class="doc"><p>Extract all but the last element of the stream, if any.</p><p><em>Since: 0.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:findM" class="def">findM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#findM" class="link">Source</a> <a href="#v:findM" class="selflink">#</a></p><div class="doc"><p>Returns the first element that satisfies the given predicate.</p><pre>findM = Stream.fold Fold.findM</pre><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:find" class="def">find</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#find" class="link">Source</a> <a href="#v:find" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:findM" title="Streamly.Internal.Data.Stream.IsStream.Eliminate">findM</a></code> but with a non-monadic predicate.</p><pre>find p = findM (return . p)
find = Stream.fold Fold.find</pre><p><em>Since: 0.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:findIndex" class="def">findIndex</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#findIndex" class="link">Source</a> <a href="#v:findIndex" class="selflink">#</a></p><div class="doc"><p>Returns the first index that satisfies the given predicate.</p><pre>findIndex = Stream.fold Fold.findIndex</pre><p><em>Since: 0.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:elemIndex" class="def">elemIndex</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#elemIndex" class="link">Source</a> <a href="#v:elemIndex" class="selflink">#</a></p><div class="doc"><p>Returns the first index where a given value is found in the stream.</p><pre>elemIndex a = Stream.findIndex (== a)</pre><p><em>Since: 0.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:lookup" class="def">lookup</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m (a, b) -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#lookup" class="link">Source</a> <a href="#v:lookup" class="selflink">#</a></p><div class="doc"><p>In a stream of (key-value) pairs <code>(a, b)</code>, return the value <code>b</code> of the
 first pair where the key equals the given value <code>a</code>.</p><pre>lookup = snd &lt;$&gt; Stream.find ((==) . fst)
lookup = Stream.fold Fold.lookup</pre><p><em>Since: 0.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:null" class="def">null</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#null" class="link">Source</a> <a href="#v:null" class="selflink">#</a></p><div class="doc"><p>Determine whether the stream is empty.</p><pre>null = Stream.fold Fold.null</pre><p><em>Since: 0.1.1</em></p></div></div><div class="top"><p class="src"><a id="v:elem" class="def">elem</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#elem" class="link">Source</a> <a href="#v:elem" class="selflink">#</a></p><div class="doc"><p>Determine whether an element is present in the stream.</p><pre>elem = Stream.fold Fold.elem</pre><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:notElem" class="def">notElem</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#notElem" class="link">Source</a> <a href="#v:notElem" class="selflink">#</a></p><div class="doc"><p>Determine whether an element is not present in the stream.</p><pre>notElem = Stream.fold Fold.length</pre><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:all" class="def">all</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#all" class="link">Source</a> <a href="#v:all" class="selflink">#</a></p><div class="doc"><p>Determine whether all elements of a stream satisfy a predicate.</p><pre>all = Stream.fold Fold.all</pre><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:any" class="def">any</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#any" class="link">Source</a> <a href="#v:any" class="selflink">#</a></p><div class="doc"><p>Determine whether any of the elements of a stream satisfy a predicate.</p><pre>any = Stream.fold Fold.any</pre><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:and" class="def">and</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#and" class="link">Source</a> <a href="#v:and" class="selflink">#</a></p><div class="doc"><p>Determines if all elements of a boolean stream are True.</p><pre>and = Stream.fold Fold.and</pre><p><em>Since: 0.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:or" class="def">or</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#or" class="link">Source</a> <a href="#v:or" class="selflink">#</a></p><div class="doc"><p>Determines whether at least one element of a boolean stream is True.</p><pre>or = Stream.fold Fold.or</pre><p><em>Since: 0.5.0</em></p></div></div><a href="#g:10" id="g:10"><h2>To Containers</h2></a><div class="top"><p class="src"><a id="v:toList" class="def">toList</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m [a] <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#toList" class="link">Source</a> <a href="#v:toList" class="selflink">#</a></p><div class="doc"><pre>toList = Stream.foldr (:) []
</pre><p>Convert a stream into a list in the underlying monad. The list can be
 consumed lazily in a lazy monad (e.g. <code>Identity</code>). In a strict monad (e.g.
 IO) the whole list is generated and buffered before it can be consumed.</p><p><em>Warning!</em> working on large lists accumulated as buffers in memory could be
 very inefficient, consider using <a href="Streamly-Array.html">Streamly.Array</a> instead.</p><p><em>Since: 0.1.0</em></p></div></div><div class="top"><p class="src"><a id="v:toListRev" class="def">toListRev</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m [a] <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#toListRev" class="link">Source</a> <a href="#v:toListRev" class="selflink">#</a></p><div class="doc"><pre>toListRev = Stream.foldl' (flip (:)) []
</pre><p>Convert a stream into a list in reverse order in the underlying monad.</p><p><em>Warning!</em> working on large lists accumulated as buffers in memory could be
 very inefficient, consider using <a href="Streamly-Array.html">Streamly.Array</a> instead.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:toStream" class="def">toStream</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> n a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#toStream" class="link">Source</a> <a href="#v:toStream" class="selflink">#</a></p><div class="doc"><p>Convert a stream to a pure stream.</p><pre>toStream = Stream.foldr Stream.cons Stream.nil
</pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:toStreamRev" class="def">toStreamRev</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> n a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#toStreamRev" class="link">Source</a> <a href="#v:toStreamRev" class="selflink">#</a></p><div class="doc"><p>Convert a stream to a pure stream in reverse order.</p><pre>toStreamRev = Stream.foldl' (flip Stream.cons) Stream.nil
</pre><p><em>Pre-release</em></p></div></div><a href="#g:11" id="g:11"><h1>Concurrent Folds</h1></a><div class="top"><p class="src"><a id="v:foldAsync" class="def">foldAsync</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="Streamly-Internal-Control-Concurrent.html#t:MonadAsync" title="Streamly.Internal.Control.Concurrent">MonadAsync</a> m) =&gt; (t m a -&gt; m b) -&gt; t m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldAsync" class="link">Source</a> <a href="#v:foldAsync" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:-124--36-." title="Streamly.Internal.Data.Stream.IsStream.Eliminate">|$.</a></code>.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:-124--36-." class="def">(|$.)</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="Streamly-Internal-Control-Concurrent.html#t:MonadAsync" title="Streamly.Internal.Control.Concurrent">MonadAsync</a> m) =&gt; (t m a -&gt; m b) -&gt; t m a -&gt; m b <span class="fixity">infixr 0</span><span class="rightedge"></span> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#%7C%24." class="link">Source</a> <a href="#v:-124--36-." class="selflink">#</a></p><div class="doc"><p>Parallel fold application operator; applies a fold function <code>t m a -&gt; m b</code>
 to a stream <code>t m a</code> concurrently; The the input stream is evaluated
 asynchronously in an independent thread yielding elements to a buffer and
 the folding action runs in another thread consuming the input from the
 buffer.</p><p>If you read the signature as <code>(t m a -&gt; m b) -&gt; (t m a -&gt; m b)</code> you can look
 at it as a transformation that converts a fold function to a buffered
 concurrent fold function.</p><p>The <code>.</code> at the end of the operator is a mnemonic for termination of the
 stream.</p><p>In the example below, each stage introduces a delay of 1 sec but output is
 printed every second because both stages are concurrent.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Control.Concurrent (threadDelay)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Streamly.Prelude ((|$.))
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong> Stream.foldlM' (\_ a -&gt; threadDelay 1000000 &gt;&gt; print a) (return ())
     |$. Stream.replicateM 3 (threadDelay 1000000 &gt;&gt; return 1)
:}
1
1
1
</pre><p><em>Concurrent</em></p><p><em>Since: 0.3.0 (<a href="Streamly.html">Streamly</a>)</em></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:-124--38-." class="def">(|&amp;.)</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="Streamly-Internal-Control-Concurrent.html#t:MonadAsync" title="Streamly.Internal.Control.Concurrent">MonadAsync</a> m) =&gt; t m a -&gt; (t m a -&gt; m b) -&gt; m b <span class="fixity">infixl 1</span><span class="rightedge"></span> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#%7C%26." class="link">Source</a> <a href="#v:-124--38-." class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:-124--36-." title="Streamly.Internal.Data.Stream.IsStream.Eliminate">|$.</a></code> but with arguments reversed.</p><pre>(|&amp;.) = flip (|$.)</pre><p><em>Concurrent</em></p><p><em>Since: 0.3.0 (<a href="Streamly.html">Streamly</a>)</em></p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:12" id="g:12"><h1>Multi-Stream folds</h1></a><div class="top"><p class="src"><a id="v:eqBy" class="def">eqBy</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; (a -&gt; b -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; t m a -&gt; t m b -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#eqBy" class="link">Source</a> <a href="#v:eqBy" class="selflink">#</a></p><div class="doc"><p>Compare two streams for equality using an equality function.</p><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:cmpBy" class="def">cmpBy</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; (a -&gt; b -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; t m a -&gt; t m b -&gt; m <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#cmpBy" class="link">Source</a> <a href="#v:cmpBy" class="selflink">#</a></p><div class="doc"><p>Compare two streams lexicographically using a comparison function.</p><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:isPrefixOf" class="def">isPrefixOf</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; t m a -&gt; t m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#isPrefixOf" class="link">Source</a> <a href="#v:isPrefixOf" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the first stream is the same as or a prefix of the
 second. A stream is a prefix of itself.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.isPrefixOf (Stream.fromList &quot;hello&quot;) (Stream.fromList &quot;hello&quot; :: SerialT IO Char)
</code></strong>True
</pre><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:isInfixOf" class="def">isInfixOf</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.16.4.0/Prelude.html#t:Enum" title="Prelude">Enum</a> a, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#isInfixOf" class="link">Source</a> <a href="#v:isInfixOf" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the first stream is an infix of the second. A stream is
 considered an infix of itself.</p><pre>Stream.isInfixOf (Stream.fromList &quot;hello&quot;) (Stream.fromList &quot;hello&quot; :: SerialT IO Char)</pre><p>True</p><p>Space: <code>O(n)</code> worst case where <code>n</code> is the length of the infix.</p><p><em>Pre-release</em></p><p><em>Requires <code><a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a></code> constraint</em></p></div></div><div class="top"><p class="src"><a id="v:isSuffixOf" class="def">isSuffixOf</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#isSuffixOf" class="link">Source</a> <a href="#v:isSuffixOf" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the first stream is a suffix of the second. A stream is
 considered a suffix of itself.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.isSuffixOf (Stream.fromList &quot;hello&quot;) (Stream.fromList &quot;hello&quot; :: SerialT IO Char)
</code></strong>True
</pre><p>Space: <code>O(n)</code>, buffers entire input stream and the suffix.</p><p><em>Pre-release</em></p><p><em>Suboptimal</em> - Help wanted.</p></div></div><div class="top"><p class="src"><a id="v:isSubsequenceOf" class="def">isSubsequenceOf</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; t m a -&gt; t m a -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#isSubsequenceOf" class="link">Source</a> <a href="#v:isSubsequenceOf" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.16.4.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if all the elements of the first stream occur, in order, in
 the second stream. The elements do not have to occur consecutively. A stream
 is a subsequence of itself.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.isSubsequenceOf (Stream.fromList &quot;hlo&quot;) (Stream.fromList &quot;hello&quot; :: SerialT IO Char)
</code></strong>True
</pre><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:stripPrefix" class="def">stripPrefix</a> :: (<a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; t m a -&gt; t m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (t m a)) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#stripPrefix" class="link">Source</a> <a href="#v:stripPrefix" class="selflink">#</a></p><div class="doc"><p><code>stripPrefix prefix stream</code> strips <code>prefix</code> from <code>stream</code> if it is a
 prefix of stream. Returns <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the stream does not start with the
 given prefix, stripped stream otherwise. Returns <code>Just nil</code> when the prefix
 is the same as the stream.</p><p>See also &quot;Streamly.Internal.Data.Stream.IsStream.Nesting.dropPrefix&quot;.</p><p>Space: <code>O(1)</code></p><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:stripSuffix" class="def">stripSuffix</a> :: (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a)) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#stripSuffix" class="link">Source</a> <a href="#v:stripSuffix" class="selflink">#</a></p><div class="doc"><p>Drops the given suffix from a stream. Returns <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the stream does
 not end with the given suffix. Returns <code>Just nil</code> when the suffix is the
 same as the stream.</p><p>It may be more efficient to convert the stream to an Array and use
 stripSuffix on that especially if the elements have a Storable or Prim
 instance.</p><p>See also &quot;Streamly.Internal.Data.Stream.IsStream.Nesting.dropSuffix&quot;.</p><p>Space: <code>O(n)</code>, buffers the entire input stream as well as the suffix</p><p><em>Pre-release</em></p></div></div><a href="#g:13" id="g:13"><h1>Deprecated</h1></a><div class="top"><p class="src"><a id="v:foldx" class="def">foldx</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (x -&gt; a -&gt; x) -&gt; x -&gt; (x -&gt; b) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldx" class="link">Source</a> <a href="#v:foldx" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Please use foldl' followed by fmap instead.</p></div><p>Strict left fold with an extraction function. Like the standard strict
 left fold, but applies a user supplied extraction function (the third
 argument) to the folded value at the end. This is designed to work with the
 <code>foldl</code> library. The suffix <code>x</code> is a mnemonic for extraction.</p><p><em>Since: 0.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldxM" class="def">foldxM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (x -&gt; a -&gt; m x) -&gt; m x -&gt; (x -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m b <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldxM" class="link">Source</a> <a href="#v:foldxM" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Please use foldlM' followed by fmap instead.</p></div><p>Like <code><a href="Streamly-Internal-Data-Stream-IsStream-Eliminate.html#v:foldx" title="Streamly.Internal.Data.Stream.IsStream.Eliminate">foldx</a></code>, but with a monadic step function.</p><p><em>Since: 0.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldr1" class="def">foldr1</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; a) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#foldr1" class="link">Source</a> <a href="#v:foldr1" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Use foldrM instead.</p></div><p>Lazy right fold for non-empty streams, using first element as the starting
 value. Returns <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the stream is empty.</p><p><em>Since: 0.5.0</em></p></div></div><div class="top"><p class="src"><a id="v:runStream" class="def">runStream</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m () <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#runStream" class="link">Source</a> <a href="#v:runStream" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Please use &quot;drain&quot; instead</p></div><p>Run a stream, discarding the results. By default it interprets the stream
 as <code><a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a></code>, to run other types of streams use the type adapting
 combinators for example <code>runStream . <code>fromAsync</code></code>.</p><p><em>Since: 0.2.0</em></p></div></div><div class="top"><p class="src"><a id="v:runN" class="def">runN</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m () <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#runN" class="link">Source</a> <a href="#v:runN" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Please use &quot;drainN&quot; instead</p></div><pre>runN n = runStream . take n</pre><p>Run maximum up to <code>n</code> iterations of a stream.</p><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:runWhile" class="def">runWhile</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m a -&gt; m () <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#runWhile" class="link">Source</a> <a href="#v:runWhile" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Please use &quot;drainWhile&quot; instead</p></div><pre>runWhile p = runStream . takeWhile p</pre><p>Run a stream as long as the predicate holds true.</p><p><em>Since: 0.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:toHandle" class="def">toHandle</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-String.html#t:String" title="Data.String">String</a> -&gt; m () <a href="src/Streamly.Internal.Data.Stream.IsStream.Eliminate.html#toHandle" class="link">Source</a> <a href="#v:toHandle" class="selflink">#</a></p><div class="doc"><div class="warning"><p>Deprecated: Please use Streamly.FileSystem.Handle module (see the changelog)</p></div><pre>toHandle h = S.mapM_ $ hPutStrLn h
</pre><p>Write a stream of Strings to an IO Handle.</p><p><em>Since: 0.1.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>