<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Streamly.Internal.Data.Array.Stream.Fold.Foreign</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">streamly-0.8.1.1: Dataflow programming and declarative concurrency</span><ul class="links" id="page-menu"><li><a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2021 Composewell Technologies</td></tr><tr><th>License</th><td>BSD-3-Clause</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Internal.Data.Array.Stream.Fold.Foreign</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Construction</a></li><li><a href="#g:2">Mapping</a></li><li><a href="#g:3">Applicative</a></li><li><a href="#g:4">Monad</a></li><li><a href="#g:5">Transformation</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Fold a stream of foreign arrays.  <code>Fold m a b</code> in this module works
 on a stream of &quot;Array a&quot; and produces an output of type <code>b</code>.</p><p>Though <code>Fold m a b</code> in this module works on a stream of <code>Array a</code> it is
 different from <code>Data.Fold m (Array a) b</code>.  While the latter works on arrays
 as a whole treating them as atomic elements, the folds in this module can
 work on the stream of arrays as if it is an element stream with all the
 arrays coalesced together. This module allows adapting the element stream
 folds in Data.Fold to correctly work on an array stream as if it is an
 element stream. For example:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Data.Fold as Fold
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Internal.Data.Array.Stream.Foreign as ArrayStream
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Internal.Data.Array.Stream.Fold.Foreign as ArrayFold
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Internal.Data.Stream.IsStream as Stream (arraysOf)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Prelude as Stream
</code></strong></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ArrayStream.foldArr (ArrayFold.fromFold (Fold.take 7 Fold.toList)) $ Stream.arraysOf 5 $ Stream.fromList &quot;hello world&quot;
</code></strong>&quot;hello w&quot;
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Fold">Fold</a> m a b = <a href="#v:Fold">Fold</a> (<a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) b)</li><li class="src short"><a href="#v:fromFold">fromFold</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b</li><li class="src short"><a href="#v:fromParser">fromParser</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b</li><li class="src short"><a href="#v:fromArrayFold">fromArrayFold</a> :: <span class="keyword">forall</span> m a b. <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b</li><li class="src short"><a href="#v:rmapM">rmapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a c</li><li class="src short"><a href="#v:fromPure">fromPure</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b</li><li class="src short"><a href="#v:fromEffect">fromEffect</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b</li><li class="src short"><a href="#v:serialWith">serialWith</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; (a -&gt; b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m x c</li><li class="src short"><a href="#v:concatMap">concatMap</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; (b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a c) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a c</li><li class="src short"><a href="#v:take">take</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Fold" class="def">Fold</a> m a b <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#Fold" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></p><div class="doc"><p>Array stream fold.</p><p>An array stream fold is basically an array stream <a href="Parser.html">Parser</a> that does not
 fail.  In case of array stream folds the count in <code><a href="Streamly-Internal-Data-Parser-ParserD-Type.html#v:Partial" title="Streamly.Internal.Data.Parser.ParserD.Type">Partial</a></code>, <code><a href="Streamly-Internal-Data-Parser-ParserD-Type.html#v:Continue" title="Streamly.Internal.Data.Parser.ParserD.Type">Continue</a></code> and
 <code><a href="Streamly-Internal-Data-Parser-ParserD-Type.html#v:Done" title="Streamly.Internal.Data.Parser.ParserD.Type">Done</a></code> is a count of elements that includes the leftover element count in
 the array that is currently being processed by the parser. If none of the
 elements is consumed by the parser the count is at least the whole array
 length. If the whole array is consumed by the parser then the count will be
 0.</p><p><em>Pre-release</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Fold" class="def">Fold</a> (<a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) b)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Fold">Instances</h4><details id="i:Fold" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Applicative:1"></span> <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a)</span> <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#line-238" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p><code><a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> form of <code><a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#v:serialWith" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">serialWith</a></code>.
 &gt; (<a href="*">*</a>) = serialWith id</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Applicative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html">Streamly.Internal.Data.Array.Stream.Fold.Foreign</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a (a0 -&gt; b) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a0 -&gt; b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Functor:2"></span> <a href="../base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m =&gt; <a href="../base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a)</span> <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#line-186" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Maps a function over the result of fold.</p><p><em>Pre-release</em></p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html">Streamly.Internal.Data.Array.Stream.Fold.Foreign</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a0 -&gt; b) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Monad:3"></span> <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a)</span> <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#line-272" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Monad instance applies folds sequentially. Next fold can depend on the
 output of the previous fold. See <code><a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#v:concatMap" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">concatMap</a></code>.</p><pre>(&gt;&gt;=) = flip concatMap</pre></td></tr><tr><td colspan="2"><details id="i:id:Fold:Monad:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html">Streamly.Internal.Data.Array.Stream.Fold.Foreign</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 -&gt; (a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a0 -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a a0 <a href="#v:return" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:1" id="g:1"><h1>Construction</h1></a><div class="top"><p class="src"><a id="v:fromFold" class="def">fromFold</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#fromFold" class="link">Source</a> <a href="#v:fromFold" class="selflink">#</a></p><div class="doc"><p>Convert an element <code><a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a></code> into an array stream fold.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:fromParser" class="def">fromParser</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="Streamly-Internal-Data-Parser-ParserD-Type.html#t:Parser" title="Streamly.Internal.Data.Parser.ParserD.Type">Parser</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#fromParser" class="link">Source</a> <a href="#v:fromParser" class="selflink">#</a></p><div class="doc"><p>Convert an element <code>Parser</code> into an array stream fold. If the parser fails
 the fold would throw an exception.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:fromArrayFold" class="def">fromArrayFold</a> :: <span class="keyword">forall</span> m a b. <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#fromArrayFold" class="link">Source</a> <a href="#v:fromArrayFold" class="selflink">#</a></p><div class="doc"><p>Adapt an array stream fold.</p><p><em>Pre-release</em></p></div></div><a href="#g:2" id="g:2"><h1>Mapping</h1></a><div class="top"><p class="src"><a id="v:rmapM" class="def">rmapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a c <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#rmapM" class="link">Source</a> <a href="#v:rmapM" class="selflink">#</a></p><div class="doc"><p>Map a monadic function on the output of a fold.</p><p><em>Pre-release</em></p></div></div><a href="#g:3" id="g:3"><h1>Applicative</h1></a><div class="top"><p class="src"><a id="v:fromPure" class="def">fromPure</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#fromPure" class="link">Source</a> <a href="#v:fromPure" class="selflink">#</a></p><div class="doc"><p>A fold that always yields a pure value without consuming any input.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:fromEffect" class="def">fromEffect</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#fromEffect" class="link">Source</a> <a href="#v:fromEffect" class="selflink">#</a></p><div class="doc"><p>A fold that always yields the result of an effectful action without
 consuming any input.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:serialWith" class="def">serialWith</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; (a -&gt; b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m x a -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m x b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m x c <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#serialWith" class="link">Source</a> <a href="#v:serialWith" class="selflink">#</a></p><div class="doc"><p>Applies two folds sequentially on the input stream and combines their
 results using the supplied function.</p><p><em>Pre-release</em></p></div></div><a href="#g:4" id="g:4"><h1>Monad</h1></a><div class="top"><p class="src"><a id="v:concatMap" class="def">concatMap</a> :: <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadThrow" title="Control.Monad.Catch">MonadThrow</a> m =&gt; (b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a c) -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a c <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#concatMap" class="link">Source</a> <a href="#v:concatMap" class="selflink">#</a></p><div class="doc"><p>Applies a fold on the input stream, generates the next fold from the
 output of the previously applied fold and then applies that fold.</p><p><em>Pre-release</em></p></div></div><a href="#g:5" id="g:5"><h1>Transformation</h1></a><div class="top"><p class="src"><a id="v:take" class="def">take</a> :: <span class="keyword">forall</span> m a b. (<a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Array-Stream-Fold-Foreign.html#t:Fold" title="Streamly.Internal.Data.Array.Stream.Fold.Foreign">Fold</a> m a b <a href="src/Streamly.Internal.Data.Array.Stream.Fold.Foreign.html#take" class="link">Source</a> <a href="#v:take" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>