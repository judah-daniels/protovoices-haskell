<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Streamly.Internal.FileSystem.Event</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">streamly-0.8.1.1: Dataflow programming and declarative concurrency</span><ul class="links" id="page-menu"><li><a href="src/Streamly.Internal.FileSystem.Event.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2020 Composewell Technologies</td></tr><tr><th>License</th><td>BSD-3-Clause</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>pre-release</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Internal.FileSystem.Event</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Creating a Watch</a></li><li><a href="#g:2">Handling Events</a><ul><li><a href="#g:3">Item CRUD events</a></li><li><a href="#g:4">Exception Conditions</a></li><li><a href="#g:5">Debugging</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>File system event notification API portable across Linux, macOS and Windows
 platforms.</p><p>Note that recursive directory tree watch does not work reliably on Linux
 (see notes in the Linux module), therefore, recursive watch API is not
 provided in this module. However, you can use it from the platform specific
 modules.</p><p>For platform specific APIs please see the following modules:</p><ul><li><a href="Streamly-Internal-FileSystem-Event-Darwin.html">Streamly.Internal.FileSystem.Event.Darwin</a></li><li><a href="Streamly-Internal-FileSystem-Event-Linux.html">Streamly.Internal.FileSystem.Event.Linux</a></li><li><a href="Streamly-Internal-FileSystem-Event-Windows.html">Streamly.Internal.FileSystem.Event.Windows</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:watch">watch</a> :: <a href="../base-4.16.4.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Event">Event</a></li><li class="src short"><a href="#v:getAbsPath">getAbsPath</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></li><li class="src short"><a href="#v:isCreated">isCreated</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isDeleted">isDeleted</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isMoved">isMoved</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isModified">isModified</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isEventsLost">isEventsLost</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:showEvent">showEvent</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-String.html#t:String" title="Data.String">String</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Creating a Watch</h1></a><div class="top"><p class="src"><a id="v:watch" class="def">watch</a> :: <a href="../base-4.16.4.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> <a href="src/Streamly.Internal.FileSystem.Event.html#watch" class="link">Source</a> <a href="#v:watch" class="selflink">#</a></p><div class="doc"><p>Start monitoring a list of directories or symbolic links to directories
 for file system events.  Monitoring starts from the current time onwards.
 The paths are specified as UTF-8 encoded <code><a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a></code> of <code><a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></code>.</p><p>If a watch root is a symbolic link then the target of the link is watched.
 Fails if the watched path does not exist. If the user does not have
 permissions (read and execute?) on the watch root then no events are
 generated.  No events are generated if the watch root itself is renamed or
 deleted.</p><p>This API watches for changes in the watch root directory only, any changes
 in the subdirectories of the watch root are not watched. However, on macOS
 the watch is always recursive, but do not rely on that behavior, it may
 change without notice in future. If you want to use recursive watch please
 use platform specific modules.</p><p><em>Pre-release</em></p></div></div><a href="#g:2" id="g:2"><h1>Handling Events</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Event" class="def">Event</a> <a href="src/Streamly.Internal.FileSystem.Event.Linux.html#Event" class="link">Source</a> <a href="#t:Event" class="selflink">#</a></p><div class="doc"><p>An Event generated by the file system. Use the accessor functions to
 examine the event.</p><p><em>Pre-release</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Event">Instances</h4><details id="i:Event" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Event:Show:1"></span> <a href="../base-4.16.4.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a></span> <a href="src/Streamly.Internal.FileSystem.Event.Linux.html#line-821" class="link">Source</a> <a href="#t:Event" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Event:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-FileSystem-Event-Linux.html">Streamly.Internal.FileSystem.Event.Linux</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a>] -&gt; <a href="../base-4.16.4.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Event:Eq:2"></span> <a href="../base-4.16.4.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a></span> <a href="src/Streamly.Internal.FileSystem.Event.Linux.html#line-821" class="link">Source</a> <a href="#t:Event" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Event:Eq:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-FileSystem-Event-Linux.html">Streamly.Internal.FileSystem.Event.Linux</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Event:Ord:3"></span> <a href="../base-4.16.4.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a></span> <a href="src/Streamly.Internal.FileSystem.Event.Linux.html#line-821" class="link">Source</a> <a href="#t:Event" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Event:Ord:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-FileSystem-Event-Linux.html">Streamly.Internal.FileSystem.Event.Linux</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> <a href="#v:min" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:getAbsPath" class="def">getAbsPath</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="src/Streamly.Internal.FileSystem.Event.html#getAbsPath" class="link">Source</a> <a href="#v:getAbsPath" class="selflink">#</a></p><div class="doc"><p>Get the absolute path of the file system object for which the event is
 generated. The path is a UTF-8 encoded array of bytes.</p><p>When the watch root is a symlink the behavior is different on different
 platforms:</p><ul><li>On Linux and Windows, the absolute path returned is via the original
 symlink.</li><li>On macOS the absolute path returned is via the real path of the root after
 resolving the symlink.</li></ul><p>This API is subject to removal in future, to be replaced by a platform
 independent <code>getRelPath</code>.</p><p><em>Pre-release</em></p></div></div><a href="#g:3" id="g:3"><h2>Item CRUD events</h2></a><div class="top"><p class="src"><a id="v:isCreated" class="def">isCreated</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.FileSystem.Event.html#isCreated" class="link">Source</a> <a href="#v:isCreated" class="selflink">#</a></p><div class="doc"><p>Determine whether the event indicates creation of an object within the
 monitored path. This event is generated when any file system object is
 created.</p><p>For hard links the behavior is different on different operating systems. On
 macOS hard linking does not generate a create event, it generates an
 <code>isInodeAttrsChanged</code> event on the directory instead (see the Darwin
 module). On Linux and Windows hard linking generates a create event.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:isDeleted" class="def">isDeleted</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.FileSystem.Event.html#isDeleted" class="link">Source</a> <a href="#v:isDeleted" class="selflink">#</a></p><div class="doc"><p>Determine whether the event indicates deletion of an object within the
 monitored path. On Linux and Windows hard link deletion generates a delete
 event.</p><p>On Linux and Windows, this event does not occur when the watch root itself
 is deleted. On macOS it occurs on deleting the watch root when it is not a
 symbolic link.</p><p>See also <code>isRootDeleted</code> event for Linux.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:isMoved" class="def">isMoved</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.FileSystem.Event.html#isMoved" class="link">Source</a> <a href="#v:isMoved" class="selflink">#</a></p><div class="doc"><p>Determine whether the event indicates rename of an object within the
 monitored path. This event is generated when an object is renamed within the
 watched directory or if it is moved out of or in the watched directory.
 Moving hard links is no different than other types of objects.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:isModified" class="def">isModified</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.FileSystem.Event.html#isModified" class="link">Source</a> <a href="#v:isModified" class="selflink">#</a></p><div class="doc"><p>Determine whether the event indicates modification of an object within the
 monitored path. This event is generated on file modification on all
 platforms.</p><p>On Linux and macOS this event is never generated for directories.  On
 Windows (in recursive watch mode) this event is generated for directories as
 well when an object is created in or deleted from the directory.</p><p><em>Pre-release</em></p></div></div><a href="#g:4" id="g:4"><h2>Exception Conditions</h2></a><div class="top"><p class="src"><a id="v:isEventsLost" class="def">isEventsLost</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.FileSystem.Event.html#isEventsLost" class="link">Source</a> <a href="#v:isEventsLost" class="selflink">#</a></p><div class="doc"><p>An event that indicates that some events before this may have been lost,
 therefore, we need to take some recovery action.</p><p><em>Pre-release</em></p></div></div><a href="#g:5" id="g:5"><h2>Debugging</h2></a><div class="top"><p class="src"><a id="v:showEvent" class="def">showEvent</a> :: <a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a> -&gt; <a href="../base-4.16.4.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Streamly.Internal.FileSystem.Event.html#showEvent" class="link">Source</a> <a href="#v:showEvent" class="selflink">#</a></p><div class="doc"><p>Convert an <code><a href="Streamly-Internal-FileSystem-Event.html#t:Event" title="Streamly.Internal.FileSystem.Event">Event</a></code> record to a String representation. Note that the output
 of this function may be different on different platforms because it may
 contain platform specific details.</p><p><em>Internal</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>