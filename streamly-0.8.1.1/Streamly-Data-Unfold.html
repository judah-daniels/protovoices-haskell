<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Streamly.Data.Unfold</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">streamly-0.8.1.1: Dataflow programming and declarative concurrency</span><ul class="links" id="page-menu"><li><a href="src/Streamly.Data.Unfold.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2019 Composewell Technologies</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>released</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Data.Unfold</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Unfold Type</a></li><li><a href="#g:2">Unfolds</a><ul><li><a href="#g:3">Basic Constructors</a></li><li><a href="#g:4">Generators</a></li><li><a href="#g:5">From Containers</a></li></ul></li><li><a href="#g:6">Combinators</a><ul><li><a href="#g:7">Mapping on Input</a></li><li><a href="#g:8">Mapping on Output</a></li><li><a href="#g:9">Filtering</a></li><li><a href="#g:10">Zipping</a></li><li><a href="#g:11">Cross Product</a></li><li><a href="#g:12">Nesting</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>An <code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code> is a source or a producer of a stream of values.  It takes a
 seed value as an input and unfolds it into a sequence of values.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Data.Fold as Fold
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Data.Unfold as Unfold
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Streamly.Prelude as Stream
</code></strong></pre><p>For example, the <code><a href="Streamly-Data-Unfold.html#v:fromList" title="Streamly.Data.Unfold">fromList</a></code> Unfold generates a stream of values from a
 supplied list.  Unfolds can be converted to <code><a href="Streamly-Prelude.html#v:SerialT" title="Streamly.Prelude">SerialT</a></code>
 stream using the Stream.unfold operation.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>stream = Stream.unfold Unfold.fromList [1..100]
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.sum stream
</code></strong>5050
</pre><p>All the serial stream generation operations in <a href="Streamly-Prelude.html">Streamly.Prelude</a>
 can be expressed using unfolds:</p><pre>Stream.fromList = Stream.unfold Unfold.fromList [1..100]</pre><p>Conceptually, an <code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code> is just like &quot;Data.List.unfoldr&quot;. Let us write a
 step function to unfold a list using &quot;Data.List.unfoldr&quot;:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong> f [] = Nothing
 f (x:xs) = Just (x, xs)
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Data.List.unfoldr f [1,2,3]
</code></strong>[1,2,3]
</pre><p>Unfold.unfoldr is just the same, it uses the same step function:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.toList $ Stream.unfold (Unfold.unfoldr f) [1,2,3]
</code></strong>[1,2,3]
</pre><p>The input of an unfold can be transformed using <code><a href="Streamly-Data-Unfold.html#v:lmap" title="Streamly.Data.Unfold">lmap</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u = Unfold.lmap (fmap (+1)) Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.toList $ Stream.unfold u [1..5]
</code></strong>[2,3,4,5,6]
</pre><p><code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code> streams can be transformed using transformation combinators. For
 example, to retain only the first two elements of an unfold:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u = Unfold.take 2 Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.toList $ Stream.unfold u [1..100]
</code></strong>[1,2]
</pre><p>Multiple unfolds can be combined in several interesting ways. For example,
 to generate nested looping as in imperative languages (also known as cross
 product of the two streams):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u1 = Unfold.lmap fst Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u2 = Unfold.lmap snd Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u = Unfold.crossWith (,) u1 u2
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Stream.toList $ Stream.unfold u ([1,2,3], [4,5,6])
</code></strong>[(1,4),(1,5),(1,6),(2,4),(2,5),(2,6),(3,4),(3,5),(3,6)]
</pre><p>Nested loops using unfolds provide C like performance due to complete stream
 fusion.</p><p>Please see <a href="Streamly-Internal-Data-Unfold.html">Streamly.Internal.Data.Unfold</a> for additional <code>Pre-release</code>
 functions.</p><h1>Unfolds vs. Streams</h1><p>Unfolds' raison d'etre is their efficiency in nested stream operations due
 to complete stream fusion.  <code><a href="Streamly-Prelude.html#v:concatMap" title="Streamly.Prelude">concatMap</a></code> or the <code><a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code>
 instance of streams use stream generation operations of the shape <code>a -&gt; t m
 b</code> and then flatten the resulting stream.  This implementation is more
 powerful but does not allow for complete stream fusion.  Unfolds provide
 less powerful but more efficient <code><a href="Streamly-Prelude.html#v:unfoldMany" title="Streamly.Prelude">unfoldMany</a></code>, <code><a href="Streamly-Data-Unfold.html#v:many" title="Streamly.Data.Unfold">many</a></code> and
 <code><a href="Streamly-Data-Unfold.html#v:crossWith" title="Streamly.Data.Unfold">crossWith</a></code> operations as an alternative to a subset of use cases of
 <code><a href="../base-4.16.4.0/Data-List.html#v:concatMap" title="Data.List">concatMap</a></code> and <code><a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> stream operations.</p><p><a href="Streamly-Prelude.html">Streamly.Prelude</a> exports polymorphic stream generation operations that
 provide the same functionality as unfolds in this module.  Since unfolds can
 be easily converted to streams, several modules in streamly provide only
 unfolds for serial stream generation.  We cannot use unfolds exclusively for
 stream generation as they do not support concurrency.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:unfoldrM">unfoldrM</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; (a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (b, a))) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:unfoldr">unfoldr</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (b, a)) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:function">function</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; (a -&gt; b) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:functionM">functionM</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:repeatM">repeatM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m (m a) a</li><li class="src short"><a href="#v:replicateM">replicateM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m (m a) a</li><li class="src short"><a href="#v:iterateM">iterateM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m a) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m (m a) a</li><li class="src short"><a href="#v:fromList">fromList</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m [a] a</li><li class="src short"><a href="#v:fromListM">fromListM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m [m a] a</li><li class="src short"><a href="#v:fromStream">fromStream</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m (t m a) a</li><li class="src short"><a href="#v:lmap">lmap</a> :: (a -&gt; c) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m c b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:lmapM">lmapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m c) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m c b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:mapM">mapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a c</li><li class="src short"><a href="#v:takeWhileM">takeWhileM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:takeWhile">takeWhile</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:take">take</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:filter">filter</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:filterM">filterM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:drop">drop</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:dropWhile">dropWhile</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:dropWhileM">dropWhileM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b</li><li class="src short"><a href="#v:zipWith">zipWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; c -&gt; d) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a c -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a d</li><li class="src short"><a href="#v:crossWith">crossWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; c -&gt; d) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a c -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a d</li><li class="src short"><a href="#v:many">many</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m b c -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a c</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Unfold Type</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Unfold" class="def">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#Unfold" class="link">Source</a> <a href="#t:Unfold" class="selflink">#</a></p><div class="doc"><p>An <code>Unfold m a b</code> is a generator of a stream of values of type <code>b</code> from a
 seed of type <code>a</code> in <code><a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> <code>m</code>.</p><p><em>Since: 0.7.0</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Unfold">Instances</h4><details id="i:Unfold" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Unfold:Functor:1"></span> <a href="../base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m =&gt; <a href="../base-4.16.4.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a)</span> <a href="src/Streamly.Internal.Data.Unfold.Type.html#line-303" class="link">Source</a> <a href="#t:Unfold" class="selflink">#</a></td><td class="doc"><p>Maps a function on the output of the unfold (the type <code>b</code>).</p></td></tr><tr><td colspan="2"><details id="i:id:Unfold:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Unfold-Type.html">Streamly.Internal.Data.Unfold.Type</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a0 -&gt; b) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a a0 -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a0 -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a a0 <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Unfolds</h1></a><a href="#g:3" id="g:3"><h2>Basic Constructors</h2></a><div class="top"><p class="src"><a id="v:unfoldrM" class="def">unfoldrM</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; (a -&gt; m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (b, a))) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#unfoldrM" class="link">Source</a> <a href="#v:unfoldrM" class="selflink">#</a></p><div class="doc"><p>Build a stream by unfolding a <em>monadic</em> step function starting from a seed.
 The step function returns the next element in the stream and the next seed
 value. When it is done it returns <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> and the stream ends.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:unfoldr" class="def">unfoldr</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; (a -&gt; <a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (b, a)) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#unfoldr" class="link">Source</a> <a href="#v:unfoldr" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Data-Unfold.html#v:unfoldrM" title="Streamly.Data.Unfold">unfoldrM</a></code> but uses a pure step function.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong> f [] = Nothing
 f (x:xs) = Just (x, xs)
:}
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Unfold.fold Fold.toList (Unfold.unfoldr f) [1,2,3]
</code></strong>[1,2,3]
</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:function" class="def">function</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; (a -&gt; b) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#function" class="link">Source</a> <a href="#v:function" class="selflink">#</a></p><div class="doc"><p>Lift a pure function into an unfold. The unfold generates a singleton
 stream.</p><pre>function f = functionM $ return . f</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:functionM" class="def">functionM</a> :: <a href="../base-4.16.4.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#functionM" class="link">Source</a> <a href="#v:functionM" class="selflink">#</a></p><div class="doc"><p>Lift a monadic function into an unfold. The unfold generates a singleton
 stream.</p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:4" id="g:4"><h2>Generators</h2></a><div class="doc"><p>Generate a monadic stream from a seed.</p></div><div class="top"><p class="src"><a id="v:repeatM" class="def">repeatM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m (m a) a <a href="src/Streamly.Internal.Data.Unfold.html#repeatM" class="link">Source</a> <a href="#v:repeatM" class="selflink">#</a></p><div class="doc"><p>Generates an infinite stream repeating the seed.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:replicateM" class="def">replicateM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m (m a) a <a href="src/Streamly.Internal.Data.Unfold.html#replicateM" class="link">Source</a> <a href="#v:replicateM" class="selflink">#</a></p><div class="doc"><p>Generates a stream replicating the seed <code>n</code> times.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:iterateM" class="def">iterateM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m a) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m (m a) a <a href="src/Streamly.Internal.Data.Unfold.html#iterateM" class="link">Source</a> <a href="#v:iterateM" class="selflink">#</a></p><div class="doc"><p>Generates an infinite stream starting with the given seed and applying the
 given function repeatedly.</p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:5" id="g:5"><h2>From Containers</h2></a><div class="top"><p class="src"><a id="v:fromList" class="def">fromList</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m [a] a <a href="src/Streamly.Internal.Data.Unfold.html#fromList" class="link">Source</a> <a href="#v:fromList" class="selflink">#</a></p><div class="doc"><p>Convert a list of pure values to a <code><a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a></code></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:fromListM" class="def">fromListM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m [m a] a <a href="src/Streamly.Internal.Data.Unfold.html#fromListM" class="link">Source</a> <a href="#v:fromListM" class="selflink">#</a></p><div class="doc"><p>Convert a list of monadic values to a <code><a href="Streamly-Internal-Data-Stream-StreamD-Type.html#t:Stream" title="Streamly.Internal.Data.Stream.StreamD.Type">Stream</a></code></p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:fromStream" class="def">fromStream</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m (t m a) a <a href="src/Streamly.Internal.Data.Unfold.html#fromStream" class="link">Source</a> <a href="#v:fromStream" class="selflink">#</a></p><div class="doc"><p>Convert a stream into an <code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code>. Note that a stream converted to an
 <code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code> may not be as efficient as an <code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code> in some situations.</p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:6" id="g:6"><h1>Combinators</h1></a><a href="#g:7" id="g:7"><h2>Mapping on Input</h2></a><div class="top"><p class="src"><a id="v:lmap" class="def">lmap</a> :: (a -&gt; c) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m c b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#lmap" class="link">Source</a> <a href="#v:lmap" class="selflink">#</a></p><div class="doc"><p>Map a function on the input argument of the <code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u = Unfold.lmap (fmap (+1)) Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Unfold.fold Fold.toList u [1..5]
</code></strong>[2,3,4,5,6]
</pre><pre>lmap f = Unfold.many (Unfold.function f)
</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:lmapM" class="def">lmapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m c) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m c b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#lmapM" class="link">Source</a> <a href="#v:lmapM" class="selflink">#</a></p><div class="doc"><p>Map an action on the input argument of the <code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code>.</p><pre>lmapM f = Unfold.many (Unfold.functionM f)
</pre><p><em>Since: 0.8.0</em></p></div></div><a href="#g:8" id="g:8"><h2>Mapping on Output</h2></a><div class="top"><p class="src"><a id="v:mapM" class="def">mapM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a c <a href="src/Streamly.Internal.Data.Unfold.html#mapM" class="link">Source</a> <a href="#v:mapM" class="selflink">#</a></p><div class="doc"><p>Apply a monadic function to each element of the stream and replace it
 with the output of the resulting action.</p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:9" id="g:9"><h2>Filtering</h2></a><div class="top"><p class="src"><a id="v:takeWhileM" class="def">takeWhileM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#takeWhileM" class="link">Source</a> <a href="#v:takeWhileM" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Streamly-Data-Unfold.html#v:takeWhile" title="Streamly.Data.Unfold">takeWhile</a></code> but with a monadic predicate.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:takeWhile" class="def">takeWhile</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.Type.html#takeWhile" class="link">Source</a> <a href="#v:takeWhile" class="selflink">#</a></p><div class="doc"><p>End the stream generated by the <code><a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a></code> as soon as the predicate fails
 on an element.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:take" class="def">take</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.html#take" class="link">Source</a> <a href="#v:take" class="selflink">#</a></p><div class="doc"><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u = Unfold.take 2 Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Unfold.fold Fold.toList u [1..100]
</code></strong>[1,2]
</pre><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:filter" class="def">filter</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.html#filter" class="link">Source</a> <a href="#v:filter" class="selflink">#</a></p><div class="doc"><p>Include only those elements that pass a predicate.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:filterM" class="def">filterM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.html#filterM" class="link">Source</a> <a href="#v:filterM" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Streamly-Data-Unfold.html#v:filter" title="Streamly.Data.Unfold">filter</a></code> but with a monadic predicate.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:drop" class="def">drop</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.html#drop" class="link">Source</a> <a href="#v:drop" class="selflink">#</a></p><div class="doc"><p><code>drop n unf</code> drops <code>n</code> elements from the stream generated by <code>unf</code>.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:dropWhile" class="def">dropWhile</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.html#dropWhile" class="link">Source</a> <a href="#v:dropWhile" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Streamly-Data-Unfold.html#v:dropWhileM" title="Streamly.Data.Unfold">dropWhileM</a></code> but with a pure condition function.</p><p><em>Since: 0.8.0</em></p></div></div><div class="top"><p class="src"><a id="v:dropWhileM" class="def">dropWhileM</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m <a href="../base-4.16.4.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b <a href="src/Streamly.Internal.Data.Unfold.html#dropWhileM" class="link">Source</a> <a href="#v:dropWhileM" class="selflink">#</a></p><div class="doc"><p><code>dropWhileM f unf</code> drops elements from the stream generated by <code>unf</code> while
 the condition holds true. The condition function <code>f</code> is <em>monadic</em> in nature.</p><p><em>Since: 0.8.0</em></p></div></div><a href="#g:10" id="g:10"><h2>Zipping</h2></a><div class="top"><p class="src"><a id="v:zipWith" class="def">zipWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; c -&gt; d) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a c -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a d <a href="src/Streamly.Internal.Data.Unfold.Type.html#zipWith" class="link">Source</a> <a href="#v:zipWith" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Unfold-Type.html#v:zipWithM" title="Streamly.Internal.Data.Unfold.Type">zipWithM</a></code> but with a pure zip function.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>square = fmap (\x -&gt; x * x) Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>cube = fmap (\x -&gt; x * x * x) Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u = Unfold.zipWith (,) square cube
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Unfold.fold Fold.toList u [1..5]
</code></strong>[(1,1),(4,8),(9,27),(16,64),(25,125)]
</pre><pre>zipWith f = zipWithM (\a b -&gt; return $ f a b)</pre><p><em>Since: 0.8.0</em></p></div></div><a href="#g:11" id="g:11"><h2>Cross Product</h2></a><div class="top"><p class="src"><a id="v:crossWith" class="def">crossWith</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; c -&gt; d) -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a c -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a d <a href="src/Streamly.Internal.Data.Unfold.Type.html#crossWith" class="link">Source</a> <a href="#v:crossWith" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Unfold-Type.html#v:crossWithM" title="Streamly.Internal.Data.Unfold.Type">crossWithM</a></code> but uses a pure combining function.</p><pre>crossWith f = crossWithM (\b c -&gt; return $ f b c)</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u1 = Unfold.lmap fst Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u2 = Unfold.lmap snd Unfold.fromList
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>u = Unfold.crossWith (,) u1 u2
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Unfold.fold Fold.toList u ([1,2,3], [4,5,6])
</code></strong>[(1,4),(1,5),(1,6),(2,4),(2,5),(2,6),(3,4),(3,5),(3,6)]
</pre><p><em>Since: 0.8.0</em></p></div></div><a href="#g:12" id="g:12"><h2>Nesting</h2></a><div class="top"><p class="src"><a id="v:many" class="def">many</a> :: <a href="../base-4.16.4.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a b -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m b c -&gt; <a href="Streamly-Data-Unfold.html#t:Unfold" title="Streamly.Data.Unfold">Unfold</a> m a c <a href="src/Streamly.Internal.Data.Unfold.Type.html#many" class="link">Source</a> <a href="#v:many" class="selflink">#</a></p><div class="doc"><p>Apply the second unfold to each output element of the first unfold and
 flatten the output in a single stream.</p><p><em>Since: 0.8.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>