<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Streamly.Internal.FileSystem.Handle</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">streamly-0.8.1.1: Dataflow programming and declarative concurrency</span><ul class="links" id="page-menu"><li><a href="src/Streamly.Internal.FileSystem.Handle.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2018 Composewell Technologies</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Internal.FileSystem.Handle</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Singleton APIs</a></li><li><a href="#g:2">Byte Stream Read</a></li><li><a href="#g:3">Chunked Stream Read</a></li><li><a href="#g:4">Byte Stream Write</a></li><li><a href="#g:5">Chunked Stream Write</a></li><li><a href="#g:6">Random Access (Seek)</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The fundamental singleton IO APIs are <code><a href="Streamly-Internal-FileSystem-Handle.html#v:getChunk" title="Streamly.Internal.FileSystem.Handle">getChunk</a></code> and <code><a href="Streamly-Internal-FileSystem-Handle.html#v:putChunk" title="Streamly.Internal.FileSystem.Handle">putChunk</a></code> and the
 fundamental stream IO APIs built on top of those are
 <code><a href="Streamly-Internal-FileSystem-Handle.html#v:readChunksWithBufferOf" title="Streamly.Internal.FileSystem.Handle">readChunksWithBufferOf</a></code> and <code><a href="Streamly-Internal-FileSystem-Handle.html#v:writeChunks" title="Streamly.Internal.FileSystem.Handle">writeChunks</a></code>. Rest of this module is just
 combinatorial programming using these.</p><p>We can achieve line buffering by folding lines in the input stream into a
 stream of arrays using Stream.splitOn or Fold.takeEndBy_ and similar
 operations. One can wrap the input stream in <code><a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> type and then use
 <code><a href="Streamly-Internal-FileSystem-Handle.html#v:writeMaybesWithBufferOf" title="Streamly.Internal.FileSystem.Handle">writeMaybesWithBufferOf</a></code> to achieve user controlled buffering.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:getChunk">getChunk</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li class="src short"><a href="#v:getChunkOf">getChunkOf</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li class="src short"><a href="#v:putChunk">putChunk</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a -&gt; m ()</li><li class="src short"><a href="#v:read">read</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></li><li class="src short"><a href="#v:readWithBufferOf">readWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a>) <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></li><li class="src short"><a href="#v:toBytes">toBytes</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; t m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></li><li class="src short"><a href="#v:toBytesWithBufferOf">toBytesWithBufferOf</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; t m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></li><li class="src short"><a href="#v:readChunks">readChunks</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li class="src short"><a href="#v:readChunksWithBufferOf">readChunksWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a>) (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li class="src short"><a href="#v:toChunksWithBufferOf">toChunksWithBufferOf</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; t m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li class="src short"><a href="#v:toChunks">toChunks</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; t m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li><li class="src short"><a href="#v:write">write</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> ()</li><li class="src short"><a href="#v:consumer">consumer</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Refold-Type.html#t:Refold" title="Streamly.Internal.Data.Refold.Type">Refold</a> m <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> ()</li><li class="src short"><a href="#v:writeWithBufferOf">writeWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> ()</li><li class="src short"><a href="#v:writeMaybesWithBufferOf">writeMaybesWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) ()</li><li class="src short"><a href="#v:putBytes">putBytes</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; m ()</li><li class="src short"><a href="#v:putBytesWithBufferOf">putBytesWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; m ()</li><li class="src short"><a href="#v:writeChunks">writeChunks</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) ()</li><li class="src short"><a href="#v:writeChunksWithBufferOf">writeChunksWithBufferOf</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) ()</li><li class="src short"><a href="#v:putChunksWithBufferOf">putChunksWithBufferOf</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) -&gt; m ()</li><li class="src short"><a href="#v:putChunks">putChunks</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) -&gt; m ()</li><li class="src short"><a href="#v:readChunksFromToWith">readChunksFromToWith</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a>) (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Singleton APIs</h1></a><div class="top"><p class="src"><a id="v:getChunk" class="def">getChunk</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Streamly.Internal.FileSystem.Handle.html#getChunk" class="link">Source</a> <a href="#v:getChunk" class="selflink">#</a></p><div class="doc"><p>Read a <code>ByteArray</code> consisting of one or more bytes from a file handle. If
 no data is available on the handle it blocks until at least one byte becomes
 available. If any data is available then it immediately returns that data
 without blocking. As a result of this behavior, it may read less than or
 equal to the size requested.</p><p><em>Since: 0.8.1</em></p></div></div><div class="top"><p class="src"><a id="v:getChunkOf" class="def">getChunkOf</a> :: <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Streamly.Internal.FileSystem.Handle.html#getChunkOf" class="link">Source</a> <a href="#v:getChunkOf" class="selflink">#</a></p><div class="doc"><p>Read a <code>ByteArray</code> consisting of exactly the specified number of bytes
 from a file handle.</p><p><em>Unimplemented</em></p></div></div><div class="top"><p class="src"><a id="v:putChunk" class="def">putChunk</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a -&gt; m () <a href="src/Streamly.Internal.FileSystem.Handle.html#putChunk" class="link">Source</a> <a href="#v:putChunk" class="selflink">#</a></p><div class="doc"><p>Write an <code><a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a></code> to a file handle.</p><p><em>Since: 0.8.1</em></p></div></div><a href="#g:2" id="g:2"><h1>Byte Stream Read</h1></a><div class="top"><p class="src"><a id="v:read" class="def">read</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="src/Streamly.Internal.FileSystem.Handle.html#read" class="link">Source</a> <a href="#v:read" class="selflink">#</a></p><div class="doc"><p>Unfolds a file handle into a byte stream. IO requests to the device are
 performed in sizes of
 <code><a href="Streamly-Internal-Data-Array-Foreign-Type.html#v:defaultChunkSize" title="Streamly.Internal.Data.Array.Foreign.Type">defaultChunkSize</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>read = Unfold.many Handle.readChunks Array.read
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:readWithBufferOf" class="def">readWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a>) <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="src/Streamly.Internal.FileSystem.Handle.html#readWithBufferOf" class="link">Source</a> <a href="#v:readWithBufferOf" class="selflink">#</a></p><div class="doc"><p>Unfolds the tuple <code>(bufsize, handle)</code> into a byte stream, read requests
 to the IO device are performed using buffers of <code>bufsize</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>readWithBufferOf = Unfold.many Handle.readChunksWithBufferOf Array.read
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:toBytes" class="def">toBytes</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; t m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="src/Streamly.Internal.FileSystem.Handle.html#toBytes" class="link">Source</a> <a href="#v:toBytes" class="selflink">#</a></p><div class="doc"><p>Generate a byte stream from a file <code><a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>toBytes h = Stream.unfoldMany Array.read $ Handle.toChunks h
</code></strong></pre><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:toBytesWithBufferOf" class="def">toBytesWithBufferOf</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; t m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> <a href="src/Streamly.Internal.FileSystem.Handle.html#toBytesWithBufferOf" class="link">Source</a> <a href="#v:toBytesWithBufferOf" class="selflink">#</a></p><div class="doc"><p><code>toBytesWithBufferOf bufsize handle</code> reads a byte stream from a file
 handle, reads are performed in chunks of up to <code>bufsize</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>toBytesWithBufferOf size h = Stream.unfoldMany Array.read $ Handle.toChunksWithBufferOf size h
</code></strong></pre><p><em>Pre-release</em></p></div></div><a href="#g:3" id="g:3"><h1>Chunked Stream Read</h1></a><div class="top"><p class="src"><a id="v:readChunks" class="def">readChunks</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Streamly.Internal.FileSystem.Handle.html#readChunks" class="link">Source</a> <a href="#v:readChunks" class="selflink">#</a></p><div class="doc"><p>Unfolds a handle into a stream of <code><a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></code> arrays. Requests to the IO
 device are performed using a buffer of size
 <code><a href="Streamly-Internal-Data-Array-Foreign-Type.html#v:defaultChunkSize" title="Streamly.Internal.Data.Array.Foreign.Type">defaultChunkSize</a></code>. The
 size of arrays in the resulting stream are therefore less than or equal to
 <code><a href="Streamly-Internal-Data-Array-Foreign-Type.html#v:defaultChunkSize" title="Streamly.Internal.Data.Array.Foreign.Type">defaultChunkSize</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>readChunks = Unfold.supplyFirst IO.defaultChunkSize Handle.readChunksWithBufferOf
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:readChunksWithBufferOf" class="def">readChunksWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a>) (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Streamly.Internal.FileSystem.Handle.html#readChunksWithBufferOf" class="link">Source</a> <a href="#v:readChunksWithBufferOf" class="selflink">#</a></p><div class="doc"><p>Unfold the tuple <code>(bufsize, handle)</code> into a stream of <code><a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></code> arrays.
 Read requests to the IO device are performed using a buffer of size
 <code>bufsize</code>.  The size of an array in the resulting stream is always less than
 or equal to <code>bufsize</code>.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:toChunksWithBufferOf" class="def">toChunksWithBufferOf</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; t m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Streamly.Internal.FileSystem.Handle.html#toChunksWithBufferOf" class="link">Source</a> <a href="#v:toChunksWithBufferOf" class="selflink">#</a></p><div class="doc"><p><code>toChunksWithBufferOf size handle</code> reads a stream of arrays from the file
 handle <code>handle</code>.  The maximum size of a single array is limited to <code>size</code>.
 The actual size read may be less than or equal to <code>size</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>toChunksWithBufferOf size h = Stream.unfold Handle.readChunksWithBufferOf (size, h)
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:toChunks" class="def">toChunks</a> :: (<a href="Streamly-Internal-Data-Stream-IsStream-Type.html#t:IsStream" title="Streamly.Internal.Data.Stream.IsStream.Type">IsStream</a> t, <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; t m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Streamly.Internal.FileSystem.Handle.html#toChunks" class="link">Source</a> <a href="#v:toChunks" class="selflink">#</a></p><div class="doc"><p><code>toChunks handle</code> reads a stream of arrays from the specified file
 handle.  The maximum size of a single array is limited to
 <code>defaultChunkSize</code>. The actual size read may be less than or equal to
 <code>defaultChunkSize</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>toChunks = Handle.toChunksWithBufferOf IO.defaultChunkSize
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:4" id="g:4"><h1>Byte Stream Write</h1></a><div class="top"><p class="src"><a id="v:write" class="def">write</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> () <a href="src/Streamly.Internal.FileSystem.Handle.html#write" class="link">Source</a> <a href="#v:write" class="selflink">#</a></p><div class="doc"><p>Write a byte stream to a file handle. Accumulates the input in chunks of
 up to <code><a href="Streamly-Internal-Data-Array-Foreign-Type.html#v:defaultChunkSize" title="Streamly.Internal.Data.Array.Foreign.Type">defaultChunkSize</a></code> before writing
 to the IO device.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>write = Handle.writeWithBufferOf IO.defaultChunkSize
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:consumer" class="def">consumer</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Refold-Type.html#t:Refold" title="Streamly.Internal.Data.Refold.Type">Refold</a> m <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> () <a href="src/Streamly.Internal.FileSystem.Handle.html#consumer" class="link">Source</a> <a href="#v:consumer" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-FileSystem-Handle.html#v:write" title="Streamly.Internal.FileSystem.Handle">write</a></code>  but uses the experimental <code><a href="Streamly-Internal-Data-Refold-Type.html#t:Refold" title="Streamly.Internal.Data.Refold.Type">Refold</a></code> API.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:writeWithBufferOf" class="def">writeWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> () <a href="src/Streamly.Internal.FileSystem.Handle.html#writeWithBufferOf" class="link">Source</a> <a href="#v:writeWithBufferOf" class="selflink">#</a></p><div class="doc"><p><code>writeWithBufferOf reqSize handle</code> writes the input stream to <code>handle</code>.
 Bytes in the input stream are collected into a buffer until we have a chunk
 of <code>reqSize</code> and then written to the IO device.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>writeWithBufferOf n h = Fold.chunksOf n (Array.writeNUnsafe n) (Handle.writeChunks h)
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:writeMaybesWithBufferOf" class="def">writeMaybesWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) () <a href="src/Streamly.Internal.FileSystem.Handle.html#writeMaybesWithBufferOf" class="link">Source</a> <a href="#v:writeMaybesWithBufferOf" class="selflink">#</a></p><div class="doc"><p>Write a stream of <code><a href="../base-4.16.4.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> values. Keep buffering the just values in an
 array until a <code><a href="../base-4.16.4.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> is encountered or the buffer size exceeds the
 specified limit, at that point flush the buffer to the handle.</p><p><em>Pre-release</em></p></div></div><div class="top"><p class="src"><a id="v:putBytes" class="def">putBytes</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; m () <a href="src/Streamly.Internal.FileSystem.Handle.html#putBytes" class="link">Source</a> <a href="#v:putBytes" class="selflink">#</a></p><div class="doc"><p>Write a byte stream to a file handle. Accumulates the input in chunks of
 up to <code><a href="Streamly-Internal-Data-Array-Foreign-Type.html#v:defaultChunkSize" title="Streamly.Internal.Data.Array.Foreign.Type">defaultChunkSize</a></code> before writing.</p><p>NOTE: This may perform better than the <code><a href="Streamly-Internal-FileSystem-Handle.html#v:write" title="Streamly.Internal.FileSystem.Handle">write</a></code> fold, you can try this if you
 need some extra perf boost.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>putBytes = Handle.putBytesWithBufferOf IO.defaultChunkSize
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:putBytesWithBufferOf" class="def">putBytesWithBufferOf</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; m () <a href="src/Streamly.Internal.FileSystem.Handle.html#putBytesWithBufferOf" class="link">Source</a> <a href="#v:putBytesWithBufferOf" class="selflink">#</a></p><div class="doc"><p><code>putBytesWithBufferOf bufsize handle stream</code> writes <code>stream</code> to <code>handle</code>
 in chunks of <code>bufsize</code>.  A write is performed to the IO device as soon as we
 collect the required input size.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>putBytesWithBufferOf n h m = Handle.putChunks h $ Stream.arraysOf n m
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:5" id="g:5"><h1>Chunked Stream Write</h1></a><div class="top"><p class="src"><a id="v:writeChunks" class="def">writeChunks</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) () <a href="src/Streamly.Internal.FileSystem.Handle.html#writeChunks" class="link">Source</a> <a href="#v:writeChunks" class="selflink">#</a></p><div class="doc"><p>Write a stream of arrays to a handle. Each array in the stream is written
 to the device as a separate IO request.</p><p>writeChunks h = Fold.drainBy (Handle.putChunk h)</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:writeChunksWithBufferOf" class="def">writeChunksWithBufferOf</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Fold-Type.html#t:Fold" title="Streamly.Internal.Data.Fold.Type">Fold</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) () <a href="src/Streamly.Internal.FileSystem.Handle.html#writeChunksWithBufferOf" class="link">Source</a> <a href="#v:writeChunksWithBufferOf" class="selflink">#</a></p><div class="doc"><p><code>writeChunksWithBufferOf bufsize handle</code> writes a stream of arrays
 to <code>handle</code> after coalescing the adjacent arrays in chunks of <code>bufsize</code>.
 We never split an array, if a single array is bigger than the specified size
 it emitted as it is. Multiple arrays are coalesed as long as the total size
 remains below the specified size.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:putChunksWithBufferOf" class="def">putChunksWithBufferOf</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) -&gt; m () <a href="src/Streamly.Internal.FileSystem.Handle.html#putChunksWithBufferOf" class="link">Source</a> <a href="#v:putChunksWithBufferOf" class="selflink">#</a></p><div class="doc"><p><code>putChunksWithBufferOf bufsize handle stream</code> writes a stream of arrays
 to <code>handle</code> after coalescing the adjacent arrays in chunks of <code>bufsize</code>.
 The chunk size is only a maximum and the actual writes could be smaller as
 we do not split the arrays to fit exactly to the specified size.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:putChunks" class="def">putChunks</a> :: (<a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../base-4.16.4.0/Foreign-Storable.html#t:Storable" title="Foreign.Storable">Storable</a> a) =&gt; <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a> -&gt; <a href="Streamly-Internal-Data-Stream-Serial.html#t:SerialT" title="Streamly.Internal.Data.Stream.Serial">SerialT</a> m (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> a) -&gt; m () <a href="src/Streamly.Internal.FileSystem.Handle.html#putChunks" class="link">Source</a> <a href="#v:putChunks" class="selflink">#</a></p><div class="doc"><p>Write a stream of arrays to a handle.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>putChunks h = Stream.mapM_ (Handle.putChunk h)
</code></strong></pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:6" id="g:6"><h1>Random Access (Seek)</h1></a><div class="doc"><p>Unlike the streaming APIs listed above, these APIs apply to devices or
 files that have random access or seek capability.  This type of devices
 include disks, files, memory devices and exclude terminals, pipes,
 sockets and fifos.</p></div><div class="top"><p class="src"><a id="v:readChunksFromToWith" class="def">readChunksFromToWith</a> :: <a href="../base-4.16.4.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="Streamly-Internal-Data-Unfold-Type.html#t:Unfold" title="Streamly.Internal.Data.Unfold.Type">Unfold</a> m (<a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/Data-Int.html#t:Int" title="Data.Int">Int</a>, <a href="../base-4.16.4.0/System-IO.html#t:Handle" title="System.IO">Handle</a>) (<a href="Streamly-Internal-Data-Array-Foreign-Type.html#t:Array" title="Streamly.Internal.Data.Array.Foreign.Type">Array</a> <a href="../base-4.16.4.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a>) <a href="src/Streamly.Internal.FileSystem.Handle.html#readChunksFromToWith" class="link">Source</a> <a href="#v:readChunksFromToWith" class="selflink">#</a></p><div class="doc"><p>The input to the unfold is <code>(from, to, bufferSize, handle)</code>. It starts
 reading from the offset <code>from</code> in the file and reads up to the offset <code>to</code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.26.0</p></div></body></html>