<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">{- | /This module is deprecated, use &quot;Scoring.FunTyped&quot; instead./

 Semiring scores with &quot;holes&quot;.
 Holes are used to express &quot;partially applied&quot; scores that occur
 when the score of a verticalization (unspread) is distributed to two parent edges.
 The full score of the operation is restored when the two parent edges are eventually combined again.

 This module implements partial scores using lists,
 which is slow and not very elegant.
 The grammar combinators are partial and will fail if used incorrectly,
 indicating parser bugs.
-}</span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Scoring.Deprecated.Flat</span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * The Score Type</span></span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier">Score</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier">Holes</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#val"><span class="hs-identifier">val</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier">LeftId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier">RightId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#leftSide"><span class="hs-identifier">leftSide</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#rightSide"><span class="hs-identifier">rightSide</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#showScore"><span class="hs-identifier">showScore</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Semiring operations</span></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-comment">-- | Semiring operations can be lifted to partial scores,</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-comment">-- but since it is not guaranteed that their arguments can be combined,</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-comment">-- they are partial.</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier">times</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#plus"><span class="hs-identifier">plus</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-comment">-- * grammatical combinators</span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-comment">-- | The following combinators correspond to the unsplit and unspread operations</span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-comment">-- of the path-graph grammar.</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#unsplitScores"><span class="hs-identifier">unsplitScores</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#unspreadScoresLeft"><span class="hs-identifier">unspreadScoresLeft</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#unspreadScoresRight"><span class="hs-identifier">unspreadScoresRight</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#addScores"><span class="hs-identifier">addScores</span></a></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#getScoreVal"><span class="hs-identifier">getScoreVal</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NFData</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hashable</span></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Semiring</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">R</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- Score type --</span><span>
</span><span id="line-57"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-comment">-- | Newtype for the left ID of a partial score.</span><span>
</span><span id="line-60"></span><span id="local-6989586621679534095"><span id="local-6989586621679534096"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="LeftId"><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-var">LeftId</span></a></span></span><span> </span><span id="local-6989586621679534340"><span class="annot"><a href="#local-6989586621679534340"><span class="hs-identifier hs-type">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LeftId"><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-var">LeftId</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679534340"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679534087"><span id="local-6989586621679534091"><span class="annot"><span class="annottext">LeftId i -&gt; LeftId i -&gt; Bool
forall i. Eq i =&gt; LeftId i -&gt; LeftId i -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: LeftId i -&gt; LeftId i -&gt; Bool
$c/= :: forall i. Eq i =&gt; LeftId i -&gt; LeftId i -&gt; Bool
== :: LeftId i -&gt; LeftId i -&gt; Bool
$c== :: forall i. Eq i =&gt; LeftId i -&gt; LeftId i -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679534053"><span id="local-6989586621679534057"><span id="local-6989586621679534061"><span id="local-6989586621679534065"><span id="local-6989586621679534069"><span id="local-6989586621679534073"><span id="local-6989586621679534077"><span class="annot"><span class="annottext">LeftId i -&gt; LeftId i -&gt; Bool
LeftId i -&gt; LeftId i -&gt; Ordering
LeftId i -&gt; LeftId i -&gt; LeftId i
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {i}. Ord i =&gt; Eq (LeftId i)
forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; Bool
forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; Ordering
forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; LeftId i
min :: LeftId i -&gt; LeftId i -&gt; LeftId i
$cmin :: forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; LeftId i
max :: LeftId i -&gt; LeftId i -&gt; LeftId i
$cmax :: forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; LeftId i
&gt;= :: LeftId i -&gt; LeftId i -&gt; Bool
$c&gt;= :: forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; Bool
&gt; :: LeftId i -&gt; LeftId i -&gt; Bool
$c&gt; :: forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; Bool
&lt;= :: LeftId i -&gt; LeftId i -&gt; Bool
$c&lt;= :: forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; Bool
&lt; :: LeftId i -&gt; LeftId i -&gt; Bool
$c&lt; :: forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; Bool
compare :: LeftId i -&gt; LeftId i -&gt; Ordering
$ccompare :: forall i. Ord i =&gt; LeftId i -&gt; LeftId i -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall i x. Rep (LeftId i) x -&gt; LeftId i
forall i x. LeftId i -&gt; Rep (LeftId i) x
$cto :: forall i x. Rep (LeftId i) x -&gt; LeftId i
$cfrom :: forall i x. LeftId i -&gt; Rep (LeftId i) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679534039"><span id="local-6989586621679534041"><span class="annot"><span class="annottext">forall a. Eq a -&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
forall {i}. Hashable i =&gt; Eq (LeftId i)
forall i. Hashable i =&gt; Int -&gt; LeftId i -&gt; Int
forall i. Hashable i =&gt; LeftId i -&gt; Int
hash :: LeftId i -&gt; Int
$chash :: forall i. Hashable i =&gt; LeftId i -&gt; Int
hashWithSalt :: Int -&gt; LeftId i -&gt; Int
$chashWithSalt :: forall i. Hashable i =&gt; Int -&gt; LeftId i -&gt; Int
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679534036"><span class="annot"><span class="annottext">forall i. NFData i =&gt; LeftId i -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: LeftId i -&gt; ()
$crnf :: forall i. NFData i =&gt; LeftId i -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679534030"><span id="local-6989586621679534033"><span id="local-6989586621679534332"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534332"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-type">LeftId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534332"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>  </span><span id="local-6989586621679534027"><span class="annot"><span class="annottext">show :: LeftId i -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-type">LeftId</span></a></span><span> </span><span id="local-6989586621679534025"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679534025"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679534025"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-comment">-- | Newtype for the right ID of a partial score.</span><span>
</span><span id="line-68"></span><span id="local-6989586621679534023"><span id="local-6989586621679534024"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="RightId"><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-var">RightId</span></a></span></span><span> </span><span id="local-6989586621679534329"><span class="annot"><a href="#local-6989586621679534329"><span class="hs-identifier hs-type">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RightId"><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-var">RightId</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679534329"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679534015"><span id="local-6989586621679534019"><span class="annot"><span class="annottext">RightId i -&gt; RightId i -&gt; Bool
forall i. Eq i =&gt; RightId i -&gt; RightId i -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RightId i -&gt; RightId i -&gt; Bool
$c/= :: forall i. Eq i =&gt; RightId i -&gt; RightId i -&gt; Bool
== :: RightId i -&gt; RightId i -&gt; Bool
$c== :: forall i. Eq i =&gt; RightId i -&gt; RightId i -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679533982"><span id="local-6989586621679533986"><span id="local-6989586621679533990"><span id="local-6989586621679533994"><span id="local-6989586621679533998"><span id="local-6989586621679534002"><span id="local-6989586621679534006"><span class="annot"><span class="annottext">RightId i -&gt; RightId i -&gt; Bool
RightId i -&gt; RightId i -&gt; Ordering
RightId i -&gt; RightId i -&gt; RightId i
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {i}. Ord i =&gt; Eq (RightId i)
forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; Bool
forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; Ordering
forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; RightId i
min :: RightId i -&gt; RightId i -&gt; RightId i
$cmin :: forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; RightId i
max :: RightId i -&gt; RightId i -&gt; RightId i
$cmax :: forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; RightId i
&gt;= :: RightId i -&gt; RightId i -&gt; Bool
$c&gt;= :: forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; Bool
&gt; :: RightId i -&gt; RightId i -&gt; Bool
$c&gt; :: forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; Bool
&lt;= :: RightId i -&gt; RightId i -&gt; Bool
$c&lt;= :: forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; Bool
&lt; :: RightId i -&gt; RightId i -&gt; Bool
$c&lt; :: forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; Bool
compare :: RightId i -&gt; RightId i -&gt; Ordering
$ccompare :: forall i. Ord i =&gt; RightId i -&gt; RightId i -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall i x. Rep (RightId i) x -&gt; RightId i
forall i x. RightId i -&gt; Rep (RightId i) x
$cto :: forall i x. Rep (RightId i) x -&gt; RightId i
$cfrom :: forall i x. RightId i -&gt; Rep (RightId i) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679533975"><span class="annot"><span class="annottext">forall i. NFData i =&gt; RightId i -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: RightId i -&gt; ()
$crnf :: forall i. NFData i =&gt; RightId i -&gt; ()
</span><a href="#local-6989586621679533975"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679533969"><span id="local-6989586621679533971"><span class="annot"><span class="annottext">forall a. Eq a -&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
forall {i}. Hashable i =&gt; Eq (RightId i)
forall i. Hashable i =&gt; Int -&gt; RightId i -&gt; Int
forall i. Hashable i =&gt; RightId i -&gt; Int
hash :: RightId i -&gt; Int
$chash :: forall i. Hashable i =&gt; RightId i -&gt; Int
hashWithSalt :: Int -&gt; RightId i -&gt; Int
$chashWithSalt :: forall i. Hashable i =&gt; Int -&gt; RightId i -&gt; Int
</span><a href="#local-6989586621679533969"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679533964"><span id="local-6989586621679533967"><span id="local-6989586621679534327"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534327"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-type">RightId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534327"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-73"></span><span>  </span><span id="local-6989586621679533962"><span class="annot"><span class="annottext">show :: RightId i -&gt; String
</span><a href="#local-6989586621679533962"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-type">RightId</span></a></span><span> </span><span id="local-6989586621679533961"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679533961"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679533961"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="local-6989586621679534326"><span class="annot"><a href="Scoring.Deprecated.Flat.html#match"><span class="hs-identifier hs-type">match</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679534326"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-type">RightId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534326"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-type">LeftId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534326"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-76"></span><span id="match"><span class="annot"><span class="annottext">match :: forall a. Eq a =&gt; RightId a -&gt; LeftId a -&gt; Bool
</span><a href="Scoring.Deprecated.Flat.html#match"><span class="hs-identifier hs-var hs-var">match</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-type">RightId</span></a></span><span> </span><span id="local-6989586621679533957"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679533957"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-type">LeftId</span></a></span><span> </span><span id="local-6989586621679533956"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679533956"><span class="hs-identifier hs-var">il</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679533956"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679533957"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">-- | A type alias for the holes in a 'Score'.</span><span>
</span><span id="line-79"></span><span class="hs-keyword">type</span><span> </span><span id="Holes"><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-var">Holes</span></a></span></span><span> </span><span id="local-6989586621679533955"><span class="annot"><a href="#local-6989586621679533955"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679533955"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">{- | A partially applied score of type @s@.
 Comes in four variants,
 depending on whether the score is fully applied
 or needs to be combined on either or both sides.
 Values that need to be combined are lists that represent scores with holes.
 Each variant carries IDs of type @i@ that determine which objects fit on either of its sides.
 Only score objects with matching IDs can be combined.

 As a shorthand notation, we use @a-b@ to indicate a value
 that depends on @a@ on its left and on @b@ on its right.
 If the value does not depend on anything on either side, we use @()@,
 i.e. @()-a@ stands for @SLeft _ a@ and @()-()@ stands for @SVal _@.
-}</span><span>
</span><span id="line-94"></span><span id="local-6989586621679533953"><span id="local-6989586621679533954"></span></span><span class="hs-keyword">data</span><span> </span><span id="Score"><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-var">Score</span></a></span></span><span> </span><span id="local-6989586621679534322"><span class="annot"><a href="#local-6989586621679534322"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679534321"><span class="annot"><a href="#local-6989586621679534321"><span class="hs-identifier hs-type">i</span></a></span></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Carries a fully applied value</span><span>
</span><span id="line-96"></span><span>    </span><span id="SVal"><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-var">SVal</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679534322"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | The right part of a combination, expects an argument to its left.</span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-comment">-- Implemented as a list of right elements</span><span>
</span><span id="line-99"></span><span>    </span><span id="SRight"><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-var">SRight</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-type">LeftId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534321"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534322"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | The left part of a combination, expects an argument to its right.</span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-comment">-- Implemented as a list of right elements</span><span>
</span><span id="line-102"></span><span>    </span><span id="SLeft"><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-var">SLeft</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534322"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-type">RightId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534321"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | A combination of 'SLeft' and 'SRight' that expects arguments on both sides.</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-comment">-- Implemented as a list of right elements on the left</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-comment">-- and a list of left elements to the right</span><span>
</span><span id="line-106"></span><span>    </span><span id="SBoth"><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-var">SBoth</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-type">LeftId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534321"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534322"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534322"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-type">RightId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534321"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall s i x. Rep (Score s i) x -&gt; Score s i
forall s i x. Score s i -&gt; Rep (Score s i) x
$cto :: forall s i x. Rep (Score s i) x -&gt; Score s i
$cfrom :: forall s i x. Score s i -&gt; Rep (Score s i) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679533945"><span class="annot"><span class="annottext">forall a. (a -&gt; ()) -&gt; NFData a
forall s i. (NFData s, NFData i) =&gt; Score s i -&gt; ()
rnf :: Score s i -&gt; ()
$crnf :: forall s i. (NFData s, NFData i) =&gt; Score s i -&gt; ()
</span><a href="#local-6989586621679533945"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-comment">-- | Creates a simple value score of type ()-().</span><span>
</span><span id="line-110"></span><span id="local-6989586621679534319"><span id="local-6989586621679534320"><span class="annot"><a href="Scoring.Deprecated.Flat.html#val"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679534320"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534320"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534319"><span class="hs-identifier hs-type">i</span></a></span></span></span><span>
</span><span id="line-111"></span><span id="val"><span class="annot"><span class="annottext">val :: forall s i. s -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#val"><span class="hs-identifier hs-var hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s i. s -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-var">SVal</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">{- | Returns the ID on the left side of an 'Score',
 or 'Nothing' for 'SVal' and 'SLeft'.

 &gt; a-b -&gt; a
-}</span><span>
</span><span id="line-118"></span><span id="local-6989586621679534317"><span id="local-6989586621679534318"><span class="annot"><a href="Scoring.Deprecated.Flat.html#leftSide"><span class="hs-identifier hs-type">leftSide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534318"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534317"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-type">LeftId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534317"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-119"></span><span id="leftSide"><span class="annot"><span class="annottext">leftSide :: forall s i. Score s i -&gt; Maybe (LeftId i)
</span><a href="Scoring.Deprecated.Flat.html#leftSide"><span class="hs-identifier hs-var hs-var">leftSide</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-120"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#leftSide"><span class="hs-identifier hs-var">leftSide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-121"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#leftSide"><span class="hs-identifier hs-var">leftSide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span id="local-6989586621679533944"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533944"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533944"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-122"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#leftSide"><span class="hs-identifier hs-var">leftSide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span id="local-6989586621679533943"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533943"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533943"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">{- | Returns the ID on the right side of an 'Score',
 or 'Nothing' for 'SVal' and 'SRight'.

 &gt; a-b -&gt; b
-}</span><span>
</span><span id="line-129"></span><span id="local-6989586621679534312"><span id="local-6989586621679534313"><span class="annot"><a href="Scoring.Deprecated.Flat.html#rightSide"><span class="hs-identifier hs-type">rightSide</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534313"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534312"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-type">RightId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534312"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-130"></span><span id="rightSide"><span class="annot"><span class="annottext">rightSide :: forall s i. Score s i -&gt; Maybe (RightId i)
</span><a href="Scoring.Deprecated.Flat.html#rightSide"><span class="hs-identifier hs-var hs-var">rightSide</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-131"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#rightSide"><span class="hs-identifier hs-var">rightSide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679533942"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533942"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533942"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-132"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#rightSide"><span class="hs-identifier hs-var">rightSide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-133"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#rightSide"><span class="hs-identifier hs-var">rightSide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679533941"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533941"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533941"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- Show instance</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span id="local-6989586621679534309"><span class="annot"><a href="Scoring.Deprecated.Flat.html#showLeftHoles"><span class="hs-identifier hs-type">showLeftHoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534309"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679534309"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-138"></span><span id="showLeftHoles"><span class="annot"><span class="annottext">showLeftHoles :: forall a. Show a =&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showLeftHoles"><span class="hs-identifier hs-var hs-var">showLeftHoles</span></a></span></span><span> </span><span id="local-6989586621679533933"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679533933"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; _ &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679533933"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; _&quot;</span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span id="local-6989586621679533930"><span class="annot"><a href="Scoring.Deprecated.Flat.html#showRightHoles"><span class="hs-identifier hs-type">showRightHoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679533930"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679533930"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-141"></span><span id="showRightHoles"><span class="annot"><span class="annottext">showRightHoles :: forall a. Show a =&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showRightHoles"><span class="hs-identifier hs-var hs-var">showRightHoles</span></a></span></span><span> </span><span id="local-6989586621679533924"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679533924"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_ &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; _ &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679533924"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span id="local-6989586621679534299"><span id="local-6989586621679534300"><span class="annot"><a href="Scoring.Deprecated.Flat.html#showBothHoles"><span class="hs-identifier hs-type">showBothHoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534300"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534299"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679534300"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679534299"><span class="hs-identifier hs-type">a2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-144"></span><span id="showBothHoles"><span class="annot"><span class="annottext">showBothHoles :: forall a1 a2. (Show a1, Show a2) =&gt; ([a1], [a2]) -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showBothHoles"><span class="hs-identifier hs-var hs-var">showBothHoles</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679533916"><span class="annot"><span class="annottext">[a1]
</span><a href="#local-6989586621679533916"><span class="hs-identifier hs-var">ls</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679533915"><span class="annot"><span class="annottext">[a2]
</span><a href="#local-6989586621679533915"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showLeftHoles"><span class="hs-identifier hs-var">showLeftHoles</span></a></span><span> </span><span class="annot"><span class="annottext">[a1]
</span><a href="#local-6989586621679533916"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; | &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showRightHoles"><span class="hs-identifier hs-var">showRightHoles</span></a></span><span> </span><span class="annot"><span class="annottext">[a2]
</span><a href="#local-6989586621679533915"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span id="local-6989586621679534296"><span class="annot"><a href="Scoring.Deprecated.Flat.html#showOpts"><span class="hs-identifier hs-type">showOpts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679534296"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679534296"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-147"></span><span id="showOpts"><span class="annot"><span class="annottext">showOpts :: forall a. (a -&gt; String) -&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showOpts"><span class="hs-identifier hs-var hs-var">showOpts</span></a></span></span><span> </span><span id="local-6989586621679533910"><span class="annot"><span class="annottext">a -&gt; String
</span><a href="#local-6989586621679533910"><span class="hs-identifier hs-var">shower</span></a></span></span><span> </span><span id="local-6989586621679533909"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679533909"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-[&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">L.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; / &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; String
</span><a href="#local-6989586621679533910"><span class="hs-identifier hs-var">shower</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679533909"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]-&quot;</span></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679533904"><span id="local-6989586621679533907"><span id="local-6989586621679534293"><span id="local-6989586621679534294"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534294"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534293"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534293"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534294"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621679533886"><span class="annot"><span class="annottext">show :: Score s i -&gt; String
</span><a href="#local-6989586621679533886"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span id="local-6989586621679533885"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533885"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;()-&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533885"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-()&quot;</span></span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span id="local-6989586621679533884"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533884"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679533883"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533883"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;()&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; String) -&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showOpts"><span class="hs-identifier hs-var">showOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showLeftHoles"><span class="hs-identifier hs-var">showLeftHoles</span></a></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533884"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533883"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-152"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span id="local-6989586621679533882"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533882"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span id="local-6989586621679533881"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533881"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533882"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; String) -&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showOpts"><span class="hs-identifier hs-var">showOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showRightHoles"><span class="hs-identifier hs-var">showRightHoles</span></a></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533881"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;()&quot;</span></span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span id="local-6989586621679533880"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533880"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span id="local-6989586621679533879"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533879"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621679533878"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533878"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533880"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; String) -&gt; [a] -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showOpts"><span class="hs-identifier hs-var">showOpts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a1 a2. (Show a1, Show a2) =&gt; ([a1], [a2]) -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showBothHoles"><span class="hs-identifier hs-var">showBothHoles</span></a></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533879"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533878"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-comment">-- simplified showing (only &quot;type&quot;)</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">{- | Returns a string representation of a 'Score'
 (more compact than it's 'Show' instance).
-}</span><span>
</span><span id="line-160"></span><span id="local-6989586621679534291"><span id="local-6989586621679534292"><span class="annot"><a href="Scoring.Deprecated.Flat.html#showScore"><span class="hs-identifier hs-type">showScore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534292"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534291"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534292"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534291"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span></span><span>
</span><span id="line-161"></span><span id="showScore"><span class="annot"><span class="annottext">showScore :: forall s i. (Show s, Show i) =&gt; Score s i -&gt; String
</span><a href="Scoring.Deprecated.Flat.html#showScore"><span class="hs-identifier hs-var hs-var">showScore</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span id="local-6989586621679533866"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533866"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533866"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-162"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#showScore"><span class="hs-identifier hs-var">showScore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679533865"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533865"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;()-&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533865"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-163"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#showScore"><span class="hs-identifier hs-var">showScore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span id="local-6989586621679533864"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533864"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533864"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-()&quot;</span></span><span>
</span><span id="line-164"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#showScore"><span class="hs-identifier hs-var">showScore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span id="local-6989586621679533863"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533863"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679533862"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533862"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533863"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533862"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- semiring operations --</span><span>
</span><span id="line-168"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span id="local-6989586621679534288"><span class="annot"><a href="Scoring.Deprecated.Flat.html#zipHoles"><span class="hs-identifier hs-type">zipHoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679534288"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534288"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534288"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679534288"><span class="hs-identifier hs-type">s</span></a></span></span><span>
</span><span id="line-171"></span><span id="zipHoles"><span class="annot"><span class="annottext">zipHoles :: forall s. Semiring s =&gt; Holes s -&gt; Holes s -&gt; Maybe s
</span><a href="Scoring.Deprecated.Flat.html#zipHoles"><span class="hs-identifier hs-var hs-var">zipHoles</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533857"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533857"><span class="hs-identifier hs-var">lefts</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533856"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533856"><span class="hs-identifier hs-var">rights</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {t}. Semiring t =&gt; t -&gt; [t] -&gt; [t] -&gt; Maybe t
</span><a href="#local-6989586621679533855"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a
</span><span class="hs-identifier hs-var">R.one</span></span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533857"><span class="hs-identifier hs-var">lefts</span></a></span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533856"><span class="hs-identifier hs-var">rights</span></a></span><span>
</span><span id="line-172"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-173"></span><span>  </span><span id="local-6989586621679533855"><span class="annot"><span class="annottext">go :: t -&gt; [t] -&gt; [t] -&gt; Maybe t
</span><a href="#local-6989586621679533855"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533850"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679533850"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679533850"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><a href="#local-6989586621679533855"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533848"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679533848"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679533847"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679533847"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679533846"><span class="annot"><span class="annottext">[t]
</span><a href="#local-6989586621679533846"><span class="hs-identifier hs-var">ls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679533845"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679533845"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679533844"><span class="annot"><span class="annottext">[t]
</span><a href="#local-6989586621679533844"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; [t] -&gt; [t] -&gt; Maybe t
</span><a href="#local-6989586621679533855"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679533848"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">R.*</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679533847"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">R.*</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679533845"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[t]
</span><a href="#local-6989586621679533846"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">[t]
</span><a href="#local-6989586621679533844"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="#local-6989586621679533855"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[t]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[t]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span id="local-6989586621679534277"><span id="local-6989586621679534278"><span id="local-6989586621679534279"><span class="annot"><a href="Scoring.Deprecated.Flat.html#combineAlts"><span class="hs-identifier hs-type">combineAlts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679534279"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679534278"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679534277"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679534279"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679534278"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679534277"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-178"></span><span id="combineAlts"><span class="annot"><span class="annottext">combineAlts :: forall a b c. (a -&gt; b -&gt; Maybe c) -&gt; [a] -&gt; [b] -&gt; Maybe [c]
</span><a href="Scoring.Deprecated.Flat.html#combineAlts"><span class="hs-identifier hs-var hs-var">combineAlts</span></a></span></span><span> </span><span id="local-6989586621679533834"><span class="annot"><span class="annottext">a -&gt; b -&gt; Maybe c
</span><a href="#local-6989586621679533834"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679533833"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679533833"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679533832"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679533832"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; Maybe c
</span><a href="#local-6989586621679533834"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679533833"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679533832"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span id="local-6989586621679534267"><span class="annot"><a href="Scoring.Deprecated.Flat.html#appendRight"><span class="hs-identifier hs-type">appendRight</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679534267"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679534267"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534267"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534267"><span class="hs-identifier hs-type">s</span></a></span></span><span>
</span><span id="line-181"></span><span id="appendRight"><span class="annot"><span class="annottext">appendRight :: forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#appendRight"><span class="hs-identifier hs-var hs-var">appendRight</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533826"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533826"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533826"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-182"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#appendRight"><span class="hs-identifier hs-var">appendRight</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533825"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533825"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-glyph">!</span><span id="local-6989586621679533824"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533824"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533824"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">R.*</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533825"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-183"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#appendRight"><span class="hs-identifier hs-var">appendRight</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533823"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533823"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679533822"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533822"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679533821"><span class="annot"><span class="annottext">[s]
</span><a href="#local-6989586621679533821"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533822"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#appendRight"><span class="hs-identifier hs-var">appendRight</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533823"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">[s]
</span><a href="#local-6989586621679533821"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span id="local-6989586621679533820"><span class="annot"><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-type">prependLeft</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679533820"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679533820"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679533820"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679533820"><span class="hs-identifier hs-type">s</span></a></span></span><span>
</span><span id="line-186"></span><span id="prependLeft"><span class="annot"><span class="annottext">prependLeft :: forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-var hs-var">prependLeft</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533816"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533816"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533816"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-187"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-var">prependLeft</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533815"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533815"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679533814"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533814"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679533813"><span class="annot"><span class="annottext">[s]
</span><a href="#local-6989586621679533813"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533815"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">R.*</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533814"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[s]
</span><a href="#local-6989586621679533813"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span id="local-6989586621679533812"><span class="annot"><a href="Scoring.Deprecated.Flat.html#addHoleLeft"><span class="hs-identifier hs-type">addHoleLeft</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679533812"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679533812"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Holes"><span class="hs-identifier hs-type">Holes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679533812"><span class="hs-identifier hs-type">s</span></a></span></span><span>
</span><span id="line-190"></span><span id="addHoleLeft"><span class="annot"><span class="annottext">addHoleLeft :: forall a. a -&gt; [a] -&gt; [a]
</span><a href="Scoring.Deprecated.Flat.html#addHoleLeft"><span class="hs-identifier hs-var hs-var">addHoleLeft</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-comment">{- | Combines two partially applied 'Score's
 by applying them to each other and/or multiplying the underlying semiring values.
 Shapes and IDs at the adjacent sides must match, otherwise 'Nothing' is returned.

 &gt; a-b &#215; b-c -&gt; a-c
-}</span><span>
</span><span id="line-198"></span><span id="local-6989586621679534263"><span id="local-6989586621679534264"><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-type">times</span></a></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679534264"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679534263"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534263"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534264"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534263"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534264"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534263"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534264"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534263"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- creates value</span><span>
</span><span id="line-201"></span><span id="times"><span class="annot"><span class="annottext">times :: forall s i.
(Semiring s, Eq i, Show i) =&gt;
Score s i -&gt; Score s i -&gt; Maybe (Score s i)
</span><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var hs-var">times</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533768"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533768"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533767"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533767"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i. s -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-var">SVal</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533768"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">R.*</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533767"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-202"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533766"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533766"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533765"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533765"><span class="hs-identifier hs-var">il</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533764"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533764"><span class="hs-identifier hs-var">ir</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533763"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533763"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533765"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; RightId a -&gt; LeftId a -&gt; Bool
</span><a href="Scoring.Deprecated.Flat.html#match"><span class="hs-operator hs-var">`match`</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533764"><span class="hs-identifier hs-var">ir</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-204"></span><span>      </span><span class="annot"><span class="annottext">forall s i. s -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-var">SVal</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">R.plus</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a
</span><span class="hs-identifier hs-var">R.zero</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; Maybe c) -&gt; [a] -&gt; [b] -&gt; Maybe [c]
</span><a href="Scoring.Deprecated.Flat.html#combineAlts"><span class="hs-identifier hs-var">combineAlts</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; Holes s -&gt; Holes s -&gt; Maybe s
</span><a href="Scoring.Deprecated.Flat.html#zipHoles"><span class="hs-identifier hs-var">zipHoles</span></a></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533766"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533763"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-205"></span><span class="hs-comment">-- creates right</span><span>
</span><span id="line-206"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533759"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533759"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533758"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533758"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533757"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533757"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i. LeftId i -&gt; [Holes s] -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-var">SRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533759"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#appendRight"><span class="hs-identifier hs-var">appendRight</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533757"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533758"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-207"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533756"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533756"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533755"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533755"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533754"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533754"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533753"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533753"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533752"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533752"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533754"><span class="hs-identifier hs-var">ir</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; RightId a -&gt; LeftId a -&gt; Bool
</span><a href="Scoring.Deprecated.Flat.html#match"><span class="hs-operator hs-var">`match`</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533753"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-209"></span><span>      </span><span class="annot"><span class="annottext">forall s i. LeftId i -&gt; [Holes s] -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-var">SRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533756"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; Maybe c) -&gt; [a] -&gt; [b] -&gt; Maybe [c]
</span><a href="Scoring.Deprecated.Flat.html#combineAlts"><span class="hs-identifier hs-var">combineAlts</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}.
Semiring a =&gt;
(Holes a, Holes a) -&gt; Holes a -&gt; Maybe (Holes a)
</span><a href="#local-6989586621679533751"><span class="hs-identifier hs-var">bplusr</span></a></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533755"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533752"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-210"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>  </span><span id="local-6989586621679533751"><span class="annot"><span class="annottext">bplusr :: (Holes a, Holes a) -&gt; Holes a -&gt; Maybe (Holes a)
</span><a href="#local-6989586621679533751"><span class="hs-identifier hs-var hs-var">bplusr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679533746"><span class="annot"><span class="annottext">Holes a
</span><a href="#local-6989586621679533746"><span class="hs-identifier hs-var">bl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679533745"><span class="annot"><span class="annottext">Holes a
</span><a href="#local-6989586621679533745"><span class="hs-identifier hs-var">br</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679533744"><span class="annot"><span class="annottext">Holes a
</span><a href="#local-6989586621679533744"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#appendRight"><span class="hs-identifier hs-var">appendRight</span></a></span><span> </span><span class="annot"><span class="annottext">Holes a
</span><a href="#local-6989586621679533746"><span class="hs-identifier hs-var">bl</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; Holes s -&gt; Holes s -&gt; Maybe s
</span><a href="Scoring.Deprecated.Flat.html#zipHoles"><span class="hs-identifier hs-var">zipHoles</span></a></span><span> </span><span class="annot"><span class="annottext">Holes a
</span><a href="#local-6989586621679533745"><span class="hs-identifier hs-var">br</span></a></span><span> </span><span class="annot"><span class="annottext">Holes a
</span><a href="#local-6989586621679533744"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-212"></span><span class="hs-comment">-- creates left</span><span>
</span><span id="line-213"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533742"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533742"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533741"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533741"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533740"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533740"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i. [Holes s] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-var">SLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-var">prependLeft</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533742"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533741"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533740"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-214"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533739"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533739"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533738"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533738"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533737"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533737"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533736"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533736"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533735"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533735"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533738"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; RightId a -&gt; LeftId a -&gt; Bool
</span><a href="Scoring.Deprecated.Flat.html#match"><span class="hs-operator hs-var">`match`</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533737"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s i. [Holes s] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-operator hs-var">`SLeft`</span></a></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533735"><span class="hs-identifier hs-var">ir</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679533734"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533734"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533739"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679533733"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533733"><span class="hs-identifier hs-var">bl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533732"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533732"><span class="hs-identifier hs-var">br</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533736"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533730"><span class="annot"><span class="annottext">vl :: Maybe s
</span><a href="#local-6989586621679533730"><span class="hs-identifier hs-var hs-var">vl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; Holes s -&gt; Holes s -&gt; Maybe s
</span><a href="Scoring.Deprecated.Flat.html#zipHoles"><span class="hs-identifier hs-var">zipHoles</span></a></span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533734"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533733"><span class="hs-identifier hs-var">bl</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-var">prependLeft</span></a></span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533732"><span class="hs-identifier hs-var">br</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe s
</span><a href="#local-6989586621679533730"><span class="hs-identifier hs-var">vl</span></a></span><span>
</span><span id="line-220"></span><span class="hs-comment">-- creates both</span><span>
</span><span id="line-221"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533729"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533729"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533728"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533728"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533727"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533727"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533726"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533726"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i.
LeftId i -&gt; [(Holes s, Holes s)] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-var">SBoth</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533729"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533725"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533726"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-222"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>  </span><span id="local-6989586621679533725"><span class="annot"><span class="annottext">bs :: [(Holes s, Holes s)]
</span><a href="#local-6989586621679533725"><span class="hs-identifier hs-var hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679533721"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533721"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533728"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679533720"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533720"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533727"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533721"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533720"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533719"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533719"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533718"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533718"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533717"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533717"><span class="hs-identifier hs-var">ia</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533716"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533716"><span class="hs-identifier hs-var">ib</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533715"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533715"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533714"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533714"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533717"><span class="hs-identifier hs-var">ia</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; RightId a -&gt; LeftId a -&gt; Bool
</span><a href="Scoring.Deprecated.Flat.html#match"><span class="hs-operator hs-var">`match`</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533716"><span class="hs-identifier hs-var">ib</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-comment">-- Maybe</span><span>
</span><span id="line-229"></span><span>  </span><span id="local-6989586621679533713"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533713"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Traversable t, Monad m) =&gt;
t (m a) -&gt; m (t a)
</span><span class="hs-identifier hs-var">sequence</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-comment">-- []</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679533712"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533712"><span class="hs-identifier hs-var">al</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533711"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533711"><span class="hs-identifier hs-var">ar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533718"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679533710"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533710"><span class="hs-identifier hs-var">bl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533709"><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533709"><span class="hs-identifier hs-var">br</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533715"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-234"></span><span>      </span><span class="hs-comment">-- Maybe</span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621679533708"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533708"><span class="hs-identifier hs-var">vm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; Holes s -&gt; Holes s -&gt; Maybe s
</span><a href="Scoring.Deprecated.Flat.html#zipHoles"><span class="hs-identifier hs-var">zipHoles</span></a></span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533711"><span class="hs-identifier hs-var">ar</span></a></span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533710"><span class="hs-identifier hs-var">bl</span></a></span><span>
</span><span id="line-236"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533712"><span class="hs-identifier hs-var">al</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-var">prependLeft</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533708"><span class="hs-identifier hs-var">vm</span></a></span><span> </span><span class="annot"><span class="annottext">Holes s
</span><a href="#local-6989586621679533709"><span class="hs-identifier hs-var">br</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i.
LeftId i -&gt; [(Holes s, Holes s)] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-var">SBoth</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533719"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533713"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533714"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- otherwise</span><span>
</span><span id="line-239"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-comment">{- | Adds two partially applied 'Score's
 by adding their underlying (or resulting) semiring values.
 This operation is only admitted
 if the two scores are of the same shape and have matching IDs.
 Otherwise, 'Nothing' is returned.

 &gt; a-b + a-b -&gt; a-b
-}</span><span>
</span><span id="line-249"></span><span id="local-6989586621679534245"><span id="local-6989586621679534246"><span class="annot"><a href="Scoring.Deprecated.Flat.html#plus"><span class="hs-identifier hs-type">plus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679534246"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679534245"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534246"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534245"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534246"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534245"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534246"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534245"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-250"></span><span id="plus"><span class="annot"><span class="annottext">plus :: forall s i.
(Semiring s, Eq i) =&gt;
Score s i -&gt; Score s i -&gt; Maybe (Score s i)
</span><a href="Scoring.Deprecated.Flat.html#plus"><span class="hs-identifier hs-var hs-var">plus</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533697"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533697"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533696"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533696"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i. s -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-var">SVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533697"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">R.+</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533696"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#plus"><span class="hs-identifier hs-var">plus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533694"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533694"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533693"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533693"><span class="hs-identifier hs-var">rs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533692"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533692"><span class="hs-identifier hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533691"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533691"><span class="hs-identifier hs-var">rs2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533694"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533692"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>      </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i. LeftId i -&gt; [Holes s] -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-var">SRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533694"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533693"><span class="hs-identifier hs-var">rs1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533691"><span class="hs-identifier hs-var">rs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#plus"><span class="hs-identifier hs-var">plus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533690"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533690"><span class="hs-identifier hs-var">ls1</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533689"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533689"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533688"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533688"><span class="hs-identifier hs-var">ls2</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533687"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533687"><span class="hs-identifier hs-var">i'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533689"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533687"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i. [Holes s] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-var">SLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533690"><span class="hs-identifier hs-var">ls1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533688"><span class="hs-identifier hs-var">ls2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533689"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-255"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#plus"><span class="hs-identifier hs-var">plus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533686"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533686"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533685"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533685"><span class="hs-identifier hs-var">bs1</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533684"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533684"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533683"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533683"><span class="hs-identifier hs-var">il'</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533682"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533682"><span class="hs-identifier hs-var">bs2</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679533681"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533681"><span class="hs-identifier hs-var">ir'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533686"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533683"><span class="hs-identifier hs-var">il'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533684"><span class="hs-identifier hs-var">ir</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533681"><span class="hs-identifier hs-var">ir'</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-257"></span><span>      </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall s i.
LeftId i -&gt; [(Holes s, Holes s)] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-var">SBoth</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533686"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533685"><span class="hs-identifier hs-var">bs1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533682"><span class="hs-identifier hs-var">bs2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533684"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-258"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#plus"><span class="hs-identifier hs-var">plus</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-comment">-----------</span><span>
</span><span id="line-261"></span><span class="hs-comment">-- rules --</span><span>
</span><span id="line-262"></span><span class="hs-comment">-----------</span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-comment">{- | Extracts the value from a fully applied 'Score'.
 This function is intended to be used to extract the final score of the parser.
 If the score is not fully applied,
 throws an exception to indicate parser bugs.
-}</span><span>
</span><span id="line-269"></span><span id="local-6989586621679534241"><span id="local-6989586621679534242"><span class="annot"><a href="Scoring.Deprecated.Flat.html#getScoreVal"><span class="hs-identifier hs-type">getScoreVal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534242"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534241"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679534242"><span class="hs-identifier hs-type">s</span></a></span></span></span><span>
</span><span id="line-270"></span><span id="getScoreVal"><span class="annot"><span class="annottext">getScoreVal :: forall s i. Score s i -&gt; s
</span><a href="Scoring.Deprecated.Flat.html#getScoreVal"><span class="hs-identifier hs-var hs-var">getScoreVal</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span id="local-6989586621679533677"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533677"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533677"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-271"></span><span class="annot"><a href="Scoring.Deprecated.Flat.html#getScoreVal"><span class="hs-identifier hs-var">getScoreVal</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cannot get value from partial score&quot;</span></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-comment">{- | Adds two 'Score's that are alternative derivations of the same transition.
 This is expected to be called on compatible scores
 and will throw an error otherwise to indicate parser bugs.

 &gt; a-b   a-b
 &gt; --------- add
 &gt;    a-b
-}</span><span>
</span><span id="line-281"></span><span id="local-6989586621679534234"><span id="local-6989586621679534235"><span class="annot"><a href="Scoring.Deprecated.Flat.html#addScores"><span class="hs-identifier hs-type">addScores</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679534235"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679534234"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534235"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534234"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534235"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534234"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534235"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534234"><span class="hs-identifier hs-type">i</span></a></span></span></span><span>
</span><span id="line-282"></span><span id="addScores"><span class="annot"><span class="annottext">addScores :: forall s i.
(Semiring s, Eq i) =&gt;
Score s i -&gt; Score s i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#addScores"><span class="hs-identifier hs-var hs-var">addScores</span></a></span></span><span> </span><span id="local-6989586621679533669"><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533669"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679533668"><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533668"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;illegal times&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall s i.
(Semiring s, Eq i) =&gt;
Score s i -&gt; Score s i -&gt; Maybe (Score s i)
</span><a href="Scoring.Deprecated.Flat.html#plus"><span class="hs-identifier hs-var">plus</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533669"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533668"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-comment">{- | Combines the 'Score's of two edges with a @split@ operation into the score of the parent edge.
 This is expected to be called on compatible scores
 and will throw an error otherwise to indicate parser bugs.

 &gt; a-b   b-c
 &gt; --------- unsplit
 &gt;    a-c
-}</span><span>
</span><span id="line-292"></span><span id="local-6989586621679534229"><span id="local-6989586621679534230"><span class="annot"><a href="Scoring.Deprecated.Flat.html#unsplitScores"><span class="hs-identifier hs-type">unsplitScores</span></a></span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679534230"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679534229"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534229"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534230"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679534230"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-comment">-- ^ The score of the split operation.</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534229"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-comment">-- ^ The 'Score' of the left child edge.</span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534229"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-comment">-- ^ The 'Score' of the right child edge.</span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534229"><span class="hs-identifier hs-type">i</span></a></span></span></span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-comment">-- ^ The 'Score' of the parent edge, if it exists.</span><span>
</span><span id="line-302"></span><span id="unsplitScores"><span class="annot"><span class="annottext">unsplitScores :: forall s i.
(Semiring s, Eq i, Show i, Show s) =&gt;
s -&gt; Score s i -&gt; Score s i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#unsplitScores"><span class="hs-identifier hs-var hs-var">unsplitScores</span></a></span></span><span> </span><span id="local-6989586621679533660"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533660"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621679533659"><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533659"><span class="hs-identifier hs-var">left</span></a></span></span><span> </span><span id="local-6989586621679533658"><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533658"><span class="hs-identifier hs-var">right</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">forall {a}. a
</span><a href="#local-6989586621679533657"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall s i.
(Semiring s, Eq i, Show i) =&gt;
Score s i -&gt; Score s i -&gt; Maybe (Score s i)
</span><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533656"><span class="hs-identifier hs-var">left'</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533658"><span class="hs-identifier hs-var">right</span></a></span><span>
</span><span id="line-303"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-304"></span><span>  </span><span id="local-6989586621679533657"><span class="annot"><span class="annottext">err :: a
</span><a href="#local-6989586621679533657"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>    </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-306"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Attempting illegal unsplit: left=&quot;</span></span><span>
</span><span id="line-307"></span><span>        </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533659"><span class="hs-identifier hs-var">left</span></a></span><span>
</span><span id="line-308"></span><span>        </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, right=&quot;</span></span><span>
</span><span id="line-309"></span><span>        </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533658"><span class="hs-identifier hs-var">right</span></a></span><span>
</span><span id="line-310"></span><span>  </span><span id="local-6989586621679533656"><span class="annot"><span class="annottext">left' :: Score s i
</span><a href="#local-6989586621679533656"><span class="hs-identifier hs-var hs-var">left'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533659"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-311"></span><span>    </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span id="local-6989586621679533637"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533637"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall s i. s -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-var">SVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533660"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">R.*</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533637"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span id="local-6989586621679533636"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533636"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679533635"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533635"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall s i. [Holes s] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-var">SLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-var">prependLeft</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533660"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533636"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533635"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-313"></span><span>    </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span id="local-6989586621679533634"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533634"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679533633"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533633"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall s i. LeftId i -&gt; [Holes s] -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-var">SRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533634"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-var">prependLeft</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533660"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533633"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span id="local-6989586621679533632"><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533632"><span class="hs-identifier hs-var">il</span></a></span></span><span> </span><span id="local-6989586621679533631"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533631"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621679533630"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533630"><span class="hs-identifier hs-var">ir</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall s i.
LeftId i -&gt; [(Holes s, Holes s)] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-var">SBoth</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533632"><span class="hs-identifier hs-var">il</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s. Semiring s =&gt; s -&gt; Holes s -&gt; Holes s
</span><a href="Scoring.Deprecated.Flat.html#prependLeft"><span class="hs-identifier hs-var">prependLeft</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533660"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533631"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533630"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="hs-comment">{- | Creates the 'Score' of a left parent edge from a left child edge of an @unspread@.
 Will throw an error if called on invalid input to indicate parser bugs.
-}</span><span>
</span><span id="line-319"></span><span id="local-6989586621679534219"><span id="local-6989586621679534220"><span class="annot"><a href="Scoring.Deprecated.Flat.html#unspreadScoresLeft"><span class="hs-identifier hs-type">unspreadScoresLeft</span></a></span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679534220"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534220"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679534219"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534219"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679534220"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-comment">-- ^ The new ID that marks both parent edges</span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534219"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534220"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-comment">-- ^ The 'Score' of the left child edge.</span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534219"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534220"><span class="hs-identifier hs-type">i</span></a></span></span></span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-comment">-- ^ The 'Score' of the left parent edge, if it exists.</span><span>
</span><span id="line-327"></span><span id="unspreadScoresLeft"><span class="annot"><span class="annottext">unspreadScoresLeft :: forall i s.
(Eq i, Show i, Semiring s, Show s) =&gt;
i -&gt; Score s i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#unspreadScoresLeft"><span class="hs-identifier hs-var hs-var">unspreadScoresLeft</span></a></span></span><span> </span><span id="local-6989586621679533622"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679533622"><span class="hs-identifier hs-var">newid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {s} {i}.
(Semiring s, Show i, Show s) =&gt;
Score s i -&gt; Score s i
</span><a href="#local-6989586621679533621"><span class="hs-identifier hs-var">wrap</span></a></span><span>
</span><span id="line-328"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-329"></span><span>  </span><span id="local-6989586621679533620"><span class="annot"><span class="annottext">newir :: RightId i
</span><a href="#local-6989586621679533620"><span class="hs-identifier hs-var hs-var">newir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall i. i -&gt; RightId i
</span><a href="Scoring.Deprecated.Flat.html#RightId"><span class="hs-identifier hs-var">RightId</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679533622"><span class="hs-identifier hs-var">newid</span></a></span><span>
</span><span id="line-330"></span><span>  </span><span class="hs-comment">-- wrap the left input score into a new layer with a new ID</span><span>
</span><span id="line-331"></span><span>  </span><span id="local-6989586621679533621"><span class="annot"><span class="annottext">wrap :: Score s i -&gt; Score s i
</span><a href="#local-6989586621679533621"><span class="hs-identifier hs-var hs-var">wrap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span id="local-6989586621679533607"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533607"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s i. [Holes s] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-var">SLeft</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a
</span><span class="hs-identifier hs-var">R.one</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533607"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533620"><span class="hs-identifier hs-var">newir</span></a></span><span>
</span><span id="line-332"></span><span>  </span><span class="annot"><a href="#local-6989586621679533621"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span id="local-6989586621679533606"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533606"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="annot"><span class="annottext">RightId i
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s i. [Holes s] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-var">SLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="Scoring.Deprecated.Flat.html#addHoleLeft"><span class="hs-identifier hs-var">addHoleLeft</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a
</span><span class="hs-identifier hs-var">R.one</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533606"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533620"><span class="hs-identifier hs-var">newir</span></a></span><span>
</span><span id="line-333"></span><span>  </span><span class="annot"><a href="#local-6989586621679533621"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span id="local-6989586621679533605"><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533605"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Attempting illegal left-unspread on &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533605"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-comment">{- | Creates the 'Score' of a right parent edge
 from the middle and right child edges of an @unspread@
 and a @spread@ operation.
-}</span><span>
</span><span id="line-339"></span><span id="local-6989586621679534213"><span id="local-6989586621679534214"><span class="annot"><a href="Scoring.Deprecated.Flat.html#unspreadScoresRight"><span class="hs-identifier hs-type">unspreadScoresRight</span></a></span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679534214"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">R.Semiring</span></span><span> </span><span class="annot"><a href="#local-6989586621679534213"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534214"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679534213"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679534214"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-comment">-- ^ The new ID that marks both parent edges.</span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679534213"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-comment">-- ^ The score of the @spread@ operation.</span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534213"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534214"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-346"></span><span>  </span><span class="hs-comment">-- ^ The 'Score' of the middle child edge.</span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534213"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534214"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-comment">-- ^ The 'Score' of the right child edge.</span><span>
</span><span id="line-349"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Scoring.Deprecated.Flat.html#Score"><span class="hs-identifier hs-type">Score</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534213"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679534214"><span class="hs-identifier hs-type">i</span></a></span></span></span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-comment">-- ^ The 'Score' of the right parent edge, if it exists.</span><span>
</span><span id="line-351"></span><span id="unspreadScoresRight"><span class="annot"><span class="annottext">unspreadScoresRight :: forall i s.
(Eq i, Semiring s, Show i, Show s) =&gt;
i -&gt; s -&gt; Score s i -&gt; Score s i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#unspreadScoresRight"><span class="hs-identifier hs-var hs-var">unspreadScoresRight</span></a></span></span><span> </span><span id="local-6989586621679533595"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679533595"><span class="hs-identifier hs-var">newid</span></a></span></span><span> </span><span id="local-6989586621679533594"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533594"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621679533593"><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533593"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679533592"><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533592"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">forall {a}. a
</span><a href="#local-6989586621679533591"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-352"></span><span>  </span><span id="local-6989586621679533590"><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533590"><span class="hs-identifier hs-var">mr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s i.
(Semiring s, Eq i, Show i) =&gt;
Score s i -&gt; Score s i -&gt; Maybe (Score s i)
</span><a href="Scoring.Deprecated.Flat.html#times"><span class="hs-identifier hs-var">times</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533593"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533592"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-353"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Score s i -&gt; Score s i
</span><a href="#local-6989586621679533589"><span class="hs-identifier hs-var">unwrap</span></a></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533590"><span class="hs-identifier hs-var">mr</span></a></span><span>
</span><span id="line-354"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>  </span><span id="local-6989586621679533591"><span class="annot"><span class="annottext">err :: a
</span><a href="#local-6989586621679533591"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-356"></span><span>    </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-357"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Attempting illegal right-unspread: m=&quot;</span></span><span>
</span><span id="line-358"></span><span>        </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533593"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-359"></span><span>        </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, r=&quot;</span></span><span>
</span><span id="line-360"></span><span>        </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Score s i
</span><a href="#local-6989586621679533592"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-comment">-- generate a value on the right</span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-comment">-- that consumes the left parent edge's value when supplied</span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-comment">-- and combines with m on the right</span><span>
</span><span id="line-364"></span><span>  </span><span id="local-6989586621679533579"><span class="annot"><span class="annottext">newil :: LeftId i
</span><a href="#local-6989586621679533579"><span class="hs-identifier hs-var hs-var">newil</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall i. i -&gt; LeftId i
</span><a href="Scoring.Deprecated.Flat.html#LeftId"><span class="hs-identifier hs-var">LeftId</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679533595"><span class="hs-identifier hs-var">newid</span></a></span><span>
</span><span id="line-365"></span><span>  </span><span id="local-6989586621679533589"><span class="annot"><span class="annottext">unwrap :: Score s i -&gt; Score s i
</span><a href="#local-6989586621679533589"><span class="hs-identifier hs-var hs-var">unwrap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SVal"><span class="hs-identifier hs-type">SVal</span></a></span><span> </span><span id="local-6989586621679533573"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533573"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s i. LeftId i -&gt; [Holes s] -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-var">SRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533579"><span class="hs-identifier hs-var">newil</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533594"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533573"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-366"></span><span>  </span><span class="annot"><a href="#local-6989586621679533589"><span class="hs-identifier hs-var">unwrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-type">SRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679533572"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533572"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s i. LeftId i -&gt; [Holes s] -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SRight"><span class="hs-identifier hs-var">SRight</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533579"><span class="hs-identifier hs-var">newil</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="Scoring.Deprecated.Flat.html#addHoleLeft"><span class="hs-identifier hs-var">addHoleLeft</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533594"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533572"><span class="hs-identifier hs-var">rs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>  </span><span class="annot"><a href="#local-6989586621679533589"><span class="hs-identifier hs-var">unwrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SLeft"><span class="hs-identifier hs-type">SLeft</span></a></span><span> </span><span id="local-6989586621679533571"><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533571"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621679533570"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533570"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s i.
LeftId i -&gt; [(Holes s, Holes s)] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-var">SBoth</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533579"><span class="hs-identifier hs-var">newil</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533594"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Semiring a =&gt; a
</span><span class="hs-identifier hs-var">R.one</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Holes s]
</span><a href="#local-6989586621679533571"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533570"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-368"></span><span>  </span><span class="annot"><a href="#local-6989586621679533589"><span class="hs-identifier hs-var">unwrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-type">SBoth</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679533569"><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533569"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621679533568"><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533568"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s i.
LeftId i -&gt; [(Holes s, Holes s)] -&gt; RightId i -&gt; Score s i
</span><a href="Scoring.Deprecated.Flat.html#SBoth"><span class="hs-identifier hs-var">SBoth</span></a></span><span> </span><span class="annot"><span class="annottext">LeftId i
</span><a href="#local-6989586621679533579"><span class="hs-identifier hs-var">newil</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="Scoring.Deprecated.Flat.html#addHoleLeft"><span class="hs-identifier hs-var">addHoleLeft</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679533594"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Holes s, Holes s)]
</span><a href="#local-6989586621679533569"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RightId i
</span><a href="#local-6989586621679533568"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-369"></span></pre></body></html>