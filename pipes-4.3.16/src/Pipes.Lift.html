<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">{-| Many actions in base monad transformers cannot be automatically
    'Control.Monad.Trans.Class.lift'ed.  These functions lift these remaining
    actions so that they work in the 'Proxy' monad transformer.

    See the mini-tutorial at the bottom of this module for example code and
    typical use cases where this module will come in handy.
-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Pipes.Lift</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Utilities</span></span><span>
</span><span id="line-13"></span><span>      </span><span class="annot"><a href="Pipes.Lift.html#distribute"><span class="hs-identifier">distribute</span></a></span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><span class="hs-comment">-- * ExceptT</span></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#exceptP"><span class="hs-identifier">exceptP</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runExceptP"><span class="hs-identifier">runExceptP</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#catchError"><span class="hs-identifier">catchError</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#liftCatchError"><span class="hs-identifier">liftCatchError</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- * MaybeT</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#maybeP"><span class="hs-identifier">maybeP</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runMaybeP"><span class="hs-identifier">runMaybeP</span></a></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><span class="hs-comment">-- * ReaderT</span></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#readerP"><span class="hs-identifier">readerP</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runReaderP"><span class="hs-identifier">runReaderP</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-comment">-- * StateT</span></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#stateP"><span class="hs-identifier">stateP</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runStateP"><span class="hs-identifier">runStateP</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier">evalStateP</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#execStateP"><span class="hs-identifier">execStateP</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-comment">-- * WriterT</span></span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><span class="hs-comment">-- $writert</span></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#writerP"><span class="hs-identifier">writerP</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runWriterP"><span class="hs-identifier">runWriterP</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#execWriterP"><span class="hs-identifier">execWriterP</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><span class="hs-comment">-- * RWST</span></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#rwsP"><span class="hs-identifier">rwsP</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runRWSP"><span class="hs-identifier">runRWSP</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#evalRWSP"><span class="hs-identifier">evalRWSP</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Lift.html#execRWSP"><span class="hs-identifier">execRWSP</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Tutorial</span></span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><span class="hs-comment">-- $tutorial</span></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">lift</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadTrans</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Except</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">E</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Maybe</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Reader</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">R</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.State.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Writer.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">W</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.RWS.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">RWS</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Pipes.Internal.html"><span class="hs-identifier">Pipes.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier">Proxy</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier">unsafeHoist</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Morph</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">hoist</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MFunctor</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Pipes.Core.html"><span class="hs-identifier">Pipes.Core</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Core.html#runEffect"><span class="hs-identifier">runEffect</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Core.html#request"><span class="hs-identifier">request</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Core.html#respond"><span class="hs-identifier">respond</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Core.html#%2F%2F%3E"><span class="hs-operator">(//&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Core.html#%3E%5C%5C"><span class="hs-operator">(&gt;\\)</span></a></span><span class="hs-special">)</span><span class="hs-cpp">

#if MIN_VERSION_base(4,8,0)
</span><span class="hs-cpp">#else
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Monoid</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-67"></span><span class="hs-comment">-- | Distribute 'Proxy' over a monad transformer</span><span>
</span><span id="line-68"></span><span id="local-6989586621679066696"><span id="local-6989586621679066698"><span id="local-6989586621679066699"><span id="local-6989586621679066700"><span id="local-6989586621679066701"><span id="local-6989586621679066704"><span id="local-6989586621679066705"><span class="annot"><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-type">distribute</span></a></span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-glyph">::</span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066705"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-70"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadTrans</span></span><span> </span><span class="annot"><a href="#local-6989586621679066704"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-71"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MFunctor</span></span><span> </span><span class="annot"><a href="#local-6989586621679066704"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-72"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066704"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066705"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066704"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066701"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066700"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066699"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066698"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066705"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066701"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066700"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066699"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066698"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066704"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066705"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066696"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-comment">-- ^ </span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066704"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066701"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066700"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066699"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066698"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066705"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066696"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-comment">-- ^ </span><span>
</span><span id="line-79"></span><span id="distribute"><span class="annot"><span class="annottext">distribute :: forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var hs-var">distribute</span></a></span></span><span> </span><span id="local-6989586621679066170"><span class="annot"><span class="annottext">Proxy a' a b' b (t m) r
</span><a href="#local-6989586621679066170"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) r. Monad m =&gt; Effect m r -&gt; m r
</span><a href="Pipes.Core.html#runEffect"><span class="hs-identifier hs-var">runEffect</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a' -&gt; Proxy X () b' b (t (Proxy a' a b' b m)) a
</span><a href="#local-6989586621679066169"><span class="hs-identifier hs-var">request'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) b' a' a y' y b c.
Functor m =&gt;
(b' -&gt; Proxy a' a y' y m b)
-&gt; Proxy b' b y' y m c -&gt; Proxy a' a y' y m c
</span><a href="Pipes.Core.html#%3E%5C%5C"><span class="hs-operator hs-var">&gt;\\</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (n :: * -&gt; *) a' a b' b r.
Functor m =&gt;
(forall x. m x -&gt; n x)
-&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-var">unsafeHoist</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: (* -&gt; *) -&gt; k -&gt; *) (m :: * -&gt; *) (n :: * -&gt; *)
       (b :: k).
(MFunctor t, Monad m) =&gt;
(forall a. m a -&gt; n a) -&gt; t m b -&gt; t n b
</span><span class="hs-identifier hs-var">hoist</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (t m) r
</span><a href="#local-6989586621679066170"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) x' x b' b a' c' c.
Functor m =&gt;
Proxy x' x b' b m a'
-&gt; (b -&gt; Proxy x' x c' c m b') -&gt; Proxy x' x c' c m a'
</span><a href="Pipes.Core.html#%2F%2F%3E"><span class="hs-operator hs-var">//&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; Proxy X () () X (t (Proxy a' a b' b m)) b'
</span><a href="#local-6989586621679066163"><span class="hs-identifier hs-var">respond'</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-81"></span><span>    </span><span id="local-6989586621679066169"><span class="annot"><span class="annottext">request' :: a' -&gt; Proxy X () b' b (t (Proxy a' a b' b m)) a
</span><a href="#local-6989586621679066169"><span class="hs-identifier hs-var hs-var">request'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a' a y' y.
Functor m =&gt;
a' -&gt; Proxy a' a y' y m a
</span><a href="Pipes.Core.html#request"><span class="hs-identifier hs-var">request</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span id="local-6989586621679066163"><span class="annot"><span class="annottext">respond' :: b -&gt; Proxy X () () X (t (Proxy a' a b' b m)) b'
</span><a href="#local-6989586621679066163"><span class="hs-identifier hs-var hs-var">respond'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a x' x a'.
Functor m =&gt;
a -&gt; Proxy x' x a' a m a'
</span><a href="Pipes.Core.html#respond"><span class="hs-identifier hs-var">respond</span></a></span><span>
</span><span id="line-83"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#distribute"><span class="hs-pragma hs-type">distribute</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-comment">-- | Wrap the base monad in 'E.ExceptT'</span><span>
</span><span id="line-86"></span><span id="local-6989586621679066618"><span id="local-6989586621679066619"><span id="local-6989586621679066620"><span id="local-6989586621679066621"><span id="local-6989586621679066622"><span id="local-6989586621679066623"><span id="local-6989586621679066624"><span class="annot"><a href="Pipes.Lift.html#exceptP"><span class="hs-identifier hs-type">exceptP</span></a></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066624"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066623"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066622"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066621"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066620"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066624"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679066619"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066618"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066623"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066622"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066621"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066620"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">E.ExceptT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066619"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066624"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066618"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-90"></span><span id="exceptP"><span class="annot"><span class="annottext">exceptP :: forall (m :: * -&gt; *) a' a b' b e r.
Monad m =&gt;
Proxy a' a b' b m (Either e r) -&gt; Proxy a' a b' b (ExceptT e m) r
</span><a href="Pipes.Lift.html#exceptP"><span class="hs-identifier hs-var hs-var">exceptP</span></a></span></span><span> </span><span id="local-6989586621679066137"><span class="annot"><span class="annottext">Proxy a' a b' b m (Either e r)
</span><a href="#local-6989586621679066137"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-91"></span><span>    </span><span id="local-6989586621679066136"><span class="annot"><span class="annottext">Either e r
</span><a href="#local-6989586621679066136"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (n :: * -&gt; *) a' a b' b r.
Functor m =&gt;
(forall x. m x -&gt; n x)
-&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-var">unsafeHoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (Either e r)
</span><a href="#local-6989586621679066137"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ExceptT e m a
</span><span class="hs-identifier hs-var">E.ExceptT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Either e r
</span><a href="#local-6989586621679066136"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#exceptP"><span class="hs-pragma hs-type">exceptP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-comment">-- | Run 'E.ExceptT' in the base monad</span><span>
</span><span id="line-96"></span><span id="local-6989586621679066594"><span id="local-6989586621679066595"><span id="local-6989586621679066596"><span id="local-6989586621679066597"><span id="local-6989586621679066598"><span id="local-6989586621679066599"><span id="local-6989586621679066600"><span class="annot"><a href="Pipes.Lift.html#runExceptP"><span class="hs-identifier hs-type">runExceptP</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066600"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066599"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066598"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066597"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066596"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">E.ExceptT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066595"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066600"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066594"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066599"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066598"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066597"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066596"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066600"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="#local-6989586621679066595"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066594"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-100"></span><span id="runExceptP"><span class="annot"><span class="annottext">runExceptP :: forall (m :: * -&gt; *) a' a b' b e r.
Monad m =&gt;
Proxy a' a b' b (ExceptT e m) r -&gt; Proxy a' a b' b m (Either e r)
</span><a href="Pipes.Lift.html#runExceptP"><span class="hs-identifier hs-var hs-var">runExceptP</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">E.runExceptT</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var">distribute</span></a></span><span>
</span><span id="line-101"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runExceptP"><span class="hs-pragma hs-type">runExceptP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | Catch an error in the base monad</span><span>
</span><span id="line-104"></span><span id="local-6989586621679066576"><span id="local-6989586621679066577"><span id="local-6989586621679066578"><span id="local-6989586621679066579"><span id="local-6989586621679066580"><span id="local-6989586621679066581"><span id="local-6989586621679066582"><span class="annot"><a href="Pipes.Lift.html#catchError"><span class="hs-identifier hs-type">catchError</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066582"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066581"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066580"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066579"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066578"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">E.ExceptT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066577"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066582"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066576"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-comment">-- ^</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066577"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066581"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066580"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066579"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066578"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">E.ExceptT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066577"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066582"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066576"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-comment">-- ^</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066581"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066580"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066579"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066578"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">E.ExceptT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066577"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066582"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066576"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-111"></span><span id="catchError"><span class="annot"><span class="annottext">catchError :: forall (m :: * -&gt; *) a' a b' b e r.
Monad m =&gt;
Proxy a' a b' b (ExceptT e m) r
-&gt; (e -&gt; Proxy a' a b' b (ExceptT e m) r)
-&gt; Proxy a' a b' b (ExceptT e m) r
</span><a href="Pipes.Lift.html#catchError"><span class="hs-identifier hs-var hs-var">catchError</span></a></span></span><span> </span><span id="local-6989586621679066105"><span class="annot"><span class="annottext">Proxy a' a b' b (ExceptT e m) r
</span><a href="#local-6989586621679066105"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679066104"><span class="annot"><span class="annottext">e -&gt; Proxy a' a b' b (ExceptT e m) r
</span><a href="#local-6989586621679066104"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a' a b' b e r.
Monad m =&gt;
Proxy a' a b' b m (Either e r) -&gt; Proxy a' a b' b (ExceptT e m) r
</span><a href="Pipes.Lift.html#exceptP"><span class="hs-identifier hs-var">exceptP</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">E.runExceptT</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) e a e'.
Monad m =&gt;
ExceptT e m a -&gt; (e -&gt; ExceptT e' m a) -&gt; ExceptT e' m a
</span><span class="hs-identifier hs-var">E.catchE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var">distribute</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (ExceptT e m) r
</span><a href="#local-6989586621679066105"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var">distribute</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; Proxy a' a b' b (ExceptT e m) r
</span><a href="#local-6989586621679066104"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#catchError"><span class="hs-pragma hs-type">catchError</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-comment">-- | Catch an error using a catch function for the base monad</span><span>
</span><span id="line-116"></span><span id="local-6989586621679066558"><span id="local-6989586621679066559"><span id="local-6989586621679066560"><span id="local-6989586621679066561"><span id="local-6989586621679066562"><span id="local-6989586621679066563"><span id="local-6989586621679066564"><span class="annot"><a href="Pipes.Lift.html#liftCatchError"><span class="hs-identifier hs-type">liftCatchError</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span>   </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066563"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066562"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066561"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066560"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066559"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066558"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066563"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066562"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066561"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066560"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066559"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066563"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066562"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066561"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066560"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066559"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-comment">-- ^</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-glyph">-&gt;</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066563"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066562"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066561"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066560"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066559"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-123"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066558"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066563"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066562"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066561"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066560"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066559"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066563"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066562"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066561"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066560"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066559"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-comment">-- ^</span><span>
</span><span id="line-126"></span><span id="liftCatchError"><span class="annot"><span class="annottext">liftCatchError :: forall (m :: * -&gt; *) a' a b' b r e.
Monad m =&gt;
(m (Proxy a' a b' b m r)
 -&gt; (e -&gt; m (Proxy a' a b' b m r)) -&gt; m (Proxy a' a b' b m r))
-&gt; Proxy a' a b' b m r
-&gt; (e -&gt; Proxy a' a b' b m r)
-&gt; Proxy a' a b' b m r
</span><a href="Pipes.Lift.html#liftCatchError"><span class="hs-identifier hs-var hs-var">liftCatchError</span></a></span></span><span> </span><span id="local-6989586621679066101"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
-&gt; (e -&gt; m (Proxy a' a b' b m r)) -&gt; m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679066101"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679066100"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679066100"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span id="local-6989586621679066099"><span class="annot"><span class="annottext">e -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066099"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066098"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679066100"><span class="hs-identifier hs-var">p0</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>    </span><span id="local-6989586621679066098"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066098"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679066094"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679066094"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679066094"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679066092"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679066092"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679066091"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066091"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679066092"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679066090"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679066090"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066098"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066091"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679066090"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679066088"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679066088"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679066087"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066087"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679066088"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679066086"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679066086"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066098"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066087"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679066086"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679066084"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679066084"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679066084"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-132"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679066082"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679066082"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-133"></span><span>            </span><span id="local-6989586621679066081"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679066081"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679066082"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-134"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066098"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679066081"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
-&gt; (e -&gt; m (Proxy a' a b' b m r)) -&gt; m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679066101"><span class="hs-operator hs-var">`c`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679066080"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679066080"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066099"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679066080"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#liftCatchError"><span class="hs-pragma hs-type">liftCatchError</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | Wrap the base monad in 'M.MaybeT'</span><span>
</span><span id="line-138"></span><span id="local-6989586621679066539"><span id="local-6989586621679066540"><span id="local-6989586621679066541"><span id="local-6989586621679066542"><span id="local-6989586621679066543"><span id="local-6989586621679066544"><span class="annot"><a href="Pipes.Lift.html#maybeP"><span class="hs-identifier hs-type">maybeP</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066544"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066543"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066542"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066541"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066540"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066544"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679066539"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066543"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066542"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066541"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066540"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.MaybeT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066544"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066539"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-141"></span><span id="maybeP"><span class="annot"><span class="annottext">maybeP :: forall (m :: * -&gt; *) a' a b' b r.
Monad m =&gt;
Proxy a' a b' b m (Maybe r) -&gt; Proxy a' a b' b (MaybeT m) r
</span><a href="Pipes.Lift.html#maybeP"><span class="hs-identifier hs-var hs-var">maybeP</span></a></span></span><span> </span><span id="local-6989586621679066068"><span class="annot"><span class="annottext">Proxy a' a b' b m (Maybe r)
</span><a href="#local-6989586621679066068"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>    </span><span id="local-6989586621679066067"><span class="annot"><span class="annottext">Maybe r
</span><a href="#local-6989586621679066067"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (n :: * -&gt; *) a' a b' b r.
Functor m =&gt;
(forall x. m x -&gt; n x)
-&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-var">unsafeHoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (Maybe r)
</span><a href="#local-6989586621679066068"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">M.MaybeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe r
</span><a href="#local-6989586621679066067"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#maybeP"><span class="hs-pragma hs-type">maybeP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-comment">-- | Run 'M.MaybeT' in the base monad</span><span>
</span><span id="line-147"></span><span id="local-6989586621679066522"><span id="local-6989586621679066523"><span id="local-6989586621679066524"><span id="local-6989586621679066525"><span id="local-6989586621679066526"><span id="local-6989586621679066527"><span class="annot"><a href="Pipes.Lift.html#runMaybeP"><span class="hs-identifier hs-type">runMaybeP</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066527"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066526"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066525"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066524"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066523"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">M.MaybeT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066527"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066522"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066526"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066525"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066524"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066523"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066527"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679066522"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-151"></span><span id="runMaybeP"><span class="annot"><span class="annottext">runMaybeP :: forall (m :: * -&gt; *) a' a b' b r.
Monad m =&gt;
Proxy a' a b' b (MaybeT m) r -&gt; Proxy a' a b' b m (Maybe r)
</span><a href="Pipes.Lift.html#runMaybeP"><span class="hs-identifier hs-var hs-var">runMaybeP</span></a></span></span><span> </span><span id="local-6989586621679066052"><span class="annot"><span class="annottext">Proxy a' a b' b (MaybeT m) r
</span><a href="#local-6989586621679066052"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var">M.runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var">distribute</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (MaybeT m) r
</span><a href="#local-6989586621679066052"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-152"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runMaybeP"><span class="hs-pragma hs-type">runMaybeP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- | Wrap the base monad in 'R.ReaderT'</span><span>
</span><span id="line-155"></span><span id="local-6989586621679066507"><span id="local-6989586621679066508"><span id="local-6989586621679066509"><span id="local-6989586621679066510"><span id="local-6989586621679066511"><span id="local-6989586621679066512"><span id="local-6989586621679066513"><span class="annot"><a href="Pipes.Lift.html#readerP"><span class="hs-identifier hs-type">readerP</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066513"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066512"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066511"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066510"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066509"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066508"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066513"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066507"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066511"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066510"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066509"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066508"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">R.ReaderT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066512"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066513"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066507"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-158"></span><span id="readerP"><span class="annot"><span class="annottext">readerP :: forall (m :: * -&gt; *) i a' a b' b r.
Monad m =&gt;
(i -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b (ReaderT i m) r
</span><a href="Pipes.Lift.html#readerP"><span class="hs-identifier hs-var hs-var">readerP</span></a></span></span><span> </span><span id="local-6989586621679066039"><span class="annot"><span class="annottext">i -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066039"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-159"></span><span>    </span><span id="local-6989586621679066038"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679066038"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) r. Monad m =&gt; ReaderT r m r
</span><span class="hs-identifier hs-var">R.ask</span></span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (n :: * -&gt; *) a' a b' b r.
Functor m =&gt;
(forall x. m x -&gt; n x)
-&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-var">unsafeHoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679066039"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679066038"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#readerP"><span class="hs-pragma hs-type">readerP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-comment">-- | Run 'R.ReaderT' in the base monad</span><span>
</span><span id="line-164"></span><span id="local-6989586621679066485"><span id="local-6989586621679066486"><span id="local-6989586621679066487"><span id="local-6989586621679066488"><span id="local-6989586621679066489"><span id="local-6989586621679066490"><span id="local-6989586621679066491"><span class="annot"><a href="Pipes.Lift.html#runReaderP"><span class="hs-identifier hs-type">runReaderP</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066491"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066490"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066489"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066488"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066487"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066486"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">R.ReaderT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066490"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066491"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066485"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066489"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066488"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066487"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066486"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066491"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066485"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-169"></span><span id="runReaderP"><span class="annot"><span class="annottext">runReaderP :: forall (m :: * -&gt; *) i a' a b' b r.
Monad m =&gt;
i -&gt; Proxy a' a b' b (ReaderT i m) r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Lift.html#runReaderP"><span class="hs-identifier hs-var hs-var">runReaderP</span></a></span></span><span> </span><span id="local-6989586621679066023"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679066023"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621679066022"><span class="annot"><span class="annottext">Proxy a' a b' b (ReaderT i m) r
</span><a href="#local-6989586621679066022"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-operator hs-var">`R.runReaderT`</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679066023"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var">distribute</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (ReaderT i m) r
</span><a href="#local-6989586621679066022"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-170"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runReaderP"><span class="hs-pragma hs-type">runReaderP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- | Wrap the base monad in 'S.StateT'</span><span>
</span><span id="line-173"></span><span id="local-6989586621679066459"><span id="local-6989586621679066460"><span id="local-6989586621679066461"><span id="local-6989586621679066462"><span id="local-6989586621679066463"><span id="local-6989586621679066464"><span id="local-6989586621679066465"><span class="annot"><a href="Pipes.Lift.html#stateP"><span class="hs-identifier hs-type">stateP</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066465"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066464"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066463"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066462"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066461"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066460"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066465"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066459"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066464"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066463"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066462"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066461"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066460"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.StateT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066464"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066465"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066459"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-176"></span><span id="stateP"><span class="annot"><span class="annottext">stateP :: forall (m :: * -&gt; *) s a' a b' b r.
Monad m =&gt;
(s -&gt; Proxy a' a b' b m (r, s)) -&gt; Proxy a' a b' b (StateT s m) r
</span><a href="Pipes.Lift.html#stateP"><span class="hs-identifier hs-var hs-var">stateP</span></a></span></span><span> </span><span id="local-6989586621679066003"><span class="annot"><span class="annottext">s -&gt; Proxy a' a b' b m (r, s)
</span><a href="#local-6989586621679066003"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-177"></span><span>    </span><span id="local-6989586621679066002"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679066002"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><span class="hs-identifier hs-var">S.get</span></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679066000"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679066000"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679065999"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065999"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (n :: * -&gt; *) a' a b' b r.
Functor m =&gt;
(forall x. m x -&gt; n x)
-&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-var">unsafeHoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s -&gt; Proxy a' a b' b m (r, s)
</span><a href="#local-6989586621679066003"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679066002"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) s. Monad m =&gt; s -&gt; StateT s m ()
</span><span class="hs-identifier hs-var">S.put</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065999"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679066000"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-181"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#stateP"><span class="hs-pragma hs-type">stateP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-comment">-- | Run 'S.StateT' in the base monad</span><span>
</span><span id="line-184"></span><span id="local-6989586621679066435"><span id="local-6989586621679066436"><span id="local-6989586621679066437"><span id="local-6989586621679066438"><span id="local-6989586621679066439"><span id="local-6989586621679066440"><span id="local-6989586621679066441"><span class="annot"><a href="Pipes.Lift.html#runStateP"><span class="hs-identifier hs-type">runStateP</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066441"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066440"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066439"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066438"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066437"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066436"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.StateT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066440"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066441"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066435"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066439"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066438"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066437"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066436"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066441"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066435"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066440"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-189"></span><span id="runStateP"><span class="annot"><span class="annottext">runStateP :: forall (m :: * -&gt; *) s a' a b' b r.
Monad m =&gt;
s -&gt; Proxy a' a b' b (StateT s m) r -&gt; Proxy a' a b' b m (r, s)
</span><a href="Pipes.Lift.html#runStateP"><span class="hs-identifier hs-var hs-var">runStateP</span></a></span></span><span> </span><span id="local-6989586621679065984"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065984"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679065983"><span class="annot"><span class="annottext">Proxy a' a b' b (StateT s m) r
</span><a href="#local-6989586621679065983"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-operator hs-var">`S.runStateT`</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065984"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var">distribute</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (StateT s m) r
</span><a href="#local-6989586621679065983"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-190"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runStateP"><span class="hs-pragma hs-type">runStateP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-comment">-- | Evaluate 'S.StateT' in the base monad</span><span>
</span><span id="line-193"></span><span id="local-6989586621679066417"><span id="local-6989586621679066418"><span id="local-6989586621679066419"><span id="local-6989586621679066420"><span id="local-6989586621679066421"><span id="local-6989586621679066422"><span id="local-6989586621679066423"><span class="annot"><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier hs-type">evalStateP</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066423"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066422"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066421"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066420"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066419"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066418"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.StateT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066422"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066423"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066417"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066421"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066420"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066419"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066418"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066423"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066417"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-198"></span><span id="evalStateP"><span class="annot"><span class="annottext">evalStateP :: forall (m :: * -&gt; *) s a' a b' b r.
Monad m =&gt;
s -&gt; Proxy a' a b' b (StateT s m) r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier hs-var hs-var">evalStateP</span></a></span></span><span> </span><span id="local-6989586621679065975"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065975"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679065974"><span class="annot"><span class="annottext">Proxy a' a b' b (StateT s m) r
</span><a href="#local-6989586621679065974"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) s a' a b' b r.
Monad m =&gt;
s -&gt; Proxy a' a b' b (StateT s m) r -&gt; Proxy a' a b' b m (r, s)
</span><a href="Pipes.Lift.html#runStateP"><span class="hs-identifier hs-var">runStateP</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065975"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (StateT s m) r
</span><a href="#local-6989586621679065974"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-199"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#evalStateP"><span class="hs-pragma hs-type">evalStateP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-comment">-- | Execute 'S.StateT' in the base monad</span><span>
</span><span id="line-202"></span><span id="local-6989586621679066393"><span id="local-6989586621679066394"><span id="local-6989586621679066395"><span id="local-6989586621679066396"><span id="local-6989586621679066397"><span id="local-6989586621679066398"><span id="local-6989586621679066399"><span class="annot"><a href="Pipes.Lift.html#execStateP"><span class="hs-identifier hs-type">execStateP</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066399"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066398"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066397"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066396"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066395"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066394"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.StateT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066398"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066399"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066393"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066397"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066396"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066395"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066394"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066399"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066398"><span class="hs-identifier hs-type">s</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-207"></span><span id="execStateP"><span class="annot"><span class="annottext">execStateP :: forall (m :: * -&gt; *) s a' a b' b r.
Monad m =&gt;
s -&gt; Proxy a' a b' b (StateT s m) r -&gt; Proxy a' a b' b m s
</span><a href="Pipes.Lift.html#execStateP"><span class="hs-identifier hs-var hs-var">execStateP</span></a></span></span><span> </span><span id="local-6989586621679065968"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065968"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679065967"><span class="annot"><span class="annottext">Proxy a' a b' b (StateT s m) r
</span><a href="#local-6989586621679065967"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) s a' a b' b r.
Monad m =&gt;
s -&gt; Proxy a' a b' b (StateT s m) r -&gt; Proxy a' a b' b m (r, s)
</span><a href="Pipes.Lift.html#runStateP"><span class="hs-identifier hs-var">runStateP</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065968"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (StateT s m) r
</span><a href="#local-6989586621679065967"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-208"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#execStateP"><span class="hs-pragma hs-type">execStateP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-comment">{- $writert
    Note that 'runWriterP' and 'execWriterP' will keep the accumulator in
    weak-head-normal form so that folds run in constant space when possible.

    This means that until @transformers@ adds a truly strict 'W.WriterT', you
    should consider unwrapping 'W.WriterT' first using 'runWriterP' or
    'execWriterP' before running your 'Proxy'.  You will get better performance
    this way and eliminate space leaks if your accumulator doesn't have any lazy
    fields.
-}</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="hs-comment">-- | Wrap the base monad in 'W.WriterT'</span><span>
</span><span id="line-222"></span><span id="local-6989586621679066377"><span id="local-6989586621679066378"><span id="local-6989586621679066379"><span id="local-6989586621679066380"><span id="local-6989586621679066381"><span id="local-6989586621679066382"><span id="local-6989586621679066383"><span class="annot"><a href="Pipes.Lift.html#writerP"><span class="hs-identifier hs-type">writerP</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066383"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679066382"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066381"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066380"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066379"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066378"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066383"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066377"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066382"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066381"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066380"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066379"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066378"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">W.WriterT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066382"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066383"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066377"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-225"></span><span id="writerP"><span class="annot"><span class="annottext">writerP :: forall (m :: * -&gt; *) w a' a b' b r.
(Monad m, Monoid w) =&gt;
Proxy a' a b' b m (r, w) -&gt; Proxy a' a b' b (WriterT w m) r
</span><a href="Pipes.Lift.html#writerP"><span class="hs-identifier hs-var hs-var">writerP</span></a></span></span><span> </span><span id="local-6989586621679065952"><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w)
</span><a href="#local-6989586621679065952"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679065951"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065951"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679065950"><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679065950"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (n :: * -&gt; *) a' a b' b r.
Functor m =&gt;
(forall x. m x -&gt; n x)
-&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-var">unsafeHoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w)
</span><a href="#local-6989586621679065952"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) w. Monad m =&gt; w -&gt; WriterT w m ()
</span><span class="hs-identifier hs-var">W.tell</span></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679065950"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065951"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-229"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#writerP"><span class="hs-pragma hs-type">writerP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-comment">-- | Run 'W.WriterT' in the base monad</span><span>
</span><span id="line-232"></span><span id="local-6989586621679066355"><span id="local-6989586621679066356"><span id="local-6989586621679066357"><span id="local-6989586621679066358"><span id="local-6989586621679066359"><span id="local-6989586621679066360"><span id="local-6989586621679066361"><span class="annot"><a href="Pipes.Lift.html#runWriterP"><span class="hs-identifier hs-type">runWriterP</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066361"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679066360"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066359"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066358"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066357"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066356"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">W.WriterT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066360"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066361"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066355"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066359"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066358"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066357"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066356"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066361"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066355"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066360"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-236"></span><span id="runWriterP"><span class="annot"><span class="annottext">runWriterP :: forall (m :: * -&gt; *) w a' a b' b r.
(Monad m, Monoid w) =&gt;
Proxy a' a b' b (WriterT w m) r -&gt; Proxy a' a b' b m (r, w)
</span><a href="Pipes.Lift.html#runWriterP"><span class="hs-identifier hs-var hs-var">runWriterP</span></a></span></span><span> </span><span id="local-6989586621679065934"><span class="annot"><span class="annottext">Proxy a' a b' b (WriterT w m) r
</span><a href="#local-6989586621679065934"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><span class="hs-identifier hs-var">W.runWriterT</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var">distribute</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (WriterT w m) r
</span><a href="#local-6989586621679065934"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-237"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runWriterP"><span class="hs-pragma hs-type">runWriterP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- | Execute 'W.WriterT' in the base monad</span><span>
</span><span id="line-240"></span><span id="local-6989586621679066337"><span id="local-6989586621679066338"><span id="local-6989586621679066339"><span id="local-6989586621679066340"><span id="local-6989586621679066341"><span id="local-6989586621679066342"><span id="local-6989586621679066343"><span class="annot"><a href="Pipes.Lift.html#execWriterP"><span class="hs-identifier hs-type">execWriterP</span></a></span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066343"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679066342"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066341"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066339"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066338"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">W.WriterT</span></span><span> </span><span class="annot"><a href="#local-6989586621679066342"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066343"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066337"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066341"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066339"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066338"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066343"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066342"><span class="hs-identifier hs-type">w</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-244"></span><span id="execWriterP"><span class="annot"><span class="annottext">execWriterP :: forall (m :: * -&gt; *) w a' a b' b r.
(Monad m, Monoid w) =&gt;
Proxy a' a b' b (WriterT w m) r -&gt; Proxy a' a b' b m w
</span><a href="Pipes.Lift.html#execWriterP"><span class="hs-identifier hs-var hs-var">execWriterP</span></a></span></span><span> </span><span id="local-6989586621679065925"><span class="annot"><span class="annottext">Proxy a' a b' b (WriterT w m) r
</span><a href="#local-6989586621679065925"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) w a' a b' b r.
(Monad m, Monoid w) =&gt;
Proxy a' a b' b (WriterT w m) r -&gt; Proxy a' a b' b m (r, w)
</span><a href="Pipes.Lift.html#runWriterP"><span class="hs-identifier hs-var">runWriterP</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (WriterT w m) r
</span><a href="#local-6989586621679065925"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-245"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#execWriterP"><span class="hs-pragma hs-type">execWriterP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-comment">-- | Wrap the base monad in 'RWS.RWST'</span><span>
</span><span id="line-248"></span><span id="local-6989586621679066321"><span id="local-6989586621679066322"><span id="local-6989586621679066323"><span id="local-6989586621679066324"><span id="local-6989586621679066325"><span id="local-6989586621679066326"><span id="local-6989586621679066327"><span id="local-6989586621679066328"><span id="local-6989586621679066329"><span class="annot"><a href="Pipes.Lift.html#rwsP"><span class="hs-identifier hs-type">rwsP</span></a></span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066329"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679066328"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066327"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066326"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066325"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066324"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066323"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066322"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066329"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066321"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066326"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066328"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066325"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066324"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066323"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066322"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RWS.RWST</span></span><span> </span><span class="annot"><a href="#local-6989586621679066327"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066328"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066326"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066329"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066321"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-252"></span><span id="rwsP"><span class="annot"><span class="annottext">rwsP :: forall (m :: * -&gt; *) w i s a' a b' b r.
(Monad m, Monoid w) =&gt;
(i -&gt; s -&gt; Proxy a' a b' b m (r, s, w))
-&gt; Proxy a' a b' b (RWST i w s m) r
</span><a href="Pipes.Lift.html#rwsP"><span class="hs-identifier hs-var hs-var">rwsP</span></a></span></span><span> </span><span id="local-6989586621679065897"><span class="annot"><span class="annottext">i -&gt; s -&gt; Proxy a' a b' b m (r, s, w)
</span><a href="#local-6989586621679065897"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-253"></span><span>    </span><span id="local-6989586621679065896"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679065896"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) r s. (Monoid w, Monad m) =&gt; RWST r w s m r
</span><span class="hs-identifier hs-var">RWS.ask</span></span><span>
</span><span id="line-254"></span><span>    </span><span id="local-6989586621679065894"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065894"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) r s. (Monoid w, Monad m) =&gt; RWST r w s m s
</span><span class="hs-identifier hs-var">RWS.get</span></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679065892"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065892"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679065891"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065891"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679065890"><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679065890"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (n :: * -&gt; *) a' a b' b r.
Functor m =&gt;
(forall x. m x -&gt; n x)
-&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-var">unsafeHoist</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; s -&gt; Proxy a' a b' b m (r, s, w)
</span><a href="#local-6989586621679065897"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679065896"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065894"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-257"></span><span>        </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) s r.
(Monoid w, Monad m) =&gt;
s -&gt; RWST r w s m ()
</span><span class="hs-identifier hs-var">RWS.put</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065891"><span class="hs-identifier hs-var">s'</span></a></span><span>
</span><span id="line-258"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) w r s. Monad m =&gt; w -&gt; RWST r w s m ()
</span><span class="hs-identifier hs-var">RWS.tell</span></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679065890"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065892"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-260"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#rwsP"><span class="hs-pragma hs-type">rwsP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-comment">-- | Run 'RWS.RWST' in the base monad</span><span>
</span><span id="line-263"></span><span id="local-6989586621679066275"><span id="local-6989586621679066276"><span id="local-6989586621679066277"><span id="local-6989586621679066278"><span id="local-6989586621679066279"><span id="local-6989586621679066280"><span id="local-6989586621679066281"><span id="local-6989586621679066282"><span id="local-6989586621679066283"><span class="annot"><a href="Pipes.Lift.html#runRWSP"><span class="hs-identifier hs-type">runRWSP</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066283"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679066282"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066281"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066280"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066279"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066278"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066277"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066276"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RWS.RWST</span></span><span> </span><span class="annot"><a href="#local-6989586621679066281"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066282"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066280"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066283"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066275"><span class="hs-identifier hs-type">d</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066279"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066278"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066277"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066276"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066283"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066275"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066280"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066282"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-269"></span><span id="runRWSP"><span class="annot"><span class="annottext">runRWSP :: forall (m :: * -&gt; *) w r s a' a b' b d.
(Monad m, Monoid w) =&gt;
r
-&gt; s
-&gt; Proxy a' a b' b (RWST r w s m) d
-&gt; Proxy a' a b' b m (d, s, w)
</span><a href="Pipes.Lift.html#runRWSP"><span class="hs-identifier hs-var hs-var">runRWSP</span></a></span></span><span>  </span><span id="local-6989586621679065873"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065873"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679065872"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065872"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679065871"><span class="annot"><span class="annottext">Proxy a' a b' b (RWST r w s m) d
</span><a href="#local-6989586621679065871"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679065870"><span class="annot"><span class="annottext">RWST r w s (Proxy a' a b' b m) d
</span><a href="#local-6989586621679065870"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall r w s (m :: * -&gt; *) a.
RWST r w s m a -&gt; r -&gt; s -&gt; m (a, s, w)
</span><span class="hs-identifier hs-var">RWS.runRWST</span></span><span> </span><span class="annot"><span class="annottext">RWST r w s (Proxy a' a b' b m) d
</span><a href="#local-6989586621679065870"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065873"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065872"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) (t :: (* -&gt; *) -&gt; * -&gt; *) a' a b' b r.
(Monad m, MonadTrans t, MFunctor t, Monad (t m),
 Monad (t (Proxy a' a b' b m))) =&gt;
Proxy a' a b' b (t m) r -&gt; t (Proxy a' a b' b m) r
</span><a href="Pipes.Lift.html#distribute"><span class="hs-identifier hs-var">distribute</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (RWST r w s m) d
</span><a href="#local-6989586621679065871"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-270"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#runRWSP"><span class="hs-pragma hs-type">runRWSP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- | Evaluate 'RWS.RWST' in the base monad</span><span>
</span><span id="line-273"></span><span id="local-6989586621679066249"><span id="local-6989586621679066250"><span id="local-6989586621679066251"><span id="local-6989586621679066252"><span id="local-6989586621679066253"><span id="local-6989586621679066254"><span id="local-6989586621679066255"><span id="local-6989586621679066256"><span id="local-6989586621679066257"><span class="annot"><a href="Pipes.Lift.html#evalRWSP"><span class="hs-identifier hs-type">evalRWSP</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066257"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679066256"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066255"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066254"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066253"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066252"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066251"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066250"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RWS.RWST</span></span><span> </span><span class="annot"><a href="#local-6989586621679066255"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066256"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066254"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066257"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066249"><span class="hs-identifier hs-type">d</span></a></span><span>
</span><span id="line-278"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066253"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066252"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066251"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066250"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066257"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066249"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066256"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-279"></span><span id="evalRWSP"><span class="annot"><span class="annottext">evalRWSP :: forall (m :: * -&gt; *) w r s a' a b' b d.
(Monad m, Monoid w) =&gt;
r
-&gt; s
-&gt; Proxy a' a b' b (RWST r w s m) d
-&gt; Proxy a' a b' b m (d, w)
</span><a href="Pipes.Lift.html#evalRWSP"><span class="hs-identifier hs-var hs-var">evalRWSP</span></a></span></span><span> </span><span id="local-6989586621679065861"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065861"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679065860"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065860"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679065859"><span class="annot"><span class="annottext">Proxy a' a b' b (RWST r w s m) d
</span><a href="#local-6989586621679065859"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall {a} {b} {b}. (a, b, b) -&gt; (a, b)
</span><a href="#local-6989586621679065858"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) w r s a' a b' b d.
(Monad m, Monoid w) =&gt;
r
-&gt; s
-&gt; Proxy a' a b' b (RWST r w s m) d
-&gt; Proxy a' a b' b m (d, s, w)
</span><a href="Pipes.Lift.html#runRWSP"><span class="hs-identifier hs-var">runRWSP</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065861"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065860"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (RWST r w s m) d
</span><a href="#local-6989586621679065859"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>    </span><span id="local-6989586621679065858"><span class="annot"><span class="annottext">f :: (a, b, b) -&gt; (a, b)
</span><a href="#local-6989586621679065858"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679065857"><span class="annot"><span class="annottext">(a, b, b)
</span><a href="#local-6989586621679065857"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679065856"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679065856"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679065855"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679065855"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, b, b)
</span><a href="#local-6989586621679065857"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679065856"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679065855"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#evalRWSP"><span class="hs-pragma hs-type">evalRWSP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-comment">-- | Execute 'RWS.RWST' in the base monad</span><span>
</span><span id="line-285"></span><span id="local-6989586621679066228"><span id="local-6989586621679066229"><span id="local-6989586621679066230"><span id="local-6989586621679066231"><span id="local-6989586621679066232"><span id="local-6989586621679066233"><span id="local-6989586621679066234"><span id="local-6989586621679066235"><span id="local-6989586621679066236"><span class="annot"><a href="Pipes.Lift.html#execRWSP"><span class="hs-identifier hs-type">execRWSP</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679066236"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679066235"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066234"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679066233"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066232"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066231"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066230"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066229"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RWS.RWST</span></span><span> </span><span class="annot"><a href="#local-6989586621679066234"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066235"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066233"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066236"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679066228"><span class="hs-identifier hs-type">d</span></a></span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066232"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066231"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066230"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066229"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679066236"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679066233"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679066235"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-291"></span><span id="execRWSP"><span class="annot"><span class="annottext">execRWSP :: forall (m :: * -&gt; *) w r s a' a b' b d.
(Monad m, Monoid w) =&gt;
r
-&gt; s
-&gt; Proxy a' a b' b (RWST r w s m) d
-&gt; Proxy a' a b' b m (s, w)
</span><a href="Pipes.Lift.html#execRWSP"><span class="hs-identifier hs-var hs-var">execRWSP</span></a></span></span><span> </span><span id="local-6989586621679065847"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065847"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679065846"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065846"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679065845"><span class="annot"><span class="annottext">Proxy a' a b' b (RWST r w s m) d
</span><a href="#local-6989586621679065845"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">forall {a} {a} {b}. (a, a, b) -&gt; (a, b)
</span><a href="#local-6989586621679065844"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) w r s a' a b' b d.
(Monad m, Monoid w) =&gt;
r
-&gt; s
-&gt; Proxy a' a b' b (RWST r w s m) d
-&gt; Proxy a' a b' b m (d, s, w)
</span><a href="Pipes.Lift.html#runRWSP"><span class="hs-identifier hs-var">runRWSP</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679065847"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679065846"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b (RWST r w s m) d
</span><a href="#local-6989586621679065845"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621679065844"><span class="annot"><span class="annottext">f :: (a, a, b) -&gt; (a, b)
</span><a href="#local-6989586621679065844"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679065843"><span class="annot"><span class="annottext">(a, a, b)
</span><a href="#local-6989586621679065843"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679065842"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679065842"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679065841"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679065841"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, a, b)
</span><a href="#local-6989586621679065843"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679065842"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679065841"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Lift.html#execRWSP"><span class="hs-pragma hs-type">execRWSP</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-comment">{- $tutorial
    Probably the most useful functionality in this module is lifted error
    handling.  Suppose that you have a 'Pipes.Pipe' whose base monad can fail
    using 'E.ExceptT':

&gt; import Control.Monad.Trans.Error
&gt; import Pipes
&gt;
&gt; example :: Monad m =&gt; Pipe Int Int (ExceptT String m) r
&gt; example = for cat $ \n -&gt;
&gt;     if n == 0
&gt;     then lift $ throwError &quot;Zero is forbidden&quot;
&gt;     else yield n

    Without the tools in this module you cannot recover from any potential error
    until after you compose and run the pipeline:

&gt;&gt;&gt; import qualified Pipes.Prelude as P
&gt;&gt;&gt; runExceptT $ runEffect $ P.readLn &gt;-&gt; example &gt;-&gt; P.print
42&lt;Enter&gt;
42
1&lt;Enter&gt;
1
0&lt;Enter&gt;
Zero is forbidden
&gt;&gt;&gt;

    This module provides `catchError`, which lets you catch and recover from
    errors inside the 'Pipe':

&gt;  import qualified Pipes.Lift as Lift
&gt; 
&gt;  caught :: Pipe Int Int (ExceptT String IO) r
&gt;  caught = example `Lift.catchError` \str -&gt; do
&gt;      liftIO (putStrLn str)
&gt;      caught

    This lets you resume streaming in the face of errors raised within the base
    monad:

&gt;&gt;&gt; runExceptT $ runEffect $ P.readLn &gt;-&gt; caught &gt;-&gt; P.print
0&lt;Enter&gt;
Zero is forbidden
42&lt;Enter&gt;
42
0&lt;Enter&gt;
Zero is forbidden
1&lt;Enter&gt;
1
...

    Another common use case is running a base monad before running the pipeline.
    For example, the following contrived 'Producer' uses 'S.StateT' gratuitously
    to increment numbers:

&gt; import Control.Monad (forever)
&gt; import Control.Monad.Trans.State.Strict
&gt; import Pipes
&gt; 
&gt; numbers :: Monad m =&gt; Producer Int (StateT Int m) r
&gt; numbers = forever $ do
&gt;     n &lt;- lift get
&gt;     yield n
&gt;     lift $ put $! n + 1

    You can run the 'StateT' monad by supplying an initial state, before you
    ever compose the 'Producer':

&gt; import Pipes.Lift
&gt;
&gt; naturals :: Monad m =&gt; Producer Int m r
&gt; naturals = evalStateP 0 numbers

    This deletes 'StateT' from the base monad entirely, give you a completely
    pure 'Pipes.Producer':

&gt;&gt;&gt; Pipes.Prelude.toList naturals
[0,1,2,3,4,5,6...]

    Note that the convention for the 'S.StateT' run functions is backwards from
    @transformers@ for convenience: the initial state is the first argument.

    All of these functions internally use 'distribute', which can pull out most
    monad transformers from the base monad.  For example, 'evalStateP' is
    defined in terms of 'distribute':

&gt; evalStateP s p = evalStateT (distribute p) s

    Therefore you can use 'distribute' to run other monad transformers, too, as
    long as they implement the 'MFunctor' type class from the @mmorph@ library.
-}</span><span>
</span><span id="line-387"></span></pre></body></html>