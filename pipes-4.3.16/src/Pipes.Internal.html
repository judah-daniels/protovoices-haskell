<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-| This is an internal module, meaning that it is unsafe to import unless you
    understand the risks.

    This module provides a fast implementation by weakening the monad
    transformer laws.  These laws do not hold if you can pattern match on the
    constructors, as the following counter-example illustrates:

@
'lift' '.' 'return' = 'M' '.' 'return' '.' 'Pure'

'return' = 'Pure'

'lift' '.' 'return' /= 'return'
@

    You do not need to worry about this if you do not import this module, since
    the other modules in this library do not export the constructors or export
    any functions which can violate the monad transformer laws.
-}</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-pragma">{-# LANGUAGE CPP                   #-}</span><span>
</span><span id="line-22"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-23"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-24"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes            #-}</span><span>
</span><span id="line-25"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-26"></span><span class="hs-pragma">{-# LANGUAGE Trustworthy           #-}</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Pipes.Internal</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Internal</span></span><span>
</span><span id="line-30"></span><span>      </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier">Proxy</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier">unsafeHoist</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Internal.html#observe"><span class="hs-identifier">observe</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Internal.html#X"><span class="hs-identifier">X</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Pipes.Internal.html#closed"><span class="hs-identifier">closed</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Fail</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadFail</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fail</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">liftIO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadTrans</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">lift</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Morph</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MFunctor</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">hoist</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MMonad</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">embed</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadError</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Catch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadThrow</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadCatch</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadReader</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadState</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Writer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadWriter</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">censor</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Void</span></span><span class="hs-special">)</span><span class="hs-cpp">

#if MIN_VERSION_base(4,8,0)
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Alternative</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Semigroup</span></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-comment">{-| A 'Proxy' is a monad transformer that receives and sends information on both
    an upstream and downstream interface.

    The type variables signify:

    * @a'@ and @a@ - The upstream interface, where @(a')@s go out and @(a)@s
      come in

    * @b'@ and @b@ - The downstream interface, where @(b)@s go out and @(b')@s
      come in

    * @m @ - The base monad

    * @r @ - The return value
-}</span><span>
</span><span id="line-72"></span><span class="hs-keyword">data</span><span> </span><span id="Proxy"><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span></span><span> </span><span id="local-6989586621679063911"><span class="annot"><a href="#local-6989586621679063911"><span class="hs-identifier hs-type">a'</span></a></span></span><span> </span><span id="local-6989586621679063910"><span class="annot"><a href="#local-6989586621679063910"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679063909"><span class="annot"><a href="#local-6989586621679063909"><span class="hs-identifier hs-type">b'</span></a></span></span><span> </span><span id="local-6989586621679063908"><span class="annot"><a href="#local-6989586621679063908"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679063907"><span class="annot"><a href="#local-6989586621679063907"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679063906"><span class="annot"><a href="#local-6989586621679063906"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="Request"><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679063911"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063910"><span class="hs-identifier hs-type">a</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063911"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063910"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063909"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063908"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063907"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063906"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Respond"><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679063908"><span class="hs-identifier hs-type">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063909"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063911"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063910"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063909"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063908"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063907"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063906"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="M"><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063907"><span class="hs-identifier hs-type">m</span></a></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063911"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063910"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063909"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063908"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063907"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063906"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="Pure"><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span></span><span>    </span><span class="annot"><a href="#local-6989586621679063906"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063546"><span id="local-6989586621679063919"><span id="local-6989586621679063920"><span id="local-6989586621679063921"><span id="local-6989586621679063922"><span id="local-6989586621679063923"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679063923"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063922"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063921"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063920"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063919"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063923"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-79"></span><span>    </span><span id="local-6989586621679063543"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; Proxy a' a b' b m a -&gt; Proxy a' a b' b m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621679063542"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679063542"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679063541"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063541"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {a'} {a} {b'} {b}.
Functor m =&gt;
Proxy a' a b' b m a -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063540"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063541"><span class="hs-identifier hs-var">p0</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-80"></span><span>        </span><span id="local-6989586621679063540"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m a -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063540"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063537"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063537"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063537"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-81"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063536"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063536"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063535"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063535"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063536"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063534"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063534"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063540"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063535"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063534"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063533"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063533"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063532"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063532"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063533"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063531"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063531"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063540"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063532"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063531"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063530"><span class="annot"><span class="annottext">m (Proxy a' a b' b m a)
</span><a href="#local-6989586621679063530"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063540"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m a)
</span><a href="#local-6989586621679063530"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063528"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063528"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621679063542"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063528"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063519"><span id="local-6989586621679063522"><span id="local-6989586621679063887"><span id="local-6989586621679063888"><span id="local-6989586621679063889"><span id="local-6989586621679063890"><span id="local-6989586621679063891"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679063891"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063890"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063889"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063888"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063887"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063891"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>    </span><span id="local-6989586621679063517"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span id="local-6989586621679063516"><span class="annot"><span class="annottext">Proxy a' a b' b m (a -&gt; b)
</span><a href="#local-6989586621679063516"><span class="hs-identifier hs-var">pf</span></a></span></span><span> </span><span id="local-6989586621679063515"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b.
Proxy a' a b' b m (a -&gt; b)
-&gt; Proxy a' a b' b m a -&gt; Proxy a' a b' b m b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span id="local-6989586621679063514"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063514"><span class="hs-identifier hs-var">px</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {r}. Proxy a' a b' b m (a -&gt; r) -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063513"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (a -&gt; b)
</span><a href="#local-6989586621679063516"><span class="hs-identifier hs-var">pf</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-89"></span><span>        </span><span id="local-6989586621679063513"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m (a -&gt; r) -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063513"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063510"><span class="annot"><span class="annottext">Proxy a' a b' b m (a -&gt; r)
</span><a href="#local-6989586621679063510"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (a -&gt; r)
</span><a href="#local-6989586621679063510"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-90"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063509"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063509"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063508"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m (a -&gt; r)
</span><a href="#local-6989586621679063508"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063509"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063507"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063507"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (a -&gt; r) -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063513"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m (a -&gt; r)
</span><a href="#local-6989586621679063508"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063507"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063506"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063506"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063505"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m (a -&gt; r)
</span><a href="#local-6989586621679063505"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063506"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063504"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063504"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (a -&gt; r) -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063513"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m (a -&gt; r)
</span><a href="#local-6989586621679063505"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063504"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063503"><span class="annot"><span class="annottext">m (Proxy a' a b' b m (a -&gt; r))
</span><a href="#local-6989586621679063503"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m (a -&gt; r) -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063513"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m (a -&gt; r))
</span><a href="#local-6989586621679063503"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063502"><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679063502"><span class="hs-identifier hs-var">f</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; r
</span><a href="#local-6989586621679063502"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063514"><span class="hs-identifier hs-var">px</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span id="local-6989586621679063501"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063501"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679063500"><span class="annot"><span class="annottext">*&gt; :: forall a b.
Proxy a' a b' b m a -&gt; Proxy a' a b' b m b -&gt; Proxy a' a b' b m b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">*&gt;</span></span></span><span> </span><span id="local-6989586621679063499"><span class="annot"><span class="annottext">Proxy a' a b' b m b
</span><a href="#local-6989586621679063499"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {r}. Proxy a' a b' b m r -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063498"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063501"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>        </span><span id="local-6989586621679063498"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063498"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063496"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063496"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063496"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-96"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063495"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063495"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063494"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063494"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063495"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063493"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063493"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063498"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063494"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063493"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063492"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063492"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063491"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063491"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063492"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063490"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063490"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063498"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063491"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063490"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063489"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063489"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m b
</span><a href="#local-6989586621679063498"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063489"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span class="annot"><span class="annottext">r
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m b
</span><a href="#local-6989586621679063499"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063484"><span id="local-6989586621679063870"><span id="local-6989586621679063871"><span id="local-6989586621679063872"><span id="local-6989586621679063873"><span id="local-6989586621679063874"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679063874"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063873"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063872"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063871"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063870"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063874"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-102"></span><span>    </span><span id="local-6989586621679063480"><span class="annot"><span class="annottext">return :: forall a. a -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">return</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-103"></span><span>    </span><span id="local-6989586621679063478"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b.
Proxy a' a b' b m a
-&gt; (a -&gt; Proxy a' a b' b m b) -&gt; Proxy a' a b' b m b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&gt;&gt;=)</span></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a' a b' b r r'.
Functor m =&gt;
Proxy a' a b' b m r
-&gt; (r -&gt; Proxy a' a b' b m r') -&gt; Proxy a' a b' b m r'
</span><a href="Pipes.Internal.html#_bind"><span class="hs-identifier hs-var">_bind</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span id="local-6989586621679063863"><span id="local-6989586621679063864"><span id="local-6989586621679063865"><span id="local-6989586621679063866"><span id="local-6989586621679063867"><span id="local-6989586621679063868"><span id="local-6989586621679063869"><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-identifier hs-type">_bind</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679063869"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063868"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063867"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063866"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063865"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063869"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063864"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063864"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063868"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063867"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063866"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063865"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063869"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063863"><span class="hs-identifier hs-type">r'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063868"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063867"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063866"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063865"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063869"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063863"><span class="hs-identifier hs-type">r'</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-110"></span><span id="local-6989586621679063475"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063475"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span id="_bind"><span class="annot"><span class="annottext">_bind :: forall (m :: * -&gt; *) a' a b' b r r'.
Functor m =&gt;
Proxy a' a b' b m r
-&gt; (r -&gt; Proxy a' a b' b m r') -&gt; Proxy a' a b' b m r'
</span><a href="Pipes.Internal.html#_bind"><span class="hs-operator hs-var hs-var">`_bind`</span></a></span></span><span> </span><span id="local-6989586621679063474"><span class="annot"><span class="annottext">r -&gt; Proxy a' a b' b m r'
</span><a href="#local-6989586621679063474"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r'
</span><a href="#local-6989586621679063473"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063475"><span class="hs-identifier hs-var">p0</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-111"></span><span>    </span><span id="local-6989586621679063473"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; Proxy a' a b' b m r'
</span><a href="#local-6989586621679063473"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063471"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063471"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063471"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-112"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063470"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063470"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063469"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063469"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063470"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063468"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063468"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r'
</span><a href="#local-6989586621679063473"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063469"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063468"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063467"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063467"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063466"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063466"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063467"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063465"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063465"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r'
</span><a href="#local-6989586621679063473"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063466"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063465"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063464"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063464"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r'
</span><a href="#local-6989586621679063473"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063464"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063463"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063463"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">r -&gt; Proxy a' a b' b m r'
</span><a href="#local-6989586621679063474"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063463"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-116"></span><span class="hs-pragma">{-# NOINLINE</span><span class="hs-pragma">[</span><span class="hs-pragma">1</span><span class="hs-pragma">]</span><span> </span><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-pragma hs-type">_bind</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="hs-pragma">&quot;_bind (Request a' k) f&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679063462"><span class="annot"><a href="#local-6989586621679063462"><span class="hs-pragma hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063461"><span class="annot"><a href="#local-6989586621679063461"><span class="hs-pragma hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679063460"><span class="annot"><a href="#local-6989586621679063460"><span class="hs-pragma hs-var">f</span></a></span></span><span> </span><span class="hs-pragma">.</span><span>
</span><span id="line-120"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-pragma hs-type">_bind</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-pragma hs-type">Request</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063462"><span class="hs-pragma hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063461"><span class="hs-pragma hs-type">k</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679063460"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-pragma hs-type">Request</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063462"><span class="hs-pragma hs-type">a'</span></a></span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">\</span><span id="local-6989586621679063459"><span class="annot"><a href="#local-6989586621679063459"><span class="hs-pragma hs-var">a</span></a></span></span><span>  </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-pragma hs-type">_bind</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="#local-6989586621679063461"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063459"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span>  </span><span class="annot"><a href="#local-6989586621679063460"><span class="hs-pragma hs-type">f</span></a></span><span class="hs-pragma">)</span><span class="hs-pragma">;</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><span class="hs-pragma">&quot;_bind (Respond b  k) f&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679063458"><span class="annot"><a href="#local-6989586621679063458"><span class="hs-pragma hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063457"><span class="annot"><a href="#local-6989586621679063457"><span class="hs-pragma hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679063456"><span class="annot"><a href="#local-6989586621679063456"><span class="hs-pragma hs-var">f</span></a></span></span><span> </span><span class="hs-pragma">.</span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-pragma hs-type">_bind</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-pragma hs-type">Respond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063458"><span class="hs-pragma hs-type">b</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621679063457"><span class="hs-pragma hs-type">k</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679063456"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-pragma hs-type">Respond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063458"><span class="hs-pragma hs-type">b</span></a></span><span>  </span><span class="hs-pragma">(</span><span class="hs-pragma">\</span><span id="local-6989586621679063455"><span class="annot"><a href="#local-6989586621679063455"><span class="hs-pragma hs-var">b'</span></a></span></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-pragma hs-type">_bind</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="#local-6989586621679063457"><span class="hs-pragma hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063455"><span class="hs-pragma hs-type">b'</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679063456"><span class="hs-pragma hs-type">f</span></a></span><span class="hs-pragma">)</span><span class="hs-pragma">;</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="hs-pragma">&quot;_bind (M          m) f&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679063454"><span class="annot"><a href="#local-6989586621679063454"><span class="hs-pragma hs-var">m</span></a></span></span><span>    </span><span id="local-6989586621679063453"><span class="annot"><a href="#local-6989586621679063453"><span class="hs-pragma hs-var">f</span></a></span></span><span> </span><span class="hs-pragma">.</span><span>
</span><span id="line-124"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-pragma hs-type">_bind</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-pragma hs-type">M</span></a></span><span>          </span><span class="annot"><a href="#local-6989586621679063454"><span class="hs-pragma hs-type">m</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679063453"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-pragma hs-type">M</span></a></span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">(</span><span class="hs-pragma">\</span><span id="local-6989586621679063452"><span class="annot"><a href="#local-6989586621679063452"><span class="hs-pragma hs-var">p</span></a></span></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-pragma hs-type">_bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063452"><span class="hs-pragma hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063453"><span class="hs-pragma hs-type">f</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><span class="hs-pragma hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679063454"><span class="hs-pragma hs-type">m</span></a></span><span class="hs-pragma">)</span><span class="hs-pragma">;</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><span class="hs-pragma">&quot;_bind (Pure    r   ) f&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679063451"><span class="annot"><a href="#local-6989586621679063451"><span class="hs-pragma hs-var">r</span></a></span></span><span>    </span><span id="local-6989586621679063450"><span class="annot"><a href="#local-6989586621679063450"><span class="hs-pragma hs-var">f</span></a></span></span><span> </span><span class="hs-pragma">.</span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#_bind"><span class="hs-pragma hs-type">_bind</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-pragma hs-type">Pure</span></a></span><span>    </span><span class="annot"><a href="#local-6989586621679063451"><span class="hs-pragma hs-type">r</span></a></span><span>   </span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679063450"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="#local-6989586621679063450"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063451"><span class="hs-pragma hs-type">r</span></a></span><span class="hs-pragma">;</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063445"><span id="local-6989586621679063447"><span id="local-6989586621679063848"><span id="local-6989586621679063849"><span id="local-6989586621679063850"><span id="local-6989586621679063851"><span id="local-6989586621679063852"><span id="local-6989586621679063853"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679063853"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679063852"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063851"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063850"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063849"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063848"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063853"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063852"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>    </span><span id="local-6989586621679063443"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063443"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621679063442"><span class="annot"><span class="annottext">&lt;&gt; :: Proxy a' a b' b m r -&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679063441"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063441"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063440"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063443"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-131"></span><span>        </span><span id="local-6989586621679063440"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063440"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063436"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063436"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063436"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-132"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063435"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063435"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063434"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063434"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063435"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063433"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063433"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063440"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063434"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063433"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063432"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063432"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063431"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063431"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063432"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063430"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063430"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063440"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063431"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063430"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063429"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063429"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063440"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063429"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063428"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063428"><span class="hs-identifier hs-var">r1</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063428"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063441"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063421"><span id="local-6989586621679063423"><span id="local-6989586621679063841"><span id="local-6989586621679063842"><span id="local-6989586621679063843"><span id="local-6989586621679063844"><span id="local-6989586621679063845"><span id="local-6989586621679063846"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679063846"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679063845"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679063845"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063844"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063843"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063842"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063841"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063846"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063845"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621679063418"><span class="annot"><span class="annottext">mempty :: Proxy a' a b' b m r
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-cpp">
#if !(MIN_VERSION_base(4,11,0))
</span><span>    </span><span class="hs-identifier">mappend</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator">&lt;&gt;</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063829"><span id="local-6989586621679063830"><span id="local-6989586621679063831"><span id="local-6989586621679063832"><span class="annot"><span class="hs-identifier hs-type">MonadTrans</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063832"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063831"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063830"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063829"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>    </span><span id="local-6989586621679063408"><span class="annot"><span class="annottext">lift :: forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063408"><span class="hs-identifier hs-var hs-var hs-var hs-var">lift</span></a></span></span><span> </span><span id="local-6989586621679063407"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679063407"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679063407"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-comment">{-| 'unsafeHoist' is like 'hoist', but faster.

    This is labeled as unsafe because you will break the monad transformer laws
    if you do not pass a monad morphism as the first argument.  This function is
    safe if you pass a monad morphism as the first argument.
-}</span><span>
</span><span id="line-152"></span><span id="local-6989586621679063819"><span id="local-6989586621679063820"><span id="local-6989586621679063821"><span id="local-6989586621679063822"><span id="local-6989586621679063823"><span id="local-6989586621679063824"><span id="local-6989586621679063826"><span class="annot"><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-type">unsafeHoist</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679063826"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679063825"><span class="annot"><a href="#local-6989586621679063825"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679063826"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063825"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063824"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063825"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063823"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063822"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063821"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063820"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063826"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063819"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063823"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063822"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063821"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063820"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063824"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063819"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-155"></span><span id="unsafeHoist"><span class="annot"><span class="annottext">unsafeHoist :: forall (m :: * -&gt; *) (n :: * -&gt; *) a' a b' b r.
Functor m =&gt;
(forall x. m x -&gt; n x)
-&gt; Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-identifier hs-var hs-var">unsafeHoist</span></a></span></span><span> </span><span id="local-6989586621679063405"><span class="annot"><span class="annottext">forall x. m x -&gt; n x
</span><a href="#local-6989586621679063405"><span class="hs-identifier hs-var">nat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {a'} {a} {b'} {b} {r}.
Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063404"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-157"></span><span>    </span><span id="local-6989586621679063404"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063404"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063402"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063402"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063402"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-158"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063401"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063401"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063400"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063400"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063401"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063399"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063399"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063404"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063400"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063399"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063398"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063398"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063397"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063397"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063398"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063396"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063396"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063404"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063397"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063396"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063395"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063395"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x. m x -&gt; n x
</span><a href="#local-6989586621679063405"><span class="hs-identifier hs-var">nat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063404"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063395"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063394"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063394"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063394"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-162"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Internal.html#unsafeHoist"><span class="hs-pragma hs-type">unsafeHoist</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063797"><span id="local-6989586621679063798"><span id="local-6989586621679063799"><span id="local-6989586621679063800"><span class="annot"><span class="hs-identifier hs-type">MFunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063800"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063799"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063798"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063797"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621679063386"><span class="annot"><span class="annottext">hoist :: forall (m :: * -&gt; *) (n :: * -&gt; *) b.
Monad m =&gt;
(forall a. m a -&gt; n a)
-&gt; Proxy a' a b' b m b -&gt; Proxy a' a b' b n b
</span><a href="#local-6989586621679063386"><span class="hs-identifier hs-var hs-var hs-var hs-var">hoist</span></a></span></span><span> </span><span id="local-6989586621679063385"><span class="annot"><span class="annottext">forall a. m a -&gt; n a
</span><a href="#local-6989586621679063385"><span class="hs-identifier hs-var">nat</span></a></span></span><span> </span><span id="local-6989586621679063384"><span class="annot"><span class="annottext">Proxy a' a b' b m b
</span><a href="#local-6989586621679063384"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {a'} {a} {b'} {b} {r}.
Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063383"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a' a b' b r.
Monad m =&gt;
Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#observe"><span class="hs-identifier hs-var">observe</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m b
</span><a href="#local-6989586621679063384"><span class="hs-identifier hs-var">p0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-167"></span><span>        </span><span id="local-6989586621679063383"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063383"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063381"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063381"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063381"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-168"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063380"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063380"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063379"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063379"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063380"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063378"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063378"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063383"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063379"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063378"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063377"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063377"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063376"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063376"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063377"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063375"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063375"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063383"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063376"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063375"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063374"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063374"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. m a -&gt; n a
</span><a href="#local-6989586621679063385"><span class="hs-identifier hs-var">nat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063383"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063374"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063373"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063373"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063373"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063769"><span id="local-6989586621679063770"><span id="local-6989586621679063771"><span id="local-6989586621679063772"><span class="annot"><span class="hs-identifier hs-type">MMonad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063772"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063771"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063770"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063769"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-174"></span><span>    </span><span id="local-6989586621679063362"><span class="annot"><span class="annottext">embed :: forall (n :: * -&gt; *) (m :: * -&gt; *) b.
Monad n =&gt;
(forall a. m a -&gt; Proxy a' a b' b n a)
-&gt; Proxy a' a b' b m b -&gt; Proxy a' a b' b n b
</span><a href="#local-6989586621679063362"><span class="hs-identifier hs-var hs-var hs-var hs-var">embed</span></a></span></span><span> </span><span id="local-6989586621679063361"><span class="annot"><span class="annottext">forall a. m a -&gt; Proxy a' a b' b n a
</span><a href="#local-6989586621679063361"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {r}. Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063360"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-176"></span><span>        </span><span id="local-6989586621679063360"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063360"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063357"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063357"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063357"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-177"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063356"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063356"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063355"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063355"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063356"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063354"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063354"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063360"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063355"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063354"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063353"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063353"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063352"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063352"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063353"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063351"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063351"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063360"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063352"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063351"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063350"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063350"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. m a -&gt; Proxy a' a b' b n a
</span><a href="#local-6989586621679063361"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063350"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b n r
</span><a href="#local-6989586621679063360"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-180"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063349"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063349"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063349"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063754"><span id="local-6989586621679063755"><span id="local-6989586621679063756"><span id="local-6989586621679063757"><span id="local-6989586621679063758"><span class="annot"><span class="hs-identifier hs-type">F.MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679063758"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">F.MonadFail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063757"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063756"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063755"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063754"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063758"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-183"></span><span>    </span><span id="local-6989586621679063335"><span class="annot"><span class="annottext">fail :: forall a. String -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fail</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">F.fail</span></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063737"><span id="local-6989586621679063738"><span id="local-6989586621679063739"><span id="local-6989586621679063740"><span id="local-6989586621679063741"><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679063741"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063740"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063739"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063738"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063737"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063741"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>    </span><span id="local-6989586621679063320"><span class="annot"><span class="annottext">liftIO :: forall a. IO a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063320"><span class="hs-identifier hs-var hs-var hs-var hs-var">liftIO</span></a></span></span><span> </span><span id="local-6989586621679063319"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679063319"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679063319"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063719"><span id="local-6989586621679063720"><span id="local-6989586621679063721"><span id="local-6989586621679063722"><span id="local-6989586621679063723"><span id="local-6989586621679063724"><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621679063724"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063723"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621679063724"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063722"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063721"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063720"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063719"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063723"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>    </span><span id="local-6989586621679063303"><span class="annot"><span class="annottext">ask :: Proxy a' a b' b m r
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">ask</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-190"></span><span>    </span><span id="local-6989586621679063300"><span class="annot"><span class="annottext">local :: forall a. (r -&gt; r) -&gt; Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">local</span></span></span><span> </span><span id="local-6989586621679063298"><span class="annot"><span class="annottext">r -&gt; r
</span><a href="#local-6989586621679063298"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {a'} {a} {b'} {b} {r}.
MonadReader r m =&gt;
Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063297"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-191"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>          </span><span id="local-6989586621679063297"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063297"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063290"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063290"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063290"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-193"></span><span>              </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063289"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063289"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063288"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063288"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063289"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063287"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063287"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063297"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063288"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063287"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>              </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063286"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063286"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063285"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063285"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063286"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063284"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063284"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063297"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063285"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063284"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>              </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063283"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063283"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063283"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-196"></span><span>              </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>       </span><span id="local-6989586621679063282"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063282"><span class="hs-identifier hs-var">m</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063297"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span><span class="hs-identifier hs-var">local</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; r
</span><a href="#local-6989586621679063298"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063282"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621679063278"><span class="annot"><span class="annottext">reader :: forall a. (r -&gt; a) -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">reader</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">reader</span></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063696"><span id="local-6989586621679063697"><span id="local-6989586621679063698"><span id="local-6989586621679063699"><span id="local-6989586621679063700"><span id="local-6989586621679063701"><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679063701"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063700"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="#local-6989586621679063701"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063699"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063698"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063697"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063696"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063700"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>    </span><span id="local-6989586621679063261"><span class="annot"><span class="annottext">get :: Proxy a' a b' b m s
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-201"></span><span>    </span><span id="local-6989586621679063256"><span class="annot"><span class="annottext">put :: s -&gt; Proxy a' a b' b m ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">put</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; s -&gt; m ()
</span><span class="hs-identifier hs-var">put</span></span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621679063251"><span class="annot"><span class="annottext">state :: forall a. (s -&gt; (a, s)) -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">state</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; (a, s)) -&gt; m a
</span><span class="hs-identifier hs-var">state</span></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063677"><span id="local-6989586621679063678"><span id="local-6989586621679063679"><span id="local-6989586621679063680"><span id="local-6989586621679063681"><span id="local-6989586621679063682"><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="annot"><a href="#local-6989586621679063682"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063681"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="annot"><a href="#local-6989586621679063682"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063680"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063679"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063678"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063677"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063681"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>    </span><span id="local-6989586621679063229"><span class="annot"><span class="annottext">writer :: forall a. (a, w) -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">writer</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) a. MonadWriter w m =&gt; (a, w) -&gt; m a
</span><span class="hs-identifier hs-var">writer</span></span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621679063224"><span class="annot"><span class="annottext">tell :: w -&gt; Proxy a' a b' b m ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">tell</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><span class="hs-identifier hs-var">tell</span></span><span>
</span><span id="line-207"></span><span>    </span><span id="local-6989586621679063220"><span class="annot"><span class="annottext">listen :: forall a. Proxy a' a b' b m a -&gt; Proxy a' a b' b m (a, w)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">listen</span></span></span><span> </span><span id="local-6989586621679063218"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063218"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {b} {a'} {a} {b'} {b} {a}.
MonadWriter b m =&gt;
Proxy a' a b' b m a -&gt; b -&gt; Proxy a' a b' b m (a, b)
</span><a href="#local-6989586621679063217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063218"><span class="hs-identifier hs-var">p0</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-208"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>        </span><span id="local-6989586621679063217"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m a -&gt; b -&gt; Proxy a' a b' b m (a, b)
</span><a href="#local-6989586621679063217"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063209"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063209"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679063208"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063208"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063209"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-210"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063207"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063207"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063206"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063206"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063207"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063205"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063205"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; b -&gt; Proxy a' a b' b m (a, b)
</span><a href="#local-6989586621679063217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063206"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063205"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063208"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063204"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063204"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063203"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063203"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063204"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063202"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063202"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; b -&gt; Proxy a' a b' b m (a, b)
</span><a href="#local-6989586621679063217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063203"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063202"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063208"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>       </span><span id="local-6989586621679063201"><span class="annot"><span class="annottext">m (Proxy a' a b' b m a)
</span><a href="#local-6989586621679063201"><span class="hs-identifier hs-var">m</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-213"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621679063200"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063200"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063199"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063199"><span class="hs-identifier hs-var">w'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) a. MonadWriter w m =&gt; m a -&gt; m (a, w)
</span><span class="hs-identifier hs-var">listen</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m a)
</span><a href="#local-6989586621679063201"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-214"></span><span>                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; b -&gt; Proxy a' a b' b m (a, b)
</span><a href="#local-6989586621679063217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063200"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063208"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063199"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063197"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063197"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063197"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063208"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span>    </span><span id="local-6989586621679063194"><span class="annot"><span class="annottext">pass :: forall a. Proxy a' a b' b m (a, w -&gt; w) -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pass</span></span></span><span> </span><span id="local-6989586621679063192"><span class="annot"><span class="annottext">Proxy a' a b' b m (a, w -&gt; w)
</span><a href="#local-6989586621679063192"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall {w} {m :: * -&gt; *} {a'} {a} {b'} {b} {r}.
MonadWriter w m =&gt;
Proxy a' a b' b m (r, w -&gt; w) -&gt; w -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063191"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (a, w -&gt; w)
</span><a href="#local-6989586621679063192"><span class="hs-identifier hs-var">p0</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-218"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-219"></span><span>        </span><span id="local-6989586621679063191"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m (r, w -&gt; w) -&gt; w -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063191"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063179"><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w -&gt; w)
</span><a href="#local-6989586621679063179"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679063178"><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679063178"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w -&gt; w)
</span><a href="#local-6989586621679063179"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-220"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063177"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063177"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063176"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m (r, w -&gt; w)
</span><a href="#local-6989586621679063176"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063177"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063175"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063175"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w -&gt; w) -&gt; w -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063191"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m (r, w -&gt; w)
</span><a href="#local-6989586621679063176"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063175"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679063178"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063174"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063174"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063173"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m (r, w -&gt; w)
</span><a href="#local-6989586621679063173"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063174"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063172"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063172"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w -&gt; w) -&gt; w -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063191"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m (r, w -&gt; w)
</span><a href="#local-6989586621679063173"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063172"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679063178"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>       </span><span id="local-6989586621679063171"><span class="annot"><span class="annottext">m (Proxy a' a b' b m (r, w -&gt; w))
</span><a href="#local-6989586621679063171"><span class="hs-identifier hs-var">m</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-223"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621679063170"><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w -&gt; w)
</span><a href="#local-6989586621679063170"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063169"><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679063169"><span class="hs-identifier hs-var">w'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) a. MonadWriter w m =&gt; (w -&gt; w) -&gt; m a -&gt; m a
</span><span class="hs-identifier hs-var">censor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) a. MonadWriter w m =&gt; m a -&gt; m (a, w)
</span><span class="hs-identifier hs-var">listen</span></span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m (r, w -&gt; w))
</span><a href="#local-6989586621679063171"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w -&gt; w) -&gt; w -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063191"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m (r, w -&gt; w)
</span><a href="#local-6989586621679063170"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679063178"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679063169"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621679063167"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063167"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063166"><span class="annot"><span class="annottext">w -&gt; w
</span><a href="#local-6989586621679063166"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall w (m :: * -&gt; *) a. MonadWriter w m =&gt; m (a, w -&gt; w) -&gt; m a
</span><span class="hs-identifier hs-var">pass</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063167"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">w
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">w -&gt; w
</span><a href="#local-6989586621679063166"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">w
</span><a href="#local-6989586621679063178"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063635"><span id="local-6989586621679063636"><span id="local-6989586621679063637"><span id="local-6989586621679063638"><span id="local-6989586621679063639"><span id="local-6989586621679063640"><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="#local-6989586621679063640"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063639"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="#local-6989586621679063640"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063638"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063637"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063636"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063635"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063639"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>    </span><span id="local-6989586621679063151"><span class="annot"><span class="annottext">throwError :: forall a. e -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">throwError</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span>
</span><span id="line-229"></span><span>    </span><span id="local-6989586621679063149"><span class="annot"><span class="annottext">catchError :: forall a.
Proxy a' a b' b m a
-&gt; (e -&gt; Proxy a' a b' b m a) -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">catchError</span></span></span><span> </span><span id="local-6989586621679063147"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063147"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span id="local-6989586621679063146"><span class="annot"><span class="annottext">e -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063146"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063145"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063147"><span class="hs-identifier hs-var">p0</span></a></span><span>
</span><span id="line-230"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-231"></span><span>        </span><span id="local-6989586621679063145"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063145"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063140"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063140"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063140"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-232"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063139"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063139"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063138"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063138"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063139"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063137"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063137"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063145"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063138"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063137"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063136"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063136"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063135"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063135"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063136"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063134"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063134"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063145"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063135"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063134"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063133"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063133"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063133"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-235"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063132"><span class="annot"><span class="annottext">m (Proxy a' a b' b m a)
</span><a href="#local-6989586621679063132"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-236"></span><span>                </span><span id="local-6989586621679063131"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063131"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m a)
</span><a href="#local-6989586621679063132"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-237"></span><span>                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063145"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063131"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchError`</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063130"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679063130"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679063130"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063618"><span id="local-6989586621679063619"><span id="local-6989586621679063620"><span id="local-6989586621679063621"><span id="local-6989586621679063622"><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679063622"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063621"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063620"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063619"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063618"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063622"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-240"></span><span>    </span><span id="local-6989586621679063114"><span class="annot"><span class="annottext">throwM :: forall e a. Exception e =&gt; e -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">throwM</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">throwM</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063602"><span id="local-6989586621679063603"><span id="local-6989586621679063604"><span id="local-6989586621679063605"><span id="local-6989586621679063606"><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="annot"><a href="#local-6989586621679063606"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063605"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063604"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063603"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063602"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063606"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-244"></span><span>    </span><span id="local-6989586621679063102"><span class="annot"><span class="annottext">catch :: forall e a.
Exception e =&gt;
Proxy a' a b' b m a
-&gt; (e -&gt; Proxy a' a b' b m a) -&gt; Proxy a' a b' b m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">catch</span></span></span><span> </span><span id="local-6989586621679063100"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063100"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span id="local-6989586621679063099"><span class="annot"><span class="annottext">e -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063099"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063098"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063100"><span class="hs-identifier hs-var">p0</span></a></span><span>
</span><span id="line-245"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-246"></span><span>        </span><span id="local-6989586621679063098"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063098"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063092"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063092"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063092"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-247"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063091"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063091"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063090"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063090"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063091"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063089"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063089"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063098"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063090"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063089"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063088"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063088"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063087"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063087"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063088"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063086"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063086"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063098"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063087"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063086"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063085"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063085"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063085"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-250"></span><span>            </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063084"><span class="annot"><span class="annottext">m (Proxy a' a b' b m a)
</span><a href="#local-6989586621679063084"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-251"></span><span>                </span><span id="local-6989586621679063083"><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063083"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m a)
</span><a href="#local-6989586621679063084"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-252"></span><span>                </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a' a b' b m a -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063098"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m a
</span><a href="#local-6989586621679063083"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) e a.
(MonadCatch m, Exception e) =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`Control.Monad.Catch.catch`</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063082"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679063082"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; Proxy a' a b' b m a
</span><a href="#local-6989586621679063099"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679063082"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">{-| The monad transformer laws are correct when viewed through the 'observe'
    function:

@
'observe' ('lift' ('return' r)) = 'observe' ('return' r)

'observe' ('lift' (m '&gt;&gt;=' f)) = 'observe' ('lift' m '&gt;&gt;=' 'lift' '.' f)
@

    This correctness comes at a small cost to performance, so use this function
    sparingly.

    This function is a convenience for low-level @pipes@ implementers.  You do
    not need to use 'observe' if you stick to the safe API.
-}</span><span>
</span><span id="line-269"></span><span id="local-6989586621679063783"><span id="local-6989586621679063784"><span id="local-6989586621679063785"><span id="local-6989586621679063786"><span id="local-6989586621679063787"><span id="local-6989586621679063788"><span class="annot"><a href="Pipes.Internal.html#observe"><span class="hs-identifier hs-type">observe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679063788"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063787"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063786"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063785"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063784"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063788"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063783"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063787"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063786"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063785"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063784"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063788"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063783"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-270"></span><span id="observe"><span class="annot"><span class="annottext">observe :: forall (m :: * -&gt; *) a' a b' b r.
Monad m =&gt;
Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#observe"><span class="hs-identifier hs-var hs-var">observe</span></a></span></span><span> </span><span id="local-6989586621679063079"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063079"><span class="hs-identifier hs-var">p0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
m (Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {m :: * -&gt; *} {a'} {a} {b'} {b} {r}.
Monad m =&gt;
Proxy a' a b' b m r -&gt; m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063078"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063079"><span class="hs-identifier hs-var">p0</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>    </span><span id="local-6989586621679063078"><span class="annot"><span class="annottext">go :: Proxy a' a b' b m r -&gt; m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063078"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679063070"><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063070"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r
</span><a href="#local-6989586621679063070"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-272"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-type">Request</span></a></span><span> </span><span id="local-6989586621679063069"><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063069"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679063068"><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063068"><span class="hs-identifier hs-var">fa</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
a' -&gt; (a -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a></span><span> </span><span class="annot"><span class="annottext">a'
</span><a href="#local-6989586621679063069"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063067"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063067"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a' a b' b r.
Monad m =&gt;
Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#observe"><span class="hs-identifier hs-var">observe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063068"><span class="hs-identifier hs-var">fa</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063067"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-type">Respond</span></a></span><span> </span><span id="local-6989586621679063066"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063066"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span id="local-6989586621679063065"><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063065"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r.
b -&gt; (b' -&gt; Proxy a' a b' b m r) -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679063066"><span class="hs-identifier hs-var">b</span></a></span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063064"><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063064"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a' a b' b r.
Monad m =&gt;
Proxy a' a b' b m r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#observe"><span class="hs-identifier hs-var">observe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b' -&gt; Proxy a' a b' b m r
</span><a href="#local-6989586621679063065"><span class="hs-identifier hs-var">fb'</span></a></span><span> </span><span class="annot"><span class="annottext">b'
</span><a href="#local-6989586621679063064"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-type">M</span></a></span><span>          </span><span id="local-6989586621679063063"><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063063"><span class="hs-identifier hs-var">m'</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063063"><span class="hs-identifier hs-var">m'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Proxy a' a b' b m r -&gt; m (Proxy a' a b' b m r)
</span><a href="#local-6989586621679063078"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-275"></span><span>        </span><span class="annot"><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-type">Pure</span></a></span><span>    </span><span id="local-6989586621679063062"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063062"><span class="hs-identifier hs-var">r</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a' a b' b (m :: * -&gt; *) r. r -&gt; Proxy a' a b' b m r
</span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679063062"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Internal.html#observe"><span class="hs-pragma hs-type">observe</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="hs-comment">-- | The empty type, used to close output ends</span><span>
</span><span id="line-279"></span><span class="hs-keyword">type</span><span> </span><span id="X"><span class="annot"><a href="Pipes.Internal.html#X"><span class="hs-identifier hs-var">X</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="hs-comment">-- | Use 'closed' to \&quot;handle\&quot; impossible outputs</span><span>
</span><span id="line-282"></span><span id="local-6989586621679063586"><span class="annot"><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-type">closed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Pipes.Internal.html#X"><span class="hs-identifier hs-type">X</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063586"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-283"></span><span id="closed"><span class="annot"><span class="annottext">closed :: forall a. X -&gt; a
</span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var hs-var">closed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. X -&gt; a
</span><span class="hs-identifier hs-var">Data.Void.absurd</span></span><span>
</span><span id="line-284"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="Pipes.Internal.html#closed"><span class="hs-pragma hs-type">closed</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-285"></span></pre></body></html>